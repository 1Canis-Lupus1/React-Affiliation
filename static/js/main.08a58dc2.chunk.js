(this["webpackJsonptrue-fanz-admin-panel"]=this["webpackJsonptrue-fanz-admin-panel"]||[]).push([[0],{199:function(e,t,a){},353:function(e,t,a){e.exports=a(728)},358:function(e,t,a){},564:function(e,t){},588:function(e,t){},727:function(e,t,a){},728:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),o=a.n(l),s=(a(358),a(4)),i=a(5),c=a(7),m=a(6),u=a(13),d=a(27),p=a(733),f=a(734),g=a(735),h=a(736),v=a(737),E=a(738),b=a(739),_=a(740),y=a(741),S=a(310),C=a(742),N=a(743),P=a(118),O=a(10),D=a(20),L=a.n(D),w=a(28),k=a(49),T=a(159),x=a(307),A=a.n(x),M=a(308),F=a(51),I={socialAffilAdminToken:null,socialAffilAdminEmail:null},j=Object(k.c)({socialAffilAdmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_AUTH_TOKEN":e=Object(F.a)(Object(F.a)({},e),{},{socialAffilAdminToken:t.payload.token,socialAffilAdminEmail:t.payload.email});break;case"REMOVE_AUTH_TOKEN":e=Object(F.a)(Object(F.a)({},e),{},{socialAffilAdminToken:null,socialAffilAdminEmail:null})}return e}}),R={key:"root",storage:A.a,keyPrefix:"",blacklist:[]},B=Object(T.a)(R,j),U=Object(k.a)(M.a),V=Object(k.d)(B,void 0,U),Y=Object(T.b)(V),W=function(){return new Promise((function(e,t){var a=null,n=V.getState().socialAffilAdmin;n&&n.socialAffilAdminToken&&(a=n.socialAffilAdminToken),e(a)}))},z=function(e){var t="?",a=Object.keys(e);return a.forEach((function(n,r){t+=n+"="+e[n],e[a[r+1]]&&(t+="&")})),t},H=function(){var e=Object(w.a)(L.a.mark((function e(t){var a,n,r,l,o,s=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]&&s[1],n=s.length>2&&void 0!==s[2]?s[2]:null,r="",n&&(r=z(n)),l={Accept:"application/json","Content-Type":"application/json"},!a){e.next=16;break}return e.prev=6,e.next=9,W();case 9:(o=e.sent)&&(console.log(o),l.Authorization="Bearer "+o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:return e.abrupt("return",new Promise((function(e,a){try{fetch(t+r,{method:"GET",headers:l}).then((function(e){return e.json()})).then((function(t){!1===t.error?e(t):(console.log(t),a(t))})).catch((function(e){console.log("XHR GET Error: ",e),a(e)}))}catch(n){console.log(n),a()}})));case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(w.a)(L.a.mark((function e(t){var a,n,r,l,o=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]&&o[1],n=o.length>2&&void 0!==o[2]?o[2]:{},r={Accept:"application/json","Content-Type":"application/json"},!a){e.next=14;break}return e.prev=4,e.next=7,W();case 7:(l=e.sent)&&(r.Authorization="Bearer "+l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("Error fetching auth token: ",e.t0);case 14:return e.abrupt("return",new Promise((function(e,a){try{fetch(t,{method:"POST",headers:r,body:JSON.stringify(n)}).then((function(e){return e.json()}),(function(e){a(e)})).then((function(t){!1===t.error?e(t):(console.log(t),a(t))}),(function(e){a(e)})).catch((function(e){a(e)}))}catch(l){console.log(l),a()}})));case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(w.a)(L.a.mark((function e(t){var a,n,r,l,o=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]&&o[1],n=o.length>2&&void 0!==o[2]?o[2]:{},r={Accept:"application/json","Content-Type":"application/json"},!a){e.next=14;break}return e.prev=4,e.next=7,W();case 7:(l=e.sent)&&(r.Authorization="Bearer "+l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("Error fetching auth token: ",e.t0);case 14:return e.abrupt("return",new Promise((function(e,a){try{fetch(t,{method:"PUT",headers:r,body:JSON.stringify(n)}).then((function(e){return e.json()}),(function(e){a(e)})).then((function(t){!1===t.error?e(t):(console.log(t),a(t))}),(function(e){a(e)})).catch((function(e){a(e)}))}catch(l){console.log(l),a()}})));case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),q="http://139.59.14.81:3000/admin/v1/",Z=function(e){var t=e.handle,a=e.password;return new Promise((function(e,n){K(q+"login",!1,{handle:t,password:a}).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),n(e)}))}))},G=function(e){var t=e.handle;return new Promise((function(e,a){K("http://139.59.14.81:3000/api/v1/forgotpassword",!1,{handle:t}).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},$=function(){return new Promise((function(e,t){H(q+"influencers",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},Q=function(e){return new Promise((function(t,a){J(q+"change/status/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},X=function(e){return new Promise((function(t,a){H(q+"influencer/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},ee=function(e){return new Promise((function(t,a){K(q+"fans",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},te=function(){return new Promise((function(e,t){H(q+"admins",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},ae=function(e){return new Promise((function(t,a){J(q+"admin/status/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},ne=function(e){return new Promise((function(t,a){K(q+"create/admin",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},re=function(){return new Promise((function(e,t){H(q+"invitations",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},le=function(){return new Promise((function(e,t){H(q+"invitationRequests",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},oe=function(){return new Promise((function(e,t){H(q+"sellers",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},se=function(e,t){return new Promise((function(a,n){J(q+"seller/".concat(t),!0,e).then((function(e){a(e)})).catch((function(e){console.log("API call error: ",e),n(e)}))}))},ie=function(e,t){return new Promise((function(a,n){J(q+"influencer/".concat(t),!0,e).then((function(e){a(e)})).catch((function(e){console.log("API call error: ",e),n(e)}))}))},ce=function(){return new Promise((function(e,t){H(q+"payouts",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},me=function(e){return new Promise((function(t,a){K(q+"transactions",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},ue=function(e){return new Promise((function(t,a){J(q+"transactions",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},de=function(){return new Promise((function(e,t){H(q+"settings",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},pe=function(e){return new Promise((function(t,a){J(q+"settings",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},fe=function(e,t){return new Promise((function(a,n){K(q+"users/emails/"+e,!0,t).then((function(e){a(e)})).catch((function(e){console.log("API call error: ",e),n(e)}))}))},ge=function(){return new Promise((function(e,t){H(q+"dashboard/summary",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},he=function(e){return new Promise((function(t,a){K(q+"dashboard/influencer/summary",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},ve=function(e,t){return new Promise((function(a,n){J(q+"withdrawal/"+e,!0,t).then((function(e){a(e)})).catch((function(e){console.log("API call error: ",e),n(e)}))}))},Ee=function(e){return new Promise((function(t,a){K(q+"dashboard/fan/summary",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},be=function(){return new Promise((function(e,t){H(q+"dashboard/influencer/month",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},_e=function(e){return new Promise((function(t,a){K(q+"dashboard/fan/month",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},ye=function(e){return new Promise((function(t,a){H(q+"/post/comments/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("getComments call error: ",e),a(e)}))}))},Se=function(e,t){return new Promise((function(a,n){J(q+"influencer/"+e,!0,t).then((function(e){a(e)})).catch((function(e){console.log("API call error: ",e),n(e)}))}))},Ce=function(e,t){return new Promise((function(a,n){J(q+"invitationRequest/"+e,!0,t).then((function(e){a(e)})).catch((function(e){console.log("API call error: ",e),n(e)}))}))},Ne=function(e){return new Promise((function(t,a){K(q+"report",!0,e).then((function(e){t(e)})).catch((function(e){console.log("flagPost call error: ",e),a(e)}))}))},Pe=function(e){return new Promise((function(t,a){H(q+"post/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},Oe=function(){return new Promise((function(e,t){H(q+"users",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))}))},De=function(e){return new Promise((function(t,a){K(q+"events",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},Le=function(e){return new Promise((function(t,a){K(q+"payperviews",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))},we=a(309),ke=a(11),Te=a.n(ke),xe=function(e){return we(e)},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;O.ToastsStore[t](e,a)},Me=function(e){return new Promise((function(t){return setTimeout((function(){return t()}),e)}))},Fe=function(e){return Te()().isSame(e,"year")?Te()(e).format("MMM DD"):Te()(e).format("MMM DD, YYYY")},Ie=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},je=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},Re=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={admin:{handle:"",password:""},errors:{},isDirty:{handle:!1,password:!1},loading:!1},e._handleOnChange=function(t){var a=t.currentTarget,n=e.state,r=n.admin,l=n.isDirty;r[a.name]=a.value,l[a.name]=!0,e.setState({admin:r}),e._validateForm()},e._handleOnSubmit=function(t){t.preventDefault();var a=e.state.isDirty;a.handle=!0,a.password=!0,e.setState({isDirty:a}),console.log(e.state.isDirty);var n=e._validateForm();console.log(n),n||(console.log("Make API call"),e._login())},e._login=function(){var t=e.state,a=t.admin,n=t.loading;n=!0,e.setState({loading:n}),Z(a).then((function(t){(console.log(t),n=!1,e.setState({loading:n}),t.token)?((0,e.props.addAuthToken)(t.token,t.handle),O.ToastsStore.success("Successfully logged in!",3e3),e.props.history.push("/sellers")):O.ToastsStore.error("something went wrong")}),(function(t){console.log(t),n=!1,Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error"),e.setState({loading:n})}))},e._goToForgotPassword=function(){e.props.history.push("forgot-password")},e}return Object(i.a)(a,[{key:"_validateForm",value:function(){var e=this.state,t=e.admin,a=e.errors,n=e.isDirty;return Object.keys(t).forEach((function(e){"handle"===e&&n.handle?t.handle.trim().length?t.handle.trim().length&&!new RegExp("^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,3}$").test(t.handle)?a.handle="Please enter valid Email":(delete a[e],n.handle=!1):a.handle="Email is Required":"password"===e&&n.password&&(t.password.trim().length?(delete a[e],n.password=!1):a[e]="Password is Required")})),this.setState({errors:a}),Object.keys(a).length?a:null}},{key:"render",value:function(){return r.a.createElement("div",{className:"app loginPgBg animated fadeIn"},r.a.createElement(p.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{md:"12"},r.a.createElement("div",{className:"loginPgContent"},r.a.createElement(h.a,null,r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",null,"Login"),r.a.createElement("p",{style:{color:"#999",letterSpacing:"0.5px",fontSize:"15px"}},"Sign In to your account"),r.a.createElement(b.a,{onSubmit:this._handleOnSubmit,noValidate:!0},r.a.createElement(_.a,{className:this.state.errors&&this.state.errors.handle?"mb-3 invalid-input":"mb-3"},r.a.createElement(y.a,{addonType:"prepend"},r.a.createElement(S.a,null,r.a.createElement("i",{className:"fa fa-envelope-o"}))),r.a.createElement(C.a,{type:"email",placeholder:"Email",autoComplete:"off",name:"handle",onChange:this._handleOnChange}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.handle)),r.a.createElement(_.a,{className:this.state.errors&&this.state.errors.password?"mb-2 invalid-input":"mb2"},r.a.createElement(y.a,{addonType:"prepend"},r.a.createElement(S.a,null,r.a.createElement("i",{className:"icon-lock-open"}))),r.a.createElement(C.a,{type:"password",placeholder:"Password",autoComplete:"off",name:"password",onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.handle?"invalid-input":"valid-input"}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.password)),r.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},r.a.createElement(N.a,{type:"button",color:"link",className:"px-0",onClick:this._goToForgotPassword},"Forgot Password?")),this.state.admin.handle&&this.state.admin.password&&r.a.createElement(N.a,{type:"submit",className:"BtnPurple",disabled:this.state.loading},this.state.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Login")))))))),r.a.createElement("div",{className:"login-footer"},r.a.createElement("div",{className:"d-flex justify-content-start flex-column flex-sm-row"},r.a.createElement("span",null,"\xa9 SocialAffil 2020")),r.a.createElement("span",{className:"powered-by"},"Powered by"," ",r.a.createElement("a",{href:"https://www.logic-square.com/",target:"_blank",rel:"noopener noreferrer"},"Logic Square")))))}}]),a}(n.Component),Be=Object(P.b)(null,(function(e){return{addAuthToken:function(t,a){return e(function(e,t){return{type:"ADD_AUTH_TOKEN",payload:{token:e,email:t}}}(t,a))}}}))(Re),Ue=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={admin:{handle:""},errors:{},isDirty:{handle:!1},loading:!1},e._backToLogin=function(){e.props.history.push("login")},e._handleOnChange=function(t){var a=t.currentTarget,n=e.state,r=n.admin,l=n.isDirty;r[a.name]=a.value,l[a.name]=!0,e.setState({admin:r}),e._validateForm()},e._handleOnSubmit=function(t){t.preventDefault();var a=e.state.isDirty;a.handle=!0,e.setState({isDirty:a}),console.log(e.state.isDirty);var n=e._validateForm();console.log(n),n||(console.log("Make API call"),e._fotgotPassword())},e._manageLoading=function(t){var a=e.state.loading;a=t,e.setState({loading:a})},e._fotgotPassword=function(){e._manageLoading(!0),G(e.state.admin).then((function(t){console.log(t),O.ToastsStore.success("Please check your email for futher instructions",3e3),e._manageLoading(!1),e.props.history.push("/login")}),(function(t){console.log(t),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error"),e._manageLoading(!1)}))},e}return Object(i.a)(a,[{key:"_validateForm",value:function(){var e=this.state,t=e.admin,a=e.errors,n=e.isDirty;return Object.keys(t).forEach((function(e){"handle"===e&&n.handle&&(t.handle.trim().length?t.handle.trim().length&&!new RegExp("^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,3}$").test(t.handle)?a.handle="Please enter valid Email":(delete a[e],n.handle=!1):a.handle="Email is Required")})),this.setState({errors:a}),Object.keys(a).length?a:null}},{key:"render",value:function(){return r.a.createElement("div",{className:"app loginPgBg animated fadeIn"},r.a.createElement(p.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{md:"12"},r.a.createElement("div",{className:"loginPgContent"},r.a.createElement(h.a,null,r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",{className:"mb-3"},"Forgot Password"),r.a.createElement(b.a,{onSubmit:this._handleOnSubmit,noValidate:!0},r.a.createElement(f.a,{form:!0},r.a.createElement(g.a,{md:12},r.a.createElement(_.a,{className:this.state.errors&&this.state.errors.handle?"mb-3 invalid-input":"mb-3"},r.a.createElement(y.a,{addonType:"prepend"},r.a.createElement(S.a,null,r.a.createElement("i",{className:"icon-envelope forgot-icon"}))),r.a.createElement(C.a,{type:"email",placeholder:"Email",autoComplete:"off",name:"handle",onChange:this._handleOnChange}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.handle))),r.a.createElement(g.a,{md:12},this.state.admin.handle&&r.a.createElement(N.a,{type:"submit",className:"BtnPurple mt-3 mb-2"},this.state.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr-2"}),"\xa0"):null,"Forgot Password")))),r.a.createElement("span",{className:"powered-by",onClick:this._backToLogin},"Back To"," ",r.a.createElement("a",{href:"",target:"_blank",rel:"noopener noreferrer"},"Login")))))))),r.a.createElement("div",{className:"login-footer"},r.a.createElement("div",{className:"d-flex justify-content-start flex-column flex-sm-row"},r.a.createElement("span",null,"\xa9 SocialAffil 2020.")),r.a.createElement("span",{className:"powered-by"},"Powered by"," ",r.a.createElement("a",{href:"https://www.logic-square.com/",target:"_blank",rel:"noopener noreferrer"},"Logic Square")))))}}]),a}(n.Component),Ve=a(744),Ye=a(91),We=a(312),ze=a(9),He={tooltips:{enabled:!1,custom:We.CustomTooltips},maintainAspectRatio:!1,legend:!1},Ke=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={creatorList:[],summary:{creators:0,subscribers:0,ppvs:0,subscriptions:0,tips:0},filterOptions:[{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"}],filters:{topCreator:"week",topSubscriber:"week",creator:""},topCreatorChartData:{},topSubscriberChartData:{},creatorsPerMonthChartData:{},subscribersPerMonthChartData:{},loading:{topCreator:!1,topSubscriber:!1,creatorsPerMonth:!1,subscribersPerMonth:!1}},e._manageLoading=function(t,a){var n=e.state.loading,r=n.topCreator,l=n.topSubscriber,o=n.creatorsPerMonth,s=n.subscribersPerMonth;"topCreator"===t?r=a:"topSubscriber"===t?l=a:"creatorsPerMonth"===t?o=a:"subscribersPerMonth"===t&&(s=a),e.setState({loading:{topCreator:r,topSubscriber:l,creatorsPerMonth:o,subscribersPerMonth:s}})},e._getDashboardSummary=function(){console.log("getDashboardSummary"),ge().then((function(t){console.log(t);var a={creators:t.creators,subscribers:t.fans,liveEvents:Ie(t.liveEvents),payperviews:Ie(t.payperviews),subscriptions:Ie(t.subscriptions),tips:Ie(t.tips),unlocks:Ie(t.unlocks),vaults:Ie(t.vaults)};e.setState({summary:a})}),(function(e){console.log(e)}))},e._getAllCreators=function(){$().then((function(t){console.log(t);var a=t.influencers.map((function(e){return{name:e.name.full,id:e.id}}));e.setState({creatorList:a})}),(function(e){console.log(e)}))},e._getAllUsers=function(){Oe().then((function(t){console.log("response :",t);var a=t.influencers.map((function(e){return{name:e.name.full,id:e.id}}));e.setState({creatorList:a})}),(function(e){console.log("error :",e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},e._getTopCreators=function(t){he(t).then((function(t){var a=t.influencers.sort((function(e,t){return t._subCount-e._subCount}));a=a.slice(0,10),console.log(a);var n={labels:a.map((function(e,t){return e.name.full})),datasets:[{label:"",backgroundColor:"rgba(95, 66, 170, 0.3)",borderColor:"rgba(95, 66, 170, 1)",borderWidth:1,hoverBackgroundColor:"rgba(95, 66, 170, 0.5)",hoverBorderColor:"rgba(95, 66, 170, 1)",data:a.map((function(e,t){return e._subCount}))}]};e.setState({topCreatorChartData:n})}),(function(e){console.log(e)}))},e._getTopSubscriber=function(t){Ee(t).then((function(t){var a=t.fans.sort((function(e,t){return t._subCount-e._subCount})),n={labels:(a=a.slice(0,10)).map((function(e,t){return e.name.full.substring(0,10)})),datasets:[{label:"",backgroundColor:"rgba(95, 66, 170, 0.3)",borderColor:"rgba(95, 66, 170, 1)",borderWidth:1,hoverBackgroundColor:"rgba(95, 66, 170, 0.5)",hoverBorderColor:"rgba(95, 66, 170, 1)",data:a.map((function(e,t){return e._subCount}))}]};e.setState({topSubscriberChartData:n})}),(function(e){console.log(e)}))},e._getCreatorsPerMonth=function(){be().then((function(t){console.log(t.influencers);var a=ze.a.monthList.map((function(e,a){var n=t.influencers.find((function(e){return e._id.month===a+1}));return n?n.count:0})),n={labels:ze.a.monthList,datasets:[{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(95, 66, 170, 0.4)",borderColor:"rgba(95, 66, 170,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(255, 64, 159, 1)",pointBackgroundColor:"#fff",pointBorderWidth:5,pointHoverRadius:8,pointHoverBackgroundColor:"rgba(95, 66, 170, 1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:a}]};e.setState({creatorsPerMonthChartData:n})}),(function(e){console.log(e)}))},e._getSubscribersPerMonth=function(){var t={};e.state.filters.creator&&(t.id=e.state.filters.creator),_e(t).then((function(t){var a=ze.a.monthList.map((function(e,a){var n=t.subscriptions.find((function(e){return e._id.month===a+1}));return n?n.count:0})),n={labels:ze.a.monthList,datasets:[{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(95, 66, 170, 0.4)",borderColor:"rgba(95, 66, 170,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(255, 64, 159, 1)",pointBackgroundColor:"#fff",pointBorderWidth:5,pointHoverRadius:8,pointHoverBackgroundColor:"rgba(95, 66, 170, 1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:a}]};e.setState({subscribersPerMonthChartData:n})}),(function(e){console.log(e)}))},e._handleOnchange=function(t,a){var n=t.currentTarget,r=e.state.filters;if(r[n.name]=n.value,e.setState({filters:r}),"topCreator"===a)if(console.log(r.topCreator),"week"===r.topCreator){var l=Te()(),o=l.startOf("week").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),s=l.endOf("week").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]");e._getTopCreators({startdate:o,enddate:s})}else if("month"===r.topCreator){var i=Te()(),c=i.startOf("month").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),m=i.endOf("month").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]");e._getTopCreators({startdate:c,enddate:m})}else{var u=Te()(),d=u.startOf("year").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),p=u.endOf("year").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]");e._getTopCreators({startdate:d,enddate:p})}else if("week"===r.topSubscriber){var f=Te()(),g=f.startOf("week").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),h=f.endOf("week").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]");e._getTopSubscriber({startdate:g,enddate:h})}else if("month"===r.topSubscriber){var v=Te()(),E=v.startOf("month").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),b=v.endOf("month").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]");e._getTopSubscriber({startdate:E,enddate:b})}else{var _=Te()(),y=_.startOf("year").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),S=_.endOf("year").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]");e._getTopSubscriber({startdate:y,enddate:S})}},e._getWeeklyTopCreators=function(){var t=Te()(),a=t.startOf("week").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),n=t.endOf("week").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]");e._getTopCreators({startdate:a,enddate:n})},e._getWeeklyTopSubscribers=function(){var t=Te()(),a=t.startOf("week").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),n=t.endOf("week").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]");e._getTopSubscriber({startdate:a,enddate:n})},e._onSelectCreator=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),e._getSubscribersPerMonth()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getDashboardSummary(),this._getAllUsers(),this._getWeeklyTopCreators(),this._getWeeklyTopSubscribers(),this._getCreatorsPerMonth(),this._getSubscribersPerMonth()}},{key:"render",value:function(){var e=this,t=this.state,a=t.summary,n=t.filters,l=t.filterOptions,o=t.topCreatorChartData,s=t.topSubscriberChartData,i=t.creatorsPerMonthChartData,c=t.subscribersPerMonthChartData,m=t.creatorList;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("h2",null,"Dashboard"))),r.a.createElement(g.a,{sm:"6",md:"6",lg:"3"},r.a.createElement(v.a,{className:"dashboardCard"},r.a.createElement(Ve.a,null,"Influencers",r.a.createElement("span",{className:"bgIcon"},r.a.createElement("i",{className:"icon-user"}))),r.a.createElement(E.a,null,a.creators))),r.a.createElement(g.a,{sm:"6",md:"6",lg:"3"},r.a.createElement(v.a,{className:"dashboardCard"},r.a.createElement(Ve.a,null,"Subscribers",r.a.createElement("span",{className:"bgIcon",style:{right:"-5px"}},r.a.createElement("i",{className:"icon-user-follow"}))),r.a.createElement(E.a,null,a.subscribers))),r.a.createElement(g.a,{sm:"6",md:"6",lg:"3"},r.a.createElement(v.a,{className:"dashboardCard"},r.a.createElement(Ve.a,null,"Subscription Fees",r.a.createElement("span",{className:"bgIcon",style:{right:"-7px",top:"-21px"}},r.a.createElement("i",{className:"fa fa-dollar"}))),r.a.createElement(E.a,null,a.subscriptions))),r.a.createElement(g.a,{sm:"6",md:"6",lg:"3"},r.a.createElement(v.a,{className:"dashboardCard"},r.a.createElement(Ve.a,null,"Live Events",r.a.createElement("span",{className:"bgIcon",style:{right:"-7px",top:"-21px"}},r.a.createElement("i",{className:"fa fa-calendar"}))),r.a.createElement(E.a,null,a.liveEvents))),r.a.createElement(g.a,{sm:"6",md:"6",lg:"3"},r.a.createElement(v.a,{className:"dashboardCard"},r.a.createElement(Ve.a,null,"PPV",r.a.createElement("span",{className:"bgIcon",style:{right:"-7px",top:"-21px"}},r.a.createElement("i",{className:"fa fa-dollar"}))),r.a.createElement(E.a,null,a.payperviews))),r.a.createElement(g.a,{sm:"6",md:"6",lg:"3"},r.a.createElement(v.a,{className:"dashboardCard"},r.a.createElement(Ve.a,null,"Vault",r.a.createElement("span",{className:"bgIcon",style:{right:"-7px",top:"-21px"}},r.a.createElement("i",{className:"fa fa-lock"}))),r.a.createElement(E.a,null,a.vaults))),r.a.createElement(g.a,{sm:"6",md:"6",lg:"3"},r.a.createElement(v.a,{className:"dashboardCard"},r.a.createElement(Ve.a,null,"Unlock",r.a.createElement("span",{className:"bgIcon",style:{right:"-7px",top:"-21px"}},r.a.createElement("i",{className:"fa fa-unlock"}))),r.a.createElement(E.a,null,a.unlocks)))),r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"12",md:"6"},r.a.createElement(v.a,{className:"dashboardCard-Graph"},r.a.createElement(Ve.a,{className:"d-flex justify-content-between align-items-center"},"Top 10 Creators",r.a.createElement(C.a,{type:"select",name:"topCreator",style:{width:"130px"},value:n.topCreator,onChange:function(t){return e._handleOnchange(t,"topCreator")}},r.a.createElement("option",{value:""},"Select"),l.map((function(e){return r.a.createElement("option",{value:e.value,key:e.label},e.label)})))),r.a.createElement(E.a,null,r.a.createElement("div",{className:"chart-wrapper"},r.a.createElement(Ye.a,{data:o,options:He}))))),r.a.createElement(g.a,{sm:"12",md:"6"},r.a.createElement(v.a,{className:"dashboardCard-Graph"},r.a.createElement(Ve.a,{className:"d-flex justify-content-between align-items-center"},"Top 10 Subscribers",r.a.createElement(C.a,{type:"select",name:"topSubscriber",style:{width:"130px"},value:n.topSubscriber,onChange:function(t){return e._handleOnchange(t,"topSubscriber")}},r.a.createElement("option",{value:""},"Select"),l.map((function(e){return r.a.createElement("option",{value:e.value,key:e.label},e.label)})))),r.a.createElement(E.a,null,r.a.createElement("div",{className:"chart-wrapper"},r.a.createElement(Ye.a,{data:s,options:He}))))),r.a.createElement(g.a,{sm:"12",md:"6"},r.a.createElement(v.a,{className:"dashboardCard-Graph"},r.a.createElement(Ve.a,null,"No. of Creators joined per month"),r.a.createElement(E.a,null,r.a.createElement("div",{className:"chart-wrapper"},r.a.createElement(Ye.b,{data:i,options:He}))))),r.a.createElement(g.a,{sm:"12",md:"6"},r.a.createElement(v.a,{className:"dashboardCard-Graph"},r.a.createElement(Ve.a,{className:"d-flex justify-content-between align-items-center"},"No. of Subscribers joined per month",r.a.createElement(C.a,{type:"select",name:"creator",id:"",style:{width:"130px"},value:n.creator,onChange:this._onSelectCreator},r.a.createElement("option",{value:""},"All"),m.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement(E.a,null,r.a.createElement("div",{className:"chart-wrapper"},r.a.createElement(Ye.b,{data:c,options:He})))))),r.a.createElement("br",null)))}}]),a}(n.Component),Je=a(79),qe=(a(199),a(200),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={tableData:[],options:{page:1,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"50",value:50}],sizePerPage:10,pageStartIndex:1,paginationSize:3,prePage:"Prev",nextPage:"Next",firstPage:"First",lastPage:"Last",hideSizePerPage:!0,withFirstAndLast:!0},selectedRows:[],selectRowProp:{mode:"checkbox",clickToSelect:!1,bgColor:"rgb(238, 193, 213)",onSelect:function(t,a){return e.onRowSelect(t,a)},onSelectAll:function(t,a){return e.onSelectAll(t,a)}}},e}return Object(i.a)(a,[{key:"onRowSelect",value:function(e,t){var a=this.state.selectedRows;t?(a.find((function(t){return t===e.id}))?a.splice(a.indexOf(e.id),1):a.push(e.id),console.log("The selection",e,t,a)):(a.splice(a.indexOf(e.id),1),console.log("The selection",e,t,a));this.setState({selectedRows:a}),this.props.setSelectedRows&&this.props.setSelectedRows(a)}},{key:"onSelectAll",value:function(e,t){var a=this.state.selectedRows;a=e?t.map((function(e){return e.id})):[],this.setState({selectedRows:a}),this.props.setSelectedRows&&this.props.setSelectedRows(a)}},{key:"renderShowsTotal",value:function(e,t,a){return r.a.createElement("p",{style:{color:"#FF7300"}},"From ",e," to ",t,", Out of ",a)}},{key:"componentDidMount",value:function(){console.log("componentDidMount.tableData :",this.state.tableData)}},{key:"render",value:function(){var e=this;return console.log("object :",this.props),r.a.createElement("div",null,r.a.createElement(Je.BootstrapTable,{data:this.props.tableData,pagination:!0,options:this.state.options,selectRow:this.props.rowSelection?this.state.selectRowProp:{},bodyContainerClass:"adminTable",version:"4",responsive:!0,hover:!0,ref:"table"},this.props.headerKeys.map((function(t){return r.a.createElement(Je.TableHeaderColumn,{dataField:t.id,key:t.id,isKey:"id"===t.id,dataAlign:"left",dataSort:!t.noSort,hidden:"id"===t.id,dataFormat:function(a,n){return e.props.dataFormat(a,n,t.id)}},t.label)}))))}}]),a}(n.Component)),Ze=a(771),Ge=a(745),$e=a(746),Qe=a(747),Xe=a(748),et=a(749),tt=[{name:"United States",dial_code:"+1",code:"US"},{name:"Afghanistan",dial_code:"+93",code:"AF"},{name:"Albania",dial_code:"+355",code:"AL"},{name:"Algeria",dial_code:"+213",code:"DZ"},{name:"AmericanSamoa",dial_code:"+1 684",code:"AS"},{name:"Andorra",dial_code:"+376",code:"AD"},{name:"Angola",dial_code:"+244",code:"AO"},{name:"Anguilla",dial_code:"+1 264",code:"AI"},{name:"Antigua and Barbuda",dial_code:"+1268",code:"AG"},{name:"Argentina",dial_code:"+54",code:"AR"},{name:"Armenia",dial_code:"+374",code:"AM"},{name:"Aruba",dial_code:"+297",code:"AW"},{name:"Australia",dial_code:"+61",code:"AU"},{name:"Austria",dial_code:"+43",code:"AT"},{name:"Azerbaijan",dial_code:"+994",code:"AZ"},{name:"Bahamas",dial_code:"+1 242",code:"BS"},{name:"Bahrain",dial_code:"+973",code:"BH"},{name:"Bangladesh",dial_code:"+880",code:"BD"},{name:"Barbados",dial_code:"+1 246",code:"BB"},{name:"Belarus",dial_code:"+375",code:"BY"},{name:"Belgium",dial_code:"+32",code:"BE"},{name:"Belize",dial_code:"+501",code:"BZ"},{name:"Benin",dial_code:"+229",code:"BJ"},{name:"Bermuda",dial_code:"+1 441",code:"BM"},{name:"Bhutan",dial_code:"+975",code:"BT"},{name:"Bosnia and Herzegovina",dial_code:"+387",code:"BA"},{name:"Botswana",dial_code:"+267",code:"BW"},{name:"Brazil",dial_code:"+55",code:"BR"},{name:"British Indian Ocean Territory",dial_code:"+246",code:"IO"},{name:"Bulgaria",dial_code:"+359",code:"BG"},{name:"Burkina Faso",dial_code:"+226",code:"BF"},{name:"Burundi",dial_code:"+257",code:"BI"},{name:"Cambodia",dial_code:"+855",code:"KH"},{name:"Cameroon",dial_code:"+237",code:"CM"},{name:"Canada",dial_code:"+1",code:"CA"},{name:"Cape Verde",dial_code:"+238",code:"CV"},{name:"Cayman Islands",dial_code:"+ 345",code:"KY"},{name:"Central African Republic",dial_code:"+236",code:"CF"},{name:"Chad",dial_code:"+235",code:"TD"},{name:"Chile",dial_code:"+56",code:"CL"},{name:"China",dial_code:"+86",code:"CN"},{name:"Christmas Island",dial_code:"+61",code:"CX"},{name:"Colombia",dial_code:"+57",code:"CO"},{name:"Comoros",dial_code:"+269",code:"KM"},{name:"Congo",dial_code:"+242",code:"CG"},{name:"Cook Islands",dial_code:"+682",code:"CK"},{name:"Costa Rica",dial_code:"+506",code:"CR"},{name:"Croatia",dial_code:"+385",code:"HR"},{name:"Cuba",dial_code:"+53",code:"CU"},{name:"Cyprus",dial_code:"+537",code:"CY"},{name:"Czech Republic",dial_code:"+420",code:"CZ"},{name:"Denmark",dial_code:"+45",code:"DK"},{name:"Djibouti",dial_code:"+253",code:"DJ"},{name:"Dominica",dial_code:"+1 767",code:"DM"},{name:"Dominican Republic",dial_code:"+1 849",code:"DO"},{name:"Ecuador",dial_code:"+593",code:"EC"},{name:"Egypt",dial_code:"+20",code:"EG"},{name:"El Salvador",dial_code:"+503",code:"SV"},{name:"Equatorial Guinea",dial_code:"+240",code:"GQ"},{name:"Eritrea",dial_code:"+291",code:"ER"},{name:"Estonia",dial_code:"+372",code:"EE"},{name:"Ethiopia",dial_code:"+251",code:"ET"},{name:"Faroe Islands",dial_code:"+298",code:"FO"},{name:"Fiji",dial_code:"+679",code:"FJ"},{name:"Finland",dial_code:"+358",code:"FI"},{name:"France",dial_code:"+33",code:"FR"},{name:"French Guiana",dial_code:"+594",code:"GF"},{name:"French Polynesia",dial_code:"+689",code:"PF"},{name:"Gabon",dial_code:"+241",code:"GA"},{name:"Gambia",dial_code:"+220",code:"GM"},{name:"Georgia",dial_code:"+995",code:"GE"},{name:"Germany",dial_code:"+49",code:"DE"},{name:"Ghana",dial_code:"+233",code:"GH"},{name:"Gibraltar",dial_code:"+350",code:"GI"},{name:"Greece",dial_code:"+30",code:"GR"},{name:"Greenland",dial_code:"+299",code:"GL"},{name:"Grenada",dial_code:"+1 473",code:"GD"},{name:"Guadeloupe",dial_code:"+590",code:"GP"},{name:"Guam",dial_code:"+1 671",code:"GU"},{name:"Guatemala",dial_code:"+502",code:"GT"},{name:"Guinea",dial_code:"+224",code:"GN"},{name:"Guinea-Bissau",dial_code:"+245",code:"GW"},{name:"Guyana",dial_code:"+595",code:"GY"},{name:"Haiti",dial_code:"+509",code:"HT"},{name:"Honduras",dial_code:"+504",code:"HN"},{name:"Hungary",dial_code:"+36",code:"HU"},{name:"Iceland",dial_code:"+354",code:"IS"},{name:"India",dial_code:"+91",code:"IN"},{name:"Indonesia",dial_code:"+62",code:"ID"},{name:"Iraq",dial_code:"+964",code:"IQ"},{name:"Ireland",dial_code:"+353",code:"IE"},{name:"Israel",dial_code:"+972",code:"IL"},{name:"Italy",dial_code:"+39",code:"IT"},{name:"Jamaica",dial_code:"+1 876",code:"JM"},{name:"Japan",dial_code:"+81",code:"JP"},{name:"Jordan",dial_code:"+962",code:"JO"},{name:"Kazakhstan",dial_code:"+7 7",code:"KZ"},{name:"Kenya",dial_code:"+254",code:"KE"},{name:"Kiribati",dial_code:"+686",code:"KI"},{name:"Kuwait",dial_code:"+965",code:"KW"},{name:"Kyrgyzstan",dial_code:"+996",code:"KG"},{name:"Latvia",dial_code:"+371",code:"LV"},{name:"Lebanon",dial_code:"+961",code:"LB"},{name:"Lesotho",dial_code:"+266",code:"LS"},{name:"Liberia",dial_code:"+231",code:"LR"},{name:"Liechtenstein",dial_code:"+423",code:"LI"},{name:"Lithuania",dial_code:"+370",code:"LT"},{name:"Luxembourg",dial_code:"+352",code:"LU"},{name:"Madagascar",dial_code:"+261",code:"MG"},{name:"Malawi",dial_code:"+265",code:"MW"},{name:"Malaysia",dial_code:"+60",code:"MY"},{name:"Maldives",dial_code:"+960",code:"MV"},{name:"Mali",dial_code:"+223",code:"ML"},{name:"Malta",dial_code:"+356",code:"MT"},{name:"Marshall Islands",dial_code:"+692",code:"MH"},{name:"Martinique",dial_code:"+596",code:"MQ"},{name:"Mauritania",dial_code:"+222",code:"MR"},{name:"Mauritius",dial_code:"+230",code:"MU"},{name:"Mayotte",dial_code:"+262",code:"YT"},{name:"Mexico",dial_code:"+52",code:"MX"},{name:"Monaco",dial_code:"+377",code:"MC"},{name:"Mongolia",dial_code:"+976",code:"MN"},{name:"Montenegro",dial_code:"+382",code:"ME"},{name:"Montserrat",dial_code:"+1664",code:"MS"},{name:"Morocco",dial_code:"+212",code:"MA"},{name:"Myanmar",dial_code:"+95",code:"MM"},{name:"Namibia",dial_code:"+264",code:"NA"},{name:"Nauru",dial_code:"+674",code:"NR"},{name:"Nepal",dial_code:"+977",code:"NP"},{name:"Netherlands",dial_code:"+31",code:"NL"},{name:"Netherlands Antilles",dial_code:"+599",code:"AN"},{name:"New Caledonia",dial_code:"+687",code:"NC"},{name:"New Zealand",dial_code:"+64",code:"NZ"},{name:"Nicaragua",dial_code:"+505",code:"NI"},{name:"Niger",dial_code:"+227",code:"NE"},{name:"Nigeria",dial_code:"+234",code:"NG"},{name:"Niue",dial_code:"+683",code:"NU"},{name:"Norfolk Island",dial_code:"+672",code:"NF"},{name:"Northern Mariana Islands",dial_code:"+1 670",code:"MP"},{name:"Norway",dial_code:"+47",code:"NO"},{name:"Oman",dial_code:"+968",code:"OM"},{name:"Pakistan",dial_code:"+92",code:"PK"},{name:"Palau",dial_code:"+680",code:"PW"},{name:"Panama",dial_code:"+507",code:"PA"},{name:"Papua New Guinea",dial_code:"+675",code:"PG"},{name:"Paraguay",dial_code:"+595",code:"PY"},{name:"Peru",dial_code:"+51",code:"PE"},{name:"Philippines",dial_code:"+63",code:"PH"},{name:"Poland",dial_code:"+48",code:"PL"},{name:"Portugal",dial_code:"+351",code:"PT"},{name:"Puerto Rico",dial_code:"+1 939",code:"PR"},{name:"Qatar",dial_code:"+974",code:"QA"},{name:"Romania",dial_code:"+40",code:"RO"},{name:"Rwanda",dial_code:"+250",code:"RW"},{name:"Samoa",dial_code:"+685",code:"WS"},{name:"San Marino",dial_code:"+378",code:"SM"},{name:"Saudi Arabia",dial_code:"+966",code:"SA"},{name:"Senegal",dial_code:"+221",code:"SN"},{name:"Serbia",dial_code:"+381",code:"RS"},{name:"Seychelles",dial_code:"+248",code:"SC"},{name:"Sierra Leone",dial_code:"+232",code:"SL"},{name:"Singapore",dial_code:"+65",code:"SG"},{name:"Slovakia",dial_code:"+421",code:"SK"},{name:"Slovenia",dial_code:"+386",code:"SI"},{name:"Solomon Islands",dial_code:"+677",code:"SB"},{name:"South Africa",dial_code:"+27",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",dial_code:"+500",code:"GS"},{name:"Spain",dial_code:"+34",code:"ES"},{name:"Sri Lanka",dial_code:"+94",code:"LK"},{name:"Sudan",dial_code:"+249",code:"SD"},{name:"Suriname",dial_code:"+597",code:"SR"},{name:"Swaziland",dial_code:"+268",code:"SZ"},{name:"Sweden",dial_code:"+46",code:"SE"},{name:"Switzerland",dial_code:"+41",code:"CH"},{name:"Tajikistan",dial_code:"+992",code:"TJ"},{name:"Thailand",dial_code:"+66",code:"TH"},{name:"Togo",dial_code:"+228",code:"TG"},{name:"Tokelau",dial_code:"+690",code:"TK"},{name:"Tonga",dial_code:"+676",code:"TO"},{name:"Trinidad and Tobago",dial_code:"+1 868",code:"TT"},{name:"Tunisia",dial_code:"+216",code:"TN"},{name:"Turkey",dial_code:"+90",code:"TR"},{name:"Turkmenistan",dial_code:"+993",code:"TM"},{name:"Turks and Caicos Islands",dial_code:"+1 649",code:"TC"},{name:"Tuvalu",dial_code:"+688",code:"TV"},{name:"Uganda",dial_code:"+256",code:"UG"},{name:"Ukraine",dial_code:"+380",code:"UA"},{name:"United Arab Emirates",dial_code:"+971",code:"AE"},{name:"United Kingdom",dial_code:"+44",code:"GB"},{name:"Uruguay",dial_code:"+598",code:"UY"},{name:"Uzbekistan",dial_code:"+998",code:"UZ"},{name:"Vanuatu",dial_code:"+678",code:"VU"},{name:"Wallis and Futuna",dial_code:"+681",code:"WF"},{name:"Yemen",dial_code:"+967",code:"YE"},{name:"Zambia",dial_code:"+260",code:"ZM"},{name:"Zimbabwe",dial_code:"+263",code:"ZW"},{name:"land Islands",dial_code:"",code:"AX"},{name:"Antarctica",dial_code:null,code:"AQ"},{name:"Bolivia, Plurinational State of",dial_code:"+591",code:"BO"},{name:"Brunei Darussalam",dial_code:"+673",code:"BN"},{name:"Cocos (Keeling) Islands",dial_code:"+61",code:"CC"},{name:"Congo, The Democratic Republic of the",dial_code:"+243",code:"CD"},{name:"Cote d'Ivoire",dial_code:"+225",code:"CI"},{name:"Falkland Islands (Malvinas)",dial_code:"+500",code:"FK"},{name:"Guernsey",dial_code:"+44",code:"GG"},{name:"Holy See (Vatican City State)",dial_code:"+379",code:"VA"},{name:"Hong Kong",dial_code:"+852",code:"HK"},{name:"Iran, Islamic Republic of",dial_code:"+98",code:"IR"},{name:"Isle of Man",dial_code:"+44",code:"IM"},{name:"Jersey",dial_code:"+44",code:"JE"},{name:"Korea, Democratic People's Republic of",dial_code:"+850",code:"KP"},{name:"Korea, Republic of",dial_code:"+82",code:"KR"},{name:"Lao People's Democratic Republic",dial_code:"+856",code:"LA"},{name:"Libyan Arab Jamahiriya",dial_code:"+218",code:"LY"},{name:"Macao",dial_code:"+853",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",dial_code:"+389",code:"MK"},{name:"Micronesia, Federated States of",dial_code:"+691",code:"FM"},{name:"Moldova, Republic of",dial_code:"+373",code:"MD"},{name:"Mozambique",dial_code:"+258",code:"MZ"},{name:"Palestinian Territory, Occupied",dial_code:"+970",code:"PS"},{name:"Pitcairn",dial_code:"+872",code:"PN"},{name:"R\xe9union",dial_code:"+262",code:"RE"},{name:"Russia",dial_code:"+7",code:"RU"},{name:"Saint Barth\xe9lemy",dial_code:"+590",code:"BL"},{name:"Saint Helena, Ascension and Tristan Da Cunha",dial_code:"+290",code:"SH"},{name:"Saint Kitts and Nevis",dial_code:"+1 869",code:"KN"},{name:"Saint Lucia",dial_code:"+1 758",code:"LC"},{name:"Saint Martin",dial_code:"+590",code:"MF"},{name:"Saint Pierre and Miquelon",dial_code:"+508",code:"PM"},{name:"Saint Vincent and the Grenadines",dial_code:"+1 784",code:"VC"},{name:"Sao Tome and Principe",dial_code:"+239",code:"ST"},{name:"Somalia",dial_code:"+252",code:"SO"},{name:"Svalbard and Jan Mayen",dial_code:"+47",code:"SJ"},{name:"Syrian Arab Republic",dial_code:"+963",code:"SY"},{name:"Taiwan, Province of China",dial_code:"+886",code:"TW"},{name:"Tanzania, United Republic of",dial_code:"+255",code:"TZ"},{name:"Timor-Leste",dial_code:"+670",code:"TL"},{name:"Venezuela, Bolivarian Republic of",dial_code:"+58",code:"VE"},{name:"Viet Nam",dial_code:"+84",code:"VN"},{name:"Virgin Islands, British",dial_code:"+1 284",code:"VG"},{name:"Virgin Islands, U.S.",dial_code:"+1 340",code:"VI"}],at=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={influencer:{name:"",email:"",phone:"",countryCode:"+1",product:"",profileLink:"",commission:"",sales:""},errors:{},isDirty:{name:!1,email:!1,phone:!1},loading:!1},e._closeModal=function(){var t=e.state,a=t.influencer,n=t.errors,r=t.isDirty;a={name:"",email:"",phone:"",countryCode:"+1"},r={name:!1,email:!1,phone:!1},n={},e.setState({influencer:a,errors:n,isDirty:r},(function(){console.log(a,n),e.props.toggle()}))},e._handleOnChange=function(t){var a=t.currentTarget,n=e.state,r=n.influencer,l=n.isDirty;r[a.name]=a.value,l[a.name]=!0,e.setState({influencer:r}),e._validateForm()},e._handleOnSubmit=function(t){t.preventDefault();var a=e.state.isDirty;a.name=!0,a.email=!0,a.phone=!0,e.setState({isDirty:a}),console.log(e.state.isDirty);var n=e._validateForm();console.log(n),n||console.log("Make API call"),console.log(e.state.influencer)},e._updateCountryCode=function(t){var a=e.state.influencer;a.countryCode=t,e.setState({influencer:a})},e._makeModalHeader=function(){switch(e.props.type){case"add":return"Add Influencer";case"edit":return"Edit Influencer";case"view":return"Influencer Details"}},e._resetForm=function(){e.setState({influencer:{name:"",email:"",phone:"",countryCode:"+1",product:"",profileLink:"",commission:"",sales:""}})},e}return Object(i.a)(a,[{key:"_saveUser",value:function(){var e=this;console.log("save user",this.state.influencer),this.setState({loading:!0});var t={name:{first:this.state.influencer.name.split(" ")[0],last:this.state.influencer.name.split(" ")[1]},email:this.state.influencer.email,phone:"("+this.state.influencer.countryCode+")"+this.state.influencer.phone};ne(t).then((function(t){console.log(t),e.setState({loading:!1}),O.ToastsStore.success("Admin user added Successfully.",3e3),e.props.reloadAdminList(),e._closeModal()}),(function(t){console.log(t),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error"),e.setState({loading:!1})}))}},{key:"_validateForm",value:function(){var e=this.state,t=e.influencer,a=e.errors,n=e.isDirty;return Object.keys(t).forEach((function(e){"email"===e&&n.email?t.email.trim().length?t.email.trim().length&&!new RegExp("^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,3}$").test(t.email)?a.email="Please enter valid Email":(delete a[e],n.email=!1):a.email="Email is Required":"name"===e&&n.name?t.name.trim().length?(delete a[e],n.name=!1):a[e]="Name is Required":"phone"===e&&n.phone&&(t.phone.trim().length?ze.a.regexConfig.phone.test(String(t.phone).toLowerCase())?(delete a[e],n.phone=!1):a[e]="Enter valid phone number":a[e]="Phone is Required")})),console.log(a),this.setState({errors:a}),Object.keys(a).length?a:null}},{key:"componentDidUpdate",value:function(e,t){if(this.props.data&&e.isOpen!==this.props.isOpen)if(console.log("object :",this.props.data),"add"!==this.props.type&&this.props.data){var a=this.state.influencer;a.name=this.props.data.name,a.email=this.props.data.email,a.phone=this.props.data.phone,a.product=this.props.data.product,a.profileLink=this.props.data.profileLink,a.commission=this.props.data.commission,a.sales=this.props.data.sales,this.setState({influencer:a})}else"add"===this.props.type&&(console.log("here in add mode :"),this._resetForm());else this.props.data||e.isOpen===this.props.isOpen||this._resetForm()}},{key:"render",value:function(){var e=this,t=this.state,a=t.influencer,n=t.loading;return r.a.createElement(Ze.a,{isOpen:this.props.isOpen,toggle:function(){return e._closeModal()},className:"modal-dialog-centered"},r.a.createElement(b.a,{onSubmit:this._handleOnSubmit,noValidate:!0},r.a.createElement(Ge.a,{toggle:function(){return e._closeModal()}},this._makeModalHeader()),r.a.createElement($e.a,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"6"},r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"name"},"Name"),r.a.createElement(C.a,{type:"text",id:"name",placeholder:"Enter",name:"name",value:a.name,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.name?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.name)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"email"},"Email"),r.a.createElement(C.a,{type:"text",id:"email",placeholder:"Enter",name:"email",value:a.email,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.email?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.email))),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement("input",{type:"file",accept:".jpg",className:"mt-4"})),r.a.createElement(g.a,{xs:"12"},r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"phone"},"Phone"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(C.a,{type:"select",name:"selectCountryCode",id:"selectCountryCode",onChange:function(t){return e._updateCountryCode(t.target.value)},value:a.countryCode.value,style:{maxWidth:"105px",padding:"4px"}},tt.map((function(e,t){return r.a.createElement("option",{key:t,value:e.dial_code},e.code," (",e.dial_code,")")}))),r.a.createElement(C.a,{type:"text",id:"phone",placeholder:"Enter",name:"phone",value:a.phone,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.phone?"validation-error":"",style:{maxWidth:"100%"}})),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.phone)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"profileLink"},"Profile Link"),r.a.createElement(C.a,{type:"text",id:"profileLink",placeholder:"Enter",name:"profileLink",value:a.profileLink,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.profileLink?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.profileLink))," "),"add"!==this.props.type?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"product"},"Product"),r.a.createElement("p",null,"20")),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"commission"},"Commission"),r.a.createElement(C.a,{type:"Number",id:"commission",placeholder:"Enter",name:"commission",value:a.commission,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.commission?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.commission)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"sales"},"Sales"),r.a.createElement("p",null,a.sales))):null)),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,type:"button",className:"btn-pill",onClick:function(){return e._closeModal()}},"Cancel"),"add"==this.props.type?r.a.createElement(N.a,{className:"BtnPurple",type:"submit",disabled:n},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Add Influencer"):"edit"==this.props.type?r.a.createElement(N.a,{className:"BtnPurple",type:"submit",disabled:n},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Update Influencer"):null)))}}]),a}(n.Component),nt=a(23),rt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={addInfluencerModal:{isOpen:!1,data:null,type:"add"},creatorList:[],creatorListBackup:[],headerKeys:[{id:"id",label:"id"},{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"phone",label:"Phone"},{id:"products",label:"Products"},{id:"sales",label:"Sales"},{id:"status",label:"Status"},{id:"action",label:"Action",noSort:!0}],productCount:ze.a.productCount,filters:{products:"",status:"",search:""},loading:{loadingData:!1,changeStatusLoading:!1}},e._onToggleInfluencerModal=function(t,a){var n=JSON.parse(JSON.stringify(e.state)).addInfluencerModal;n.isOpen=!n.isOpen,n.type=t,n.data=a,e.setState({addInfluencerModal:n},(function(){console.log(e.state)}))},e._onToggleSubscriberModal=function(t){var a=JSON.parse(JSON.stringify(e.state)).subscriberModal;a.isOpen=!a.isOpen,a.data=t,e.setState({subscriberModal:a},(function(){console.log(e.state)}))},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading;"data"===t?r=a:"change-status"===t&&(l=a),e.setState({loading:{loadingData:r,changeStatusLoading:l}})},e._onStatusUpdate=function(t){e._manageLoading("change-status",!0);var a=e.state.creatorList,n=a.find((function(e){return e.id===t.id}));if(!n)return console.log(t.id,a),e._manageLoading("change-status",!1),void O.ToastsStore.error("Somthing went wrong!",3e3);var r={};"active"===n.status.toLowerCase()?(r.isActive=!1,n.status="Inactive"):(r.isActive=!0,n.status="Active"),ie(r,t.id).then((function(t){console.log("api res: ",t),e.setState({creatorList:a,creatorListBackup:a}),e._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)})).catch((function(t){console.log("api error: ",t),e._manageLoading("change-status",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._dataFormat=function(t,a,n){return"phone"===n?"-"!==a.phone?Object(nt.a)(a.phone)?Object(nt.a)(a.phone).formatInternational():a.phone:"-":"sales"===n?a.sales>0?a.sales:0:"products"===n?a.products>0?a.products:0:"status"===n?r.a.createElement(C.a,{type:"select",style:{width:85,minWidth:85},value:t,onChange:function(){return e._onStatusUpdate(a)},disabled:e.state.loading.changeStatusLoading},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive")):"action"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{color:"link",onClick:function(){return e._onToggleInfluencerModal("edit",a)}},r.a.createElement("i",{className:"fa fa-pencil"}))):t},e._getAllCreators=function(){e._manageLoading("data",!0),$().then((function(t){console.log("api res: ",t),e._manageLoading("data",!1);var a=t.influencers.map((function(e){return{name:"".concat(e.name.first," ").concat(e.name.last),id:e.id,email:e.email,phone:e.phone||"-",sales:e.totalEarned,products:e.productCount,status:e.isActive?"Active":"Inactive"}}));e.setState({creatorList:a,creatorListBackup:a})}),(function(t){console.log(t),e._manageLoading("data",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),e._filterCreatorList()},e._filterCreatorList=function(){var t=[],a=e.state,n=a.filters,r=a.creatorListBackup,l=a.creatorList;if(Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),l=r,t.length){if(n.sales){var o=JSON.parse(n.sales);l=0===o.max&&0===o.min?l.filter((function(e){return 0===e.sales})):o.max?l.filter((function(e){return e.sales>o.min&&e.sales<=o.max})):l.filter((function(e){return e.sales>o.min})),console.log(o,l)}if(n.products){var s=JSON.parse(n.products);l=0===s.max&&0===s.min?l.filter((function(e){return 0===e.products})):s.max?l.filter((function(e){return e.products>=s.min&&e.products<=s.max})):l.filter((function(e){return e.products>s.min})),console.log(s,l)}if(n.status&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length){var i=n.search.trim().toLowerCase();l=l.filter((function(e){return e.name.toLowerCase().includes(i)||e.email.toLowerCase().includes(i)||e.phone.toLowerCase().includes(i)}))}e.setState({creatorList:l})}else e.setState({creatorList:r})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getAllCreators()}},{key:"render",value:function(){var e=this,t=this.state.filters;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("div",{className:" justify-content-start align-items-center"},r.a.createElement("h2",null,"Influencers")),r.a.createElement(N.a,{className:"BtnPurple",onClick:function(){return e._onToggleInfluencerModal("add",null)}},"New Influencer")),!this.state.loading.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement(C.a,{type:"select",name:"sales",value:t.sales,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Sales")),r.a.createElement(C.a,{type:"select",name:"products",value:t.products,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Products")),r.a.createElement(C.a,{type:"select",name:"status",value:this.state.filters.status,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Status"),r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive"))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(C.a,{type:"text",name:"search",placeholder:"Search",autoComplete:"off",className:"ml-2",value:this.state.filters.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{className:"filterBtn",onClick:function(){return e._applyFilterChanges()}},r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement(qe,{tableData:this.state.creatorList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat})),this.state.loading.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Creators..")),r.a.createElement(at,{type:this.state.addInfluencerModal.type,data:this.state.addInfluencerModal.data,isOpen:this.state.addInfluencerModal.isOpen,toggle:function(){return e._onToggleInfluencerModal()},reloadInfluencerList:this._getAllCreators})))))}}]),a}(n.Component),lt=a(760),ot=a(761),st=a(762),it=a(763),ct=a(764),mt=a(765),ut=a(766),dt=a(33),pt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.loadingText;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:""},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 ",e&&e.length?e:"Loading..")))}}]),a}(n.Component),ft=a(318),gt=a(755),ht=a(756),vt=a(757),Et=a(758),bt=a(750),_t=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e._calculateTotalTipAmount=function(){var t=xe(e.props).tipArr;return t&&t.length?t.reduce((function(e,t){return e+t.amount}),0):0},e._calculateTotalPPVAmount=function(){var t=xe(e.props).ppvArr;return t&&t.length?t.reduce((function(e,t){return e+t.amount}),0):0},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isVisible,n=(t.feed,t.tipArr),l=t.ppvArr;return r.a.createElement(Ze.a,{isOpen:a,toggle:function(){return e.props.close()},className:"modal-dialog-centered"},r.a.createElement(Ge.a,{toggle:function(){return e.props.close()}},"Post Earnings"),r.a.createElement($e.a,{className:"py-2"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Tips:"," ",r.a.createElement("span",{style:{color:"#1F1F1F"}},"$",this._calculateTotalTipAmount())),r.a.createElement(bt.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Tip"))),r.a.createElement("tbody",null,n.length?n.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement("div",{className:"fansImgWrap"},r.a.createElement("img",{className:"fansImg",src:e._from.hasOwnProperty("profilePicture")&&e._from.profilePicture&&e._from.profilePicture.length?e._from.profilePicture:"http://www.clipartpanda.com/clipart_images/user-66327738/download",alt:"Profile Thumbnail"})),e._from.name.full)),r.a.createElement("td",null,Te()(e.time).format("DD MMM, YYYY LT")),r.a.createElement("td",null,"$",e.amount))})):null)),n.length?null:r.a.createElement("div",null,r.a.createElement("p",{className:"text-danger",style:{fontSize:"16px"}},"No tip got yet")),r.a.createElement("hr",null),r.a.createElement("h4",null,"PPV:"," ",r.a.createElement("span",{style:{color:"#1F1F1F"}},"$",this._calculateTotalPPVAmount())),r.a.createElement(bt.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null))),r.a.createElement("tbody",null,l.length?l.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement("div",{className:"fansImgWrap"},r.a.createElement("img",{className:"fansImg",src:e._from.hasOwnProperty("profilePicture")&&e._from.profilePicture&&e._from.profilePicture.length?e._from.profilePicture:"http://www.clipartpanda.com/clipart_images/user-66327738/download",alt:"Profile Thumbnail"})),e._from.name.full)),r.a.createElement("td",null,Te()(e.time).format("DD MMM, YYYY LT")),r.a.createElement("td",null,null))})):null)),l.length?null:r.a.createElement("div",null,r.a.createElement("p",{className:"text-danger",style:{fontSize:"16px"}},"No ppv amount got yet"))):null),r.a.createElement(et.a,null,r.a.createElement("button",{type:"button",className:"btn-pill btn btn-outline-dark",onClick:function(){return e.props.close()}},"Close")))}}]),a}(n.Component),yt=a(751),St=a(769),Ct=a(752),Nt=a(753),Pt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isPopOver:!1,answerChoosenBy:[]},e._getPollOptionDetails=function(){var t=e.props,a=t.feed,n=t.option;if(a.hasOwnProperty("_opinions")&&a._opinions.length&&n.count>0){return a._opinions.filter((function(e){return e.option===n._id}))}return[]},e._getPercentageValue=function(e,t){return e.hasOwnProperty("_opinions")&&e._opinions.length&&t.count>0?100*t.count/e._opinions.length:0},e._togglePopOver=function(){var t=e.state.isPopOver;t=!t,e.setState({isPopOver:t})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this._getPollOptionDetails();this.setState({answerChoosenBy:e})}},{key:"render",value:function(){var e=this.props,t=e.feed,a=e.option,n=e.index,l=this.state,o=l.isPopOver,s=l.answerChoosenBy;return r.a.createElement(Qe.a,{check:!0,className:"radio mb-1",id:"Popover"+a._id+n},r.a.createElement(C.a,{className:"form-check-input",disabled:!0,type:"radio",name:"radios",value:""}),r.a.createElement(Xe.a,{check:!0,className:"form-check-label"},a.text),r.a.createElement(yt.a,{value:this._getPercentageValue(t,a)},this._getPercentageValue(t,a),"%"),r.a.createElement(St.a,{placement:"bottom",isOpen:o,target:"Popover"+a._id+n,toggle:this._togglePopOver,onClick:this._togglePopOver,trigger:"legacy"},r.a.createElement(Ct.a,null,"Answer choosen by"),r.a.createElement(Nt.a,null,s.length?s.map((function(e,t){return r.a.createElement(Xe.a,{key:t},e._from.name.full)})):r.a.createElement(Xe.a,null,"No one selected yet"))))}}]),a}(n.Component),Ot=a(754),Dt=a(768),Lt=a(113),wt=a.n(Lt),kt=a(770),Tt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={isDropDownOpen:!1,isReplySectionShown:!1,comment:"",existingComment:"",isTyped:!1,isEditFieldOpened:!1,isPrompt:!1,reply:"",userDetails:null},n._toggleDropdown=function(){var e=xe(n.state).isDropDownOpen;e=!e,n.setState({isDropDownOpen:e})},n._toggleReplySection=function(){if(n.props.isSubComment)n.props.toggleReplySection();else{var e=xe(n.state).isReplySectionShown;e=!e,n.setState({isReplySectionShown:e})}},n._updateComment=function(e){var t=xe(n.state),a=t.comment;t.isTyped;a=e,n.setState({comment:a,isTyped:!0})},n._replyComment=function(e){var t=xe(n.state),a=t.reply;t.isTyped;a=e,n.setState({reply:a,isTyped:!0})},n._toggleCommentField=function(){var e=n.state.isEditFieldOpened;e=!e,n.setState({isEditFieldOpened:e})},n._convertIntoDate=function(e){return new Date(e)},n._editExistingComment=function(e){var t=xe(n.state),a=(t.isTyped,t.existingComment);a=e,n.setState({existingComment:a,isTyped:!0})},Dt.a.locale(wt.a),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=xe(this.state),n=(t.isDropDownOpen,t.isReplySectionShown),l=(t.isEditFieldOpened,t.comment),o=(t.isPrompt,t.reply,t.userData,this.props.user);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-start align-items-start"},r.a.createElement("img",{src:this.props.comment._user&&this.props.comment._user.profilePicture&&this.props.comment._user.profilePicture.length?this.props.comment._user.profilePicture:"http://www.clipartpanda.com/clipart_images/user-66327738/download",alt:"Profile Img",className:"personImg-Comment"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"comments-Post"},r.a.createElement("p",null,l||"")),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-2"},this.props.comment&&this.props.comment.createdAt?r.a.createElement("div",{className:"commentTime ml-0"},r.a.createElement(kt.a,{date:this._convertIntoDate(this.props.comment.createdAt)})):null),this.props.comment.hasOwnProperty("_subComments")&&this.props.comment._subComments.length?this.props.comment._subComments.map((function(t,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(a,{key:n,comment:t,isSubComment:!0,parentComment:e.props.comment,toggleReplySection:function(){return e._toggleReplySection()},getComments:function(){return e.props.getComments()},fetchPosts:function(){return e.props.fetchPosts()},userData:e.props.userData,user:o}))})):null,n?r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-3"},r.a.createElement("img",{src:l._user&&l._user.profilePicture&&l._user.profilePicture.length?l._user.profilePicture:"http://www.clipartpanda.com/clipart_images/user-66327738/download",alt:"Profile Img",className:"personImg-Comment"})):null)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.isTyped?null:{comment:e.comment&&e.comment.content?e.comment.content:""}}}]),a}(n.Component),xt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={custom:[!1],comment:"",userData:{}},e._updateComment=function(t){e.setState({comment:t})},e._clearComment=function(){e.setState({comment:""})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=(this.state.comment,this.props.user);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot.a,{isOpen:this.props.isOpen,"data-parent":"#exampleAccordion",id:"exampleAccordion1",className:"commentSection"},this.props.comments&&this.props.comments.length?this.props.comments.map((function(a,n){return r.a.createElement(Tt,{key:n,comment:a,isSubComment:!1,getComments:function(){return e.props.getComments()},user:t})})):r.a.createElement("span",null,"No comments yet")))}}]),a}(n.Component),At=a(317),Mt=a.n(At),Ft=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.isActive;return r.a.createElement("div",{style:{width:"95%",height:this.props.height||100,display:e?"flex":"none",position:e?"absolute":"unset",zIndex:e?99999999999:"unset",backgroundColor:"white",justifyContent:"center",alignItems:"center"}},r.a.createElement(Mt.a,{type:"TailSpin",color:"#6f57b3",height:this.props.loaderSize||100,width:this.props.loaderSize||100}))}}]),a}(n.Component),It=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isSubmitting:!1,formFields:{reason:{value:"Explicit Content",isValid:!1,isDirty:!1},description:{value:"",isValid:!1,isDirty:!1}},isLoaderActive:!1},e._dismiss=function(){e._resetState(),e.props.onDismiss()},e._handleOutSideClick=function(){e.state.isSubmitting||(e._resetState(),e.props.onDismiss())},e._resetState=function(){e.setState({isSubmitting:!1,formFields:{reason:{value:"Explicit Content",isValid:!1,isDirty:!1},description:{value:"",isValid:!1,isDirty:!1}},isLoaderActive:!1})},e._markAsDirty=function(t){var a=e.state.formFields;a[t].value&&a[t].value.length&&(a[t].isDirty=!0,e.setState({formFields:a}),e._validateForm())},e._updateFieldValue=function(t,a){var n=e.state.formFields;n[t].value=a,e.setState({formFields:n}),n[t].isDirty&&e._validateForm()},e._validateForm=function(){return new Promise((function(t,a){var n=e.state.formFields,r=!0;Object.keys(n).forEach((function(e,t){switch(e){case"reason":break;case"description":"Other"===n.reason.value?n.description.value&&n.description.value.length?n.description.isValid=!0:(n.description.isValid=!1,r=!1):n.description.isValid=!0}})),e.setState({formFields:n,isFormValid:r},(function(){t()}))}))},e._makeAllFieldDirty=function(){var t=e.state.formFields;Object.keys(t).forEach((function(e,a){t[e].isDirty=!0}))},e._report=Object(w.a)(L.a.mark((function t(){var a,n,r,l,o=arguments;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:null,e._makeAllFieldDirty(),t.next=4,e._validateForm();case 4:if(a=e.state,a.formFields,!a.isFormValid){t.next=30;break}return t.prev=6,e.setState({isSubmitting:!0}),e._showLoader(),n=e.props.feed,console.log("TCL: _report -> feed",n),r=e.state.formFields,l={category:"post",id:n._id,subject:r.reason.value,reportedAgainst:n._influencer},r.description.value&&r.description.value.length&&(l.text=r.description.value),console.log("payload :",l),t.next=17,Ne(l);case 17:return e.props.onSuccess(),t.next=20,Me(400);case 20:e._resetState(),t.next=30;break;case 23:t.prev=23,t.t0=t.catch(6),console.log("error :",t.t0),e._hideLoader(),Ae("Flagging failed"),e._resetState(),e.props.onDismiss();case 30:case"end":return t.stop()}}),t,null,[[6,23]])}))),e._showLoader=function(){e.setState({isLoaderActive:!0})},e._hideLoader=function(){e.setState({isLoaderActive:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isVisible,a=this.state,n=a.isLoaderActive,l=a.formFields;return r.a.createElement(Ze.a,{isOpen:t,toggle:function(){return e._handleOutSideClick()},className:"modal-dialog-centered"},r.a.createElement($e.a,{className:"text-center"},r.a.createElement(Ft,{isActive:n,loaderSize:30,height:400}),r.a.createElement("h2",{className:"mt-3 mb-4"},"Mark post as inappropriate"),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 text-left"},r.a.createElement("h6",{className:"mt-2 mb-2"},"Reason"),r.a.createElement(C.a,{type:"select",name:"select",id:"select",className:"p-1",value:l.reason.value,onChange:function(t){return e._updateFieldValue("reason",t.target.value)}},r.a.createElement("option",{value:"Explicit Content"},"Explicit Content"),r.a.createElement("option",{value:"Hate Speech"},"Hate Speech"),r.a.createElement("option",{value:"Promotes Illegal Activity"},"Promotes Illegal Activity"),r.a.createElement("option",{value:"Racism"},"Racism"),r.a.createElement("option",{value:"Violence"},"Violence"),r.a.createElement("option",{value:"Other"},"Other"))),r.a.createElement("div",{className:"col-12 mt-4 mb-4 text-left"},r.a.createElement("h6",{className:"mt-2 mb-2"},"Describe"),r.a.createElement("textarea",{placeholder:"",className:"form-control",rows:"4",style:{resize:"none"},value:l.description.value,onChange:function(t){return e._updateFieldValue("description",t.target.value)},onBlur:function(){return e._markAsDirty("description")}}),l.description.isDirty&&!l.description.isValid?r.a.createElement("p",{className:"form-error",style:{paddingLeft:"unset",paddingTop:"8px"}},"Please describe"):null))),r.a.createElement(N.a,{color:"danger",className:"mr-4 mb-3",size:"lg",onClick:this._report},r.a.createElement("i",{className:"icon-check mr-1",style:{marginTop:"0.5px"}})," ","Report"),r.a.createElement(N.a,{outline:!0,color:"warning",className:"mb-3",size:"lg",onClick:function(){return e._dismiss()}},r.a.createElement("i",{className:"icon-close mr-1",style:{marginTop:"0.5px"}})," ","Cancel")))}}]),a}(n.Component),jt=a(56),Rt=a.n(jt),Bt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={comments:[],dropdownOpen:!1,activeIndex:0,duration:0,decodedUserDetails:null,custom:[!1],isCommentScetionOpen:!1,isPrompt:!1,isPostEarningsModalOpen:!1,flagModalVisible:!1},n.now=60,n._getAllComments=function(){var e=n.props.feed;return new Promise((function(t,a){ye(e._id).then((function(e){e&&e.hasOwnProperty("comments")&&n.setState({comments:e.comments},(function(){t()}))})).catch((function(e){a(e)}))}))},n._toogleCommentSection=function(){var e=n.state.isCommentScetionOpen;e||n._getAllComments(),n.setState({isCommentScetionOpen:!e})},n._pinToProfile=function(e){n.props.pinToProfile(n.props.feed._id,!e)},n._postComment=function(e){},n._renderCarousel=function(){return n.props.feed._contents.map((function(e){return e=e._content,r.a.createElement(ft.a,{onExiting:n.onExiting,onExited:n.onExited,key:e._id},"video"===e.contentType?r.a.createElement("video",{className:"d-block w-100",src:e.url,controlsList:"nodownload",controls:!0}):r.a.createElement("img",{className:"d-block w-100",src:e.url,alt:e.contentType}))}))},n._onPromptSuccess=function(){n.props.deletePost(),n.setState({isPrompt:!1})},n._onPromptDismiss=function(){n.setState({isPrompt:!1})},n._deletePost=function(){n.setState({isPrompt:!0})},n._calculatePostPrice=function(e){return e._transactions&&e._transactions.length?e._transactions.filter((function(e){return"post"===e.paymentType||"tips"===e.paymentType})).reduce((function(e,t){return e+t.amount}),0):0},n._closePostEarningsModal=function(){n.setState({isPostEarningsModalOpen:!1})},n._openPostEarningsModal=function(e){n.setState({isPostEarningsModalOpen:!0})},n._fetchTipTransactionList=function(){var e=xe(n.props).feed;return e._transactions&&e._transactions.length?e._transactions.filter((function(e){return"tips"===e.paymentType})):[]},n._fetchPPVTransactionList=function(){var e=xe(n.props).feed;return e._transactions&&e._transactions.length?e._transactions.filter((function(e){return"post"===e.paymentType})):[]},n._dismissFlagModal=function(){n.setState({flagModalVisible:!1})},n._showFlagModal=function(){n.setState({flagModalVisible:!0})},n._onFlagConfirmation=function(){O.ToastsStore.success("Successfully flagged",3e3),n._dismissFlagModal()},n._redirectToPostDetails=function(){n.props.history.push("/post/"+n.props.feed._id)},n._renderPreview=function(){var e=xe(n.state),t=e.activeIndex,a=(e.decodedUserDetails,e.isCommentScetionOpen),l=e.comments,o=(e.isPrompt,e.flagModalVisible),s=xe(n.props),i=s.user;s.feed;if(n.props.feed.category&&"general"===n.props.feed.category){if(n.props.feed._contents&&n.props.feed._contents.length>1)return r.a.createElement(r.a.Fragment,null,r.a.createElement(It,{isVisible:o,feed:n.props.feed,onSuccess:n._onFlagConfirmation,onDismiss:n._dismissFlagModal}),r.a.createElement(v.a,{className:"card-Feed"},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:i&&i.profilePicture?i.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,i?i.name.full:""),i?r.a.createElement("a",{className:"profileID"},"@",i.username||"NA"):null)),r.a.createElement("div",{className:"postTime-Feed"},Fe(n.props.feed.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,n.props.feed.text&&n.props.feed.text.length?Rt()(n.props.feed.text):""),r.a.createElement("div",{className:"mediaPhotoWrap-Feed"},r.a.createElement(ht.a,{activeIndex:t,next:n.next,previous:n.previous,ride:"carousel"},r.a.createElement(vt.a,{items:n.props.feed._contents,activeIndex:t,onClickHandler:n.goToIndex}),n._renderCarousel(),r.a.createElement(Et.a,{direction:"prev",directionText:"Previous",onClickHandler:n.previous}),r.a.createElement(Et.a,{direction:"next",directionText:"Next",onClickHandler:n.next}))),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,n.props.feed.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection()},"aria-controls":"exampleAccordion1"},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,n.props.feed.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(n.props.feed)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(n.props.feed)||0)),r.a.createElement(N.a,{color:"ghost-secondary",onClick:n._showFlagModal},r.a.createElement("i",{className:"fa fa-flag-o","aria-hidden":"true"})))," ")),r.a.createElement(xt,{feed:n.props.feed,ref:n.postCommentRef,comments:l,isOpen:a,getComments:function(){return n._getAllComments()},user:n.props.user}));if(n.props.feed._contents&&1===n.props.feed._contents.length){if("image"===n.props.feed._contents[0]._content.contentType)return r.a.createElement(r.a.Fragment,null,r.a.createElement(It,{isVisible:o,feed:n.props.feed,onSuccess:n._onFlagConfirmation,onDismiss:n._dismissFlagModal}),r.a.createElement(v.a,{className:"card-Feed"},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:i&&i.profilePicture?i.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,i?i.name.full:""),i?r.a.createElement("a",{className:"profileID"},"@",i.username||"NA"):null)),r.a.createElement("div",{className:"postTime-Feed"},Fe(n.props.feed.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,n.props.feed.text&&n.props.feed.text.length?Rt()(n.props.feed.text):""),r.a.createElement("div",{className:"mediaPhotoWrap-Feed"},r.a.createElement("img",{className:"mediaPhoto-Feed",src:n.props.feed._contents[0]._content.url,alt:"Feed Img"})),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,n.props.feed.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection()}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,n.props.feed.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(n.props.feed)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(n.props.feed)||0)),r.a.createElement(N.a,{color:"ghost-secondary",onClick:n._showFlagModal},r.a.createElement("i",{className:"fa fa-flag-o","aria-hidden":"true"})))," ")),r.a.createElement(xt,{feed:n.props.feed,ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},user:n.props.user}));if("audio"===n.props.feed._contents[0].contentType)return r.a.createElement(r.a.Fragment,null,r.a.createElement(It,{isVisible:o,feed:n.props.feed,onSuccess:n._onFlagConfirmation,onDismiss:n._dismissFlagModal}),r.a.createElement(v.a,{className:"card-Feed"},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:i&&i.profilePicture?i.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,i?i.name.full:""),i?r.a.createElement("a",{className:"profileID"},"@",i.username||"NA"):null)),r.a.createElement("div",{className:"postTime-Feed"},Fe(n.props.feed.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,n.props.feed.text&&n.props.feed.text.length?Rt()(n.props.feed.text):""),r.a.createElement("div",{className:"my-2 px-2"},r.a.createElement("audio",{style:{width:"100%"},ref:function(e){n.audio=e},controls:!0,controlsList:"nodownload",src:n.props.feed._contents[0]._content.url||""})),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,n.props.feed.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection()}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,n.props.feed.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(n.props.feed)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(n.props.feed)||0)),r.a.createElement(N.a,{color:"ghost-secondary",onClick:n._showFlagModal},r.a.createElement("i",{className:"fa fa-flag-o","aria-hidden":"true"})))," ")),r.a.createElement(xt,{feed:n.props.feed,ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},user:n.props.user}));if("video"===n.props.feed._contents[0].contentType)return r.a.createElement(r.a.Fragment,null,r.a.createElement(It,{isVisible:o,feed:n.props.feed,onSuccess:n._onFlagConfirmation,onDismiss:n._dismissFlagModal}),r.a.createElement(v.a,{className:"card-Feed"},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:i&&i.profilePicture?i.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,i?i.name.full:""),i?r.a.createElement("a",{className:"profileID"},"@",i.username||"NA"):null)),r.a.createElement("div",{className:"postTime-Feed"},Fe(n.props.feed.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,n.props.feed.text&&n.props.feed.text.length?Rt()(n.props.feed.text):""),r.a.createElement("div",{className:"embed-responsive embed-responsive-16by9 mediaVideoWrap-Feed"},r.a.createElement("video",{className:"embed-responsive-item",src:n.props.feed._contents[0]._content.url,controls:!0,controlsList:"nodownload"})),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,n.props.feed.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection()}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,n.props.feed.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(n.props.feed)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(n.props.feed)||0)),r.a.createElement(N.a,{color:"ghost-secondary",onClick:n._showFlagModal},r.a.createElement("i",{className:"fa fa-flag-o","aria-hidden":"true"})))," ")),r.a.createElement(xt,{ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},feed:n.props.feed,user:n.props.user}))}else if(n.props.feed._contents&&0===n.props.feed._contents.length)return r.a.createElement(r.a.Fragment,null,r.a.createElement(It,{isVisible:o,feed:n.props.feed,onSuccess:n._onFlagConfirmation,onDismiss:n._dismissFlagModal}),r.a.createElement(v.a,{className:"card-Feed"},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:i&&i.profilePicture?i.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,i?i.name.full:""),i?r.a.createElement("a",{className:"profileID"},"@",i.username||"NA"):null)),r.a.createElement("div",{className:"postTime-Feed"},Fe(n.props.feed.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,n.props.feed.text&&n.props.feed.text.length?Rt()(n.props.feed.text):""),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,n.props.feed.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection()}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,n.props.feed.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(n.props.feed)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(n.props.feed)||0)),r.a.createElement(N.a,{color:"ghost-secondary",onClick:n._showFlagModal},r.a.createElement("i",{className:"fa fa-flag-o","aria-hidden":"true"})))," ")),r.a.createElement(xt,{feed:n.props.feed,ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},user:n.props.user}))}else if(n.props.feed.category&&"poll"===n.props.feed.category)return r.a.createElement(r.a.Fragment,null,r.a.createElement(It,{isVisible:o,feed:n.props.feed,onSuccess:n._onFlagConfirmation,onDismiss:n._dismissFlagModal}),r.a.createElement(v.a,{className:"card-Feed"},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:i&&i.profilePicture?i.profilePicture:"http://www.clipartpanda.com/clipart_images/user-66327738/download",alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,i?i.name.full:""),i?r.a.createElement("a",{className:"profileID"},"@",i.username||"NA"):null)),r.a.createElement("div",{className:"postTime-Feed"},Fe(n.props.feed.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,n.props.feed.description&&n.props.feed.description.length?Rt()(n.props.feed.description):null,n.props.feed.description&&n.props.feed.description.length?r.a.createElement("br",null):null,n.props.feed.text&&n.props.feed.text.length?Rt()(n.props.feed.text):""),r.a.createElement("div",{className:"d-block mb-2 pollOptionWrap"},n.props.feed.options&&n.props.feed.options.length?n.props.feed.options.map((function(e,t){return r.a.createElement(Pt,{feed:n.props.feed,option:e,key:t,index:t})})):null),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,n.props.feed.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection()}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,n.props.feed.comments||0)),r.a.createElement(N.a,{color:"ghost-secondary",onClick:n._showFlagModal},r.a.createElement("i",{className:"fa fa-flag-o","aria-hidden":"true"})))," ")),r.a.createElement(xt,{feed:n.props.feed,ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},user:n.props.user}));return r.a.createElement("div",null)},n.next=n.next.bind(Object(dt.a)(n)),n.previous=n.previous.bind(Object(dt.a)(n)),n.goToIndex=n.goToIndex.bind(Object(dt.a)(n)),n.audio=r.a.createRef(),n.postCommentRef=r.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.decodedUserDetails;if(this.setState({decodedUserDetails:t}),null!==this.audio){var a=Object.assign({},this.audio);a.onloadedmetadata=function(){e.setState({duration:e.formatTime(a.duration.toFixed(0))})}}}},{key:"formatTime",value:function(e){var t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=e%60;return[t,a>9?a:t?"0"+a:a||"0",n>9?n:"0"+n].filter((function(e){return e})).join(":")}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"next",value:function(){if(!this.animating){var e=this.state.activeIndex===this.props.feed._contents.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}}},{key:"previous",value:function(){if(!this.animating){var e=0===this.state.activeIndex?this.props.feed._contents.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}}},{key:"goToIndex",value:function(e){this.animating||this.setState({activeIndex:e})}},{key:"render",value:function(){var e=xe(this.state),t=(e.isPrompt,e.isPostEarningsModalOpen);return r.a.createElement(r.a.Fragment,null,this._renderPreview()," ",r.a.createElement(_t,{isVisible:t,feed:this.props.feed,close:this._closePostEarningsModal,tipArr:this._fetchTipTransactionList(),ppvArr:this._fetchPPVTransactionList()}))}}]),a}(n.Component),Ut=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={activities:[],isLoading:!0},n._fetchActivities=function(){n.setState({isLoading:!0},(function(){var e;(e=n.props.match.params.id,new Promise((function(t,a){H(q+"influencer/activity/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))).then((function(e){n.setState({activities:e.posts,isLoading:!1})})).catch((function(e){n.setState({isLoading:!1}),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))}))},n._fetchActivities=n._fetchActivities.bind(Object(dt.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.updateRef(this._fetchActivities)}},{key:"render",value:function(){var e=this,t=xe(this.state),a=t.activities,n=t.isLoading,l=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"12",style:{display:"flex",justifyContent:"center"}},n?r.a.createElement(pt,null):null)),a&&a.length?a.map((function(t,a){return r.a.createElement(Bt,Object.assign({key:a,feed:t,user:l},e.props))})):n?null:r.a.createElement(Xe.a,null,"No activity found yet"))}}]),a}(n.Component),Vt=a(759),Yt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={copySuccess:!1},e._copyToClipboard=function(){var t=e.input;t.disabled=!1,t.select(),document.execCommand("copy"),t.disabled=!0,e.setState({copySuccess:!0},(function(){O.ToastsStore.success("Copied Successfully.",3e3)}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t={cursor:"pointer",border:this.props.border?this.props.border:"inherit",background:this.props.background?this.props.background:"inherit",color:this.props.color?this.props.color:"inherit",fontSize:this.props.fontWeight?this.props.fontSize:"inherit",fontWeight:this.props.fontWeight?this.props.fontWeight:"inherit"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{style:t,ref:function(t){return e.input=t},onClick:function(){return e._copyToClipboard()},defaultValue:this.props.copiedValue,title:"copy to clipboard"}))}}]),a}(n.Component),Wt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={invitationsStatusColor:ze.a.invitationsStatusColor},e._closeModal=function(e){console.log("in _closeModal")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount",this.props)}},{key:"render",value:function(){var e=this;return r.a.createElement(Ze.a,{isOpen:this.props.isOpen,toggle:function(){return e.props.toggle(null)},className:"modal-dialog-centered modal-lg"},r.a.createElement(Ge.a,{toggle:function(){return e.props.toggle(null)}},"Referrals"),r.a.createElement($e.a,null,this.props.creatorData&&r.a.createElement(bt.a,{responsive:!0,className:"adminTable mb-1",style:{boxShadow:"none"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"Invited Creator"),r.a.createElement("th",null,"Status"))),r.a.createElement("tbody",null,this.props.creatorData.referrals.map((function(t){return r.a.createElement("tr",{key:t._id},t.hasOwnProperty("acceptedBy")?r.a.createElement("td",null,r.a.createElement(u.Link,{to:"/creator-view/".concat(t.acceptedBy)},r.a.createElement("span",null,t.name.first," ",t.name.last))):r.a.createElement("td",null,t.name.first," ",t.name.last),r.a.createElement("td",null,t.email?r.a.createElement(Yt,{copiedValue:t.email,border:"none"}):"N/A"),r.a.createElement("td",null,t.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(t.phone).formatInternational(),border:"none"}):"N/A"),r.a.createElement("td",null,"ABC"),r.a.createElement("td",null,r.a.createElement(Vt.a,{color:e.state.invitationsStatusColor[t.status],className:"referralStatus capitalize"},t.status)))}))))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,className:"btn-pill",onClick:function(){return e.props.toggle(null)}},"Close")))}}]),a}(n.Component),zt=a(767),Ht=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e._closeModal=function(e){console.log("in _closeModal")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount",this.props)}},{key:"_formatDate",value:function(e){return Object(zt.a)(new Date(e),"MMM d, yyyy")}},{key:"render",value:function(){var e=this;return r.a.createElement(Ze.a,{isOpen:this.props.isOpen,className:"modal-dialog-centered modal-lg",toggle:function(){return e.props.toggle(null)}},r.a.createElement(Ge.a,{toggle:function(){return e.props.toggle(null)}},"Subscribers"),r.a.createElement($e.a,null,this.props.creatorData&&r.a.createElement(bt.a,{responsive:!0,className:"adminTable mb-1",style:{boxShadow:"none"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"Joined"),r.a.createElement("th",null,"Rate"))),r.a.createElement("tbody",null,this.props.creatorData.subscribers.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement(u.Link,{to:"/subscriber-view/".concat(t._fan._id)},r.a.createElement("span",null,t._fan.name.first," ",t._fan.name.last))),r.a.createElement("td",null,t._fan.email?r.a.createElement(Yt,{copiedValue:t._fan.email,border:"none"}):"N/A"),r.a.createElement("td",null,t._fan.phone?r.a.createElement(Yt,{copiedValue:t._fan.phone,border:"none"}):"N/A"),r.a.createElement("td",null,e._formatDate(t.start)),r.a.createElement("td",null,"$",t.amount))}))))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,className:"btn-pill",onClick:function(){return e.props.toggle("openSubscriberModal")}},"Close")))}}]),a}(n.Component),Kt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._onToggleReferralsModal=function(e){var t=JSON.parse(JSON.stringify(n.state)).referralsModal;t.isOpen=!t.isOpen,t.isOpen&&(e.referrals=e._invitations),t.data=e,n.setState({referralsModal:t},(function(){console.log(n.state)}))},n._onToggleSubscriberModal=function(e){var t=JSON.parse(JSON.stringify(n.state)).subscriberModal;t.isOpen=!t.isOpen,t.isOpen&&(e.subscribers=e._subscriptions),t.data=e,n.setState({subscriberModal:t},(function(){console.log(n.state)}))},n._goBack=function(){n.props.history.goBack()},n._manageLoading=function(e,t){var a=n.state.loading,r=a.loadingData,l=a.changeStatusLoading;"data"===e?r=t:"change-status"===e&&(l=t),n.setState({loading:{loadingData:r,changeStatusLoading:l}})},n._getCreatorDetails=function(e){n._manageLoading("data",!0),X(e).then((function(e){n._manageLoading("data",!1);var t=xe(n.state),a=t.creatorDetails,r=t.formFields,l=t.idCardUrl,o=t.holdingIDCardUrl,s=t.availableReferrralCount,i=t.bundles;t.subscriptions;i=e.bundles,e.influencer.profilePicture=e.influencer.profilePicture||ze.a.defaultUserPicture,e.influencer.status=e.influencer.isActive?"Active":"Inactive",e.influencer.lifeTime=e.influencer._credit.reduce((function(e,t){return e+t.amountToDestination}),0).toFixed(2),s=(a=e.influencer).hasOwnProperty("avaiableReferralCount")?a.avaiableReferralCount:0,l=a.hasOwnProperty("docs")&&a.docs.length?n._getFilteredData(a.docs,"url","category","identity proof",ze.a.noImageAvialableUrl):ze.a.noImageAvialableUrl,o=a.hasOwnProperty("docs")&&a.docs.length?n._getFilteredData(a.docs,"url","category","holding id card",ze.a.noImageAvialableUrl):ze.a.noImageAvialableUrl,r.earningPercentage.value=a&&a.hasOwnProperty("earningPercentage")?a.earningPercentage:0,r.earningPercentage.isDirty=!0,r.earningPercentage.isTyped=!0,r.referPercentage.value=a&&a.hasOwnProperty("referPercentage")?a.referPercentage:0,r.referPercentage.isDirty=!0,r.referPercentage.isTyped=!0,n.setState({creatorDetails:a,formFields:r,idCardUrl:l,holdingIDCardUrl:o,availableReferrralCount:s,bundles:i},(function(){console.log("formFields :",r),n._validateForm(),n._calculatePlatformShare()}))}),(function(e){console.log(e),n._manageLoading("data",!1)}))},n._onStatusUpdate=function(){var e=n.state.creatorDetails;e.status="Active"===e.status?"Inactive":"Active",n.setState({creatorDetails:e}),n._manageLoading("change-status",!0),Q(e.id).then((function(e){console.log(e),n._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(e){console.log(e),n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._markAsDirty=function(e){var t=xe(n.state).formFields;t[e].isDirty=!0,t[e].isTyped=!0,n.setState({formFields:t},(function(){n._validateForm()}))},n._updateFieldValue=function(e,t){var a=xe(n.state).formFields;if(("referPercentage"===e||"earningPercentage"===e)&&!isNaN(Number(t))){var r=t.split(".");if(2===r.length&&r[1].length>2)return}a[e].value=t,n.setState({formFields:a},(function(){a[e].isDirty&&n._validateForm()}))},n._validateForm=function(){return new Promise((function(e){var t=xe(n.state),a=t.formFields,r=(t.platformShare,!0);Object.keys(a).forEach((function(e,t){if(a[e].isTyped)switch(e){case"referPercentage":case"earningPercentage":String(a[e].value).length&&!isNaN(Number(a[e].value))&&Number(a[e].value)>=0&&Math.ceil(a[e].value)<=100?a[e].isValid=!0:(a[e].isValid=!1,r=!1)}})),n.setState({formFields:a,isFormValid:r},(function(){e()}))}))},n._makeAllFieldDirty=function(){return new Promise((function(e){var t=xe(n.state).formFields;Object.keys(t).forEach((function(e,a){t[e].isDirty=!0})),n.setState({formFields:t},(function(){e()}))}))},n._validateAndSubmit=function(){var e=Object(w.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n._makeAllFieldDirty();case 3:return e.next=5,n._validateForm();case 5:a=n.state,a.formFields,a.isFormValid?(console.log("valid"),n._updateShareSettings()):console.log("not valid");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._updateShareSettings=function(){var e=xe(n.state),t=e.formFields,a=e.creatorDetails;Se(a.id,{earningPercentage:Number(t.earningPercentage.value),referPercentage:Number(t.referPercentage.value)}).then((function(e){n._manageLoading("change-status",!1),O.ToastsStore.success("Updated Successfully!",3e3)})).catch((function(e){n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._calculatePlatformShare=function(){return new Promise((function(e){var t=xe(n.state),a=t.formFields;t.isInitial;n.setState({platformShare:100-(Number(a.referPercentage.value||0)+Number(a.earningPercentage.value||0)),isInitial:!1},(function(){e()}))}))},n._getFilteredData=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=e.filter((function(e){return e.hasOwnProperty(a)&&e[a]===n}));return l.length&&l[0].hasOwnProperty(t)?l[0][t]:r},n._formatSocialUrl=function(e){if(e&&e.length)return e.indexOf("http")>-1||e.indexOf("https")>-1?e:e="https://"+e},n._changeReferralCount=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("_changeReferralCount -> isIncrease",e);var t=xe(n.state),a=t.additionalReferralCount;e&&a>=0?a++:!e&&a>0&&a--,n.setState({additionalReferralCount:a})},n._addReferralCount=function(){var e=xe(n.state),t=e.creatorDetails,a=e.availableReferrralCount,r=e.additionalReferralCount;r<=0||(n._manageLoading("change-status",!0),a=Number(a)+Number(r),Se(t.id,{referralCount:a}).then((function(e){n.setState({availableReferrralCount:a,additionalReferralCount:0}),n._manageLoading("change-status",!1),O.ToastsStore.success("Updated Successfully!",3e3)})).catch((function(e){n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")})))},n._renderPriceTable=function(){var e,t=xe(n.state),a=t.bundles,l=t.selectedMonth,o=t.creatorDetails,s={subscriptionPeriod:30,price:o.subscriptionFees.amount,tier:"basic"};console.log("bundles",a),a.push(s),o.hasOwnProperty("plusSubscriptionFees")&&(e={subscriptionPeriod:30,price:o.plusSubscriptionFees.amount,tier:"plus"},a.push(e)),o.hasOwnProperty("premiumSubscriptionFees")&&(e={subscriptionPeriod:30,price:o.premiumSubscriptionFees.amount,tier:"premium"},a.push(e)),console.log(a);var i=a.filter((function(e){return e.subscriptionPeriod===Number(l)}));return r.a.createElement("table",{className:"table new-table"},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon1.png",className:"price-icon",alt:"Basic Price"})),r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon2.png",className:"price-icon",alt:"Plus Price"})),r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon3.png",className:"price-icon",alt:"Premium Price"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"$",i[0]&&"basic"===i[0].tier?i[0].price:0),r.a.createElement("td",null,"$",i[1]&&"plus"===i[1].tier?i[1].price:0),r.a.createElement("td",null,"$",i[2]&&"premium"===i[2].tier?i[2].price:0)))},n._onMonthUpdated=function(e){var t=e.currentTarget,a=xe(n.state).selectedMonth;console.log(t.value),a=t.value,n.setState({selectedMonth:a})},n.state={platformShare:0,isAdditionError:!1,isInitial:!0,isFormValid:!1,idCardUrl:null,holdingIDCardUrl:null,formFields:{referPercentage:{value:"",isValid:!1,isDirty:!1,isRequired:!0,isTyped:!1},earningPercentage:{value:"",isValid:!1,isDirty:!1,isRequired:!0,isTyped:!1}},subscriberModal:{isOpen:!1,data:null},referralsModal:{isOpen:!1,data:null},activeTab:new Array(2).fill("1"),creatorDetails:null,loading:{loadingData:!1,changeStatusLoading:!1},availableReferrralCount:0,additionalReferralCount:0,bundles:[],selectedMonth:30},n}return Object(i.a)(a,[{key:"toggle",value:function(e,t){var a=this,n=this.state.activeTab.slice();n[e]=t,this.setState({activeTab:n},(function(){2===Number(t)&&a._updateChildActivites()}))}},{key:"componentDidMount",value:function(){this._getCreatorDetails(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.state,a=t.creatorDetails,n=t.loading,l=t.formFields,o=(t.platformShare,t.isAdditionError,t.idCardUrl,t.holdingIDCardUrl,t.additionalReferralCount),s=t.availableReferrralCount,i=t.selectedMonth,c=t.bundles;return console.log("formFields :",l),r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,null,!n.loadingData&&r.a.createElement(f.a,null,a&&r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(N.a,{color:"ghost-dark",className:"customBackBtn",onClick:this._goBack},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("h2",null,a.name.full)),r.a.createElement("div",{className:"mr-2"},r.a.createElement(C.a,{type:"select",name:"status",id:"status",style:{minWidth:"150px"},value:a.status,onChange:this._onStatusUpdate,disabled:this.state.loading.changeStatusLoading},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive"))))),a&&r.a.createElement(g.a,{sm:"12"},r.a.createElement(lt.a,{tabs:!0,className:"customTabs--Truefanz"},r.a.createElement(ot.a,null,r.a.createElement(st.a,{active:"1"===this.state.activeTab[0],onClick:function(){e.toggle(0,"1")}},"Profile")),r.a.createElement(ot.a,null,r.a.createElement(st.a,{active:"2"===this.state.activeTab[0],onClick:function(){e.toggle(0,"2")}},"Activity"))),r.a.createElement(it.a,{activeTab:this.state.activeTab[0],className:"customTabContent--Truefanz"},r.a.createElement(ct.a,{tabId:"1"},r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"7",md:"5",lg:"5",xl:"3"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(Ve.a,null),r.a.createElement(E.a,{className:"align-items-center d-flex flex-column"},r.a.createElement("div",{className:"profileImgWrap"},r.a.createElement("img",{className:"profileImg",src:a.profilePicture,alt:"Profile Img"})),r.a.createElement("h4",{className:"mt-2 mb-2"},a.name.full,"\xa0",a.address.country?r.a.createElement("img",{src:"https://www.countryflags.io/".concat(a.address.country,"/flat/24.png"),alt:"flag"}):"N/A"),r.a.createElement("div",{className:"mb-3"},r.a.createElement(C.a,{type:"select",name:"status",id:"status",style:{minWidth:"200px"},value:i,onChange:function(t){return e._onMonthUpdated(t)}},r.a.createElement("option",{value:"30"},"1 Months"),c&&c.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:"90"},"3 Months"),r.a.createElement("option",{value:"180"},"6 Months"),r.a.createElement("option",{value:"270"},"9 Months"),r.a.createElement("option",{value:"360"},"12 Months")))),r.a.createElement("div",{className:"card-footer new-card-footer mb-3"},r.a.createElement("p",null,"Price"),this._renderPriceTable()),r.a.createElement("div",{className:"profileInfo_social"},a.social.map((function(t){return r.a.createElement("a",{href:e._formatSocialUrl(t.accountUrl),target:"_blank"},"tiktok"===t.name?r.a.createElement("img",{className:"tiktok-social-icon",src:"/assets/img/tiktok-icon.png"}):r.a.createElement("i",{className:ze.a.socialIconConfig[t.name]}))}))),r.a.createElement(mt.a,{className:"profileInfo mt-4 w-100"},r.a.createElement(ut.a,null,r.a.createElement("p",null,"Subscribers:",a._subscriptions.length>0&&r.a.createElement("a",{href:"# ",onClick:function(){return e._onToggleSubscriberModal(e.state.creatorDetails)}},a._subscriptions.length),!a._subscriptions.length&&r.a.createElement("span",null,"\xa0N/A"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,"Lifetime Earnings:",r.a.createElement(u.Link,{to:{pathname:"/transactions",creatorId:a._id}},r.a.createElement("span",null,"$",a.lifeTime)))))))),r.a.createElement(g.a,{sm:"12",md:"7",lg:"7",xl:"5"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement(mt.a,{className:"profileInfo"},r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-envelope"}),"Email:",r.a.createElement("span",null,r.a.createElement(Yt,{copiedValue:a.email,fontWeight:600})))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-phone"}),"Phone:",r.a.createElement("span",null,a.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),fontWeight:600}):"N/A"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-user-circle-o"}),"Username:",r.a.createElement("span",null,r.a.createElement(Yt,{copiedValue:a.username,fontWeight:600})))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-birthday-cake"}),"Birthday:",r.a.createElement("span",null,a.hasOwnProperty("dob")?a.dob.year+"-"+a.dob.month+"-"+a.dob.day:"N/A"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-user"}),"Gender:",r.a.createElement("span",{className:"capitalize"},a.gender||"N/A"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-user-follow"}),"Invited By:",r.a.createElement(u.Link,{to:"/creator-view/".concat(a._invitedby._id)},r.a.createElement("span",null,a._invitedby.name.full)))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-user-follow"}),"Referrals:",a._invitations.length>0&&r.a.createElement("a",{href:"# ",onClick:function(){return e._onToggleReferralsModal(e.state.creatorDetails)}},a._invitations.length),!a._invitations.length&&r.a.createElement("span",null,"\xa0N/A"))))))),r.a.createElement(g.a,{sm:"12",md:"5",xl:"4"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"text-center mt-2 mb-4"},"Revenue Settings"),r.a.createElement(b.a,{onSubmit:function(t){return e._validateAndSubmit(t)},noValidate:!0,className:"form-horizontal"},r.a.createElement(Qe.a,{row:!0,className:"mb-4 align-items-center"},r.a.createElement(g.a,{sm:"5",md:"6",lg:"5",className:"text-right px-md-2 px-lg-3"},r.a.createElement(Xe.a,{htmlFor:""},"Referral Share")),r.a.createElement(g.a,{sm:"5",md:"6",xl:"5"},r.a.createElement(_.a,null,r.a.createElement(C.a,{type:"number",id:"referPercentage",autoComplete:"off",name:"referPercentage",placeholder:"Enter",value:l.referPercentage.value,onChange:function(t){return e._updateFieldValue("referPercentage",t.target.value)},onBlur:function(){return e._markAsDirty("referPercentage")}}),r.a.createElement(y.a,{addonType:"append"},r.a.createElement(S.a,null,r.a.createElement("i",{className:"fa fa-percent"}))),l.referPercentage.isTyped&&l.referPercentage.isDirty&&!l.referPercentage.isValid?l.referPercentage.value.length?r.a.createElement("div",{className:"validation-error"},"value must be in decimal and in between o to 99"):r.a.createElement("div",{className:"validation-error"},"Referral share should not be blank"):null))),r.a.createElement(Qe.a,{row:!0,className:"mb-4 align-items-center"},r.a.createElement(g.a,{sm:"5",md:"6",lg:"5",className:"text-right px-md-2 px-lg-3"},r.a.createElement(Xe.a,{htmlFor:""},"Revenue Share")),r.a.createElement(g.a,{sm:"5",md:"6",xl:"5"},r.a.createElement(_.a,null,r.a.createElement(C.a,{type:"number",id:"influencerPercentage",name:"influencerPercentage",placeholder:"Enter",value:l.earningPercentage.value,onChange:function(t){return e._updateFieldValue("earningPercentage",t.target.value)},onBlur:function(){return e._markAsDirty("earningPercentage")}}),r.a.createElement(y.a,{addonType:"append"},r.a.createElement(S.a,null,r.a.createElement("i",{className:"fa fa-percent"}))),l.earningPercentage.isTyped&&l.earningPercentage.isDirty&&!l.earningPercentage.isValid?l.earningPercentage.value.length?r.a.createElement("div",{className:"validation-error"},"value must be in decimal and in between o to 99"):r.a.createElement("div",{className:"validation-error"},"Revenue share should not be blank"):null))),r.a.createElement(N.a,{type:"submit",className:"BtnPurple mx-auto d-block",style:{padding:"7px 25px",margin:"35px auto 10px"},disabled:n.updateLoading},n.updateLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Save"))))),r.a.createElement(g.a,{sm:"6",md:"7",lg:"7",xl:"5"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"text-center mt-2"},"Address"),a.address&&r.a.createElement("div",{className:"addressWrap"},r.a.createElement("p",null,a.address.street||"N/A"),r.a.createElement(Xe.a,null,"City:"),r.a.createElement("p",null,a.address.city||"N/A"),r.a.createElement(Xe.a,null,"State:"),r.a.createElement("p",null,a.address.state||"N/A"),r.a.createElement(Xe.a,null,"Zip:"),r.a.createElement("p",null,a.address.zip||"N/A"),r.a.createElement(Xe.a,null,"Country:"),r.a.createElement("p",null,a.address.country||"N/A")),!a.address&&r.a.createElement("div",null,"Address Not Provided")))),r.a.createElement(g.a,{sm:"6",md:"5",xl:"3"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"text-center mt-2"},"Invitation Settings"),r.a.createElement("div",{className:"addressWrap mt-3"},r.a.createElement(Xe.a,null,"Invites Avialable:"),r.a.createElement("p",null,s),r.a.createElement(_.a,{className:"mt-4"},r.a.createElement(y.a,{addonType:"prepend",onClick:this._changeReferralCount},r.a.createElement(S.a,{className:"inviteAddSub"},"+")),r.a.createElement(C.a,{disabled:!0,placeholder:"Add invite number",value:o}),r.a.createElement(y.a,{addonType:"append",onClick:function(){return e._changeReferralCount(!1)}},r.a.createElement(S.a,{className:"inviteAddSub"},"-"))),r.a.createElement(N.a,{type:"submit",className:"BtnPurple mx-auto d-block",style:{padding:"7px 25px",margin:"30px auto 10px"},onClick:this._addReferralCount},"Add"))))))),r.a.createElement(ct.a,{tabId:"2"},r.a.createElement(f.a,{className:"mb-4 justify-content-center"},r.a.createElement(g.a,{sm:12,md:10,lg:8},r.a.createElement(Ut,Object.assign({user:a,updateRef:function(t){return e._updateChildActivites=t}},this.props)))))))),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Creator Details..")),r.a.createElement(Ht,{isOpen:this.state.subscriberModal.isOpen,creatorData:this.state.subscriberModal.data,toggle:function(){return e._onToggleSubscriberModal()}}),r.a.createElement(Wt,{isOpen:this.state.referralsModal.isOpen,creatorData:this.state.referralsModal.data,toggle:function(){return e._onToggleReferralsModal()}})))}}]),a}(n.Component),Jt=(a(580),a(319)),qt=(a(673),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Jt.DateRangePicker,{startDate:this.props.dateRange.startDate,startDateId:this.props.dateRange.startDateId,endDate:this.props.dateRange.endDate,endDateId:this.props.dateRange.endDateId,onDatesChange:function(t){var a=t.startDate,n=t.endDate;e.props.onDatesChange(a,n)},focusedInput:this.props.dateRange.focusedInput,onFocusChange:function(t){return e.props.onFocusChange(t)},isOutsideRange:function(e){return Te()().diff(e)<=0}})}}]),a}(n.Component)),Zt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e._closeModal=function(e){console.log("in _closeModal")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount",this.props)}},{key:"_formatDate",value:function(e){return Object(zt.a)(new Date(e),"MMM d, yyyy")}},{key:"render",value:function(){var e=this;return console.log("from modal",this.props),r.a.createElement(Ze.a,{isOpen:this.props.isOpen,className:"modal-dialog-centered",toggle:function(){return e.props.toggle(null)}},r.a.createElement(Ge.a,{toggle:function(){return e.props.toggle(null)}},"Subscriptions"),r.a.createElement($e.a,null,this.props.data&&r.a.createElement(bt.a,{responsive:!0,className:"adminTable mb-1",style:{boxShadow:"none"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Creator"),r.a.createElement("th",null,"Fee"),r.a.createElement("th",null,"Start Date"),r.a.createElement("th",null,"Tier & Cycle"))),r.a.createElement("tbody",null,this.props.data.subscriptions.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement(u.Link,{to:"/creator-view/".concat(t._influencer.id)},t._influencer.name.full)),r.a.createElement("td",null,"$",t.amount),r.a.createElement("td",null,e._formatDate(t.start)),r.a.createElement("td",null,je(t.tier)," | ",t.billingCycle/30," Month"))}))))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,className:"btn-pill",onClick:function(){return e.props.toggle("openSubscriberModal")}},"Close")))}}]),a}(n.Component),Gt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={adminUser:{name:"",email:"",phone:"",countryCode:"+1",type:"",status:""},errors:{},isDirty:{name:!1,email:!1,phone:!1},loading:!1},e._closeModal=function(){var t=e.state,a=t.adminUser,n=t.errors,r=t.isDirty;a={name:"",email:"",phone:"",countryCode:"+1"},r={name:!1,email:!1,phone:!1},n={},e.setState({adminUser:a,errors:n,isDirty:r},(function(){console.log(a,n),e.props.toggle()}))},e._handleOnChange=function(t){var a=t.currentTarget,n=e.state,r=n.adminUser,l=n.isDirty;r[a.name]=a.value,l[a.name]=!0,e.setState({adminUser:r}),e._validateForm()},e._handleOnSubmit=function(t){t.preventDefault();var a=e.state.isDirty;a.name=!0,a.email=!0,a.phone=!0,e.setState({isDirty:a}),console.log(e.state.isDirty);var n=e._validateForm();console.log(n),n||(console.log("Make API call"),e._saveUser())},e._updateCountryCode=function(t){var a=e.state.adminUser;a.countryCode=t,e.setState({adminUser:a})},e}return Object(i.a)(a,[{key:"_saveUser",value:function(){var e=this;console.log("save user",this.state.adminUser),this.setState({loading:!0});var t={name:{first:this.state.adminUser.name.split(" ")[0],last:this.state.adminUser.name.split(" ")[1]},email:this.state.adminUser.email,phone:"("+this.state.adminUser.countryCode+")"+this.state.adminUser.phone};ne(t).then((function(t){console.log(t),e.setState({loading:!1}),O.ToastsStore.success("Admin user added Successfully.",3e3),e.props.reloadAdminList(),e._closeModal()}),(function(t){console.log(t),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error"),e.setState({loading:!1})}))}},{key:"_validateForm",value:function(){var e=this.state,t=e.adminUser,a=e.errors,n=e.isDirty;return Object.keys(t).forEach((function(e){"email"===e&&n.email?t.email.trim().length?t.email.trim().length&&!new RegExp("^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,3}$").test(t.email)?a.email="Please enter valid Email":(delete a[e],n.email=!1):a.email="Email is Required":"name"===e&&n.name?t.name.trim().length?(delete a[e],n.name=!1):a[e]="Name is Required":"phone"===e&&n.phone&&(t.phone.trim().length?ze.a.regexConfig.phone.test(String(t.phone).toLowerCase())?(delete a[e],n.phone=!1):a[e]="Enter valid phone number":a[e]="Phone is Required")})),console.log(a),this.setState({errors:a}),Object.keys(a).length?a:null}},{key:"render",value:function(){var e=this,t=this.state;t.adminUser,t.loading;return r.a.createElement(Ze.a,{isOpen:this.props.isOpen,toggle:function(){return e._closeModal()},className:"modal-dialog-centered"},r.a.createElement(b.a,{onSubmit:this._handleOnSubmit,noValidate:!0},r.a.createElement(Ge.a,{toggle:function(){return e._closeModal()}},"Order Details"),r.a.createElement($e.a,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"12"},r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"12",md:"7",lg:"7",xl:"5"},r.a.createElement("h4",{className:" mt-2 mb-4"},"Order# ","1234 "),r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"mb-2 ml-5"},"Buyer"),r.a.createElement(mt.a,{className:"profileInfo"},r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-envelope"}),"Name:",r.a.createElement("span",null,r.a.createElement(Yt,{fontWeight:600})))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-envelope"}),"Email:",r.a.createElement("span",null,r.a.createElement(Yt,{fontWeight:600})))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-phone"}),"Phone:",r.a.createElement("span",null))))))),r.a.createElement(g.a,{sm:"12",md:"5",xl:"4"},r.a.createElement(v.a,{className:"ProfileCard mt-5"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:" mt-2 mb-4"},"Affiliate :-","XYZ ")))),r.a.createElement(g.a,{sm:"6",md:"7",lg:"7",xl:"5"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"text-center mt-2"},"Address")))),r.a.createElement(g.a,{sm:"6",md:"5",xl:"3"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"text-center mt-2"},"Product"),r.a.createElement("div",{className:"addressWrap mt-3"},r.a.createElement("p",null,"Qty:-","4"),r.a.createElement("p",null,"Amount:-","4"),r.a.createElement(C.a,{type:"select",id:"status",placeholder:"Enter",name:"status"},r.a.createElement("option",null,"Status"),r.a.createElement("option",{value:"active"},"Active"),r.a.createElement("option",{value:"inactive"},"Inactive")),r.a.createElement(N.a,{type:"submit",className:"BtnPurple mx-auto d-block",style:{padding:"7px 25px",margin:"30px auto 10px"},onClick:this._addReferralCount},"Add")))))),r.a.createElement(f.a,{className:"mb-4 justify-content-center"},r.a.createElement(g.a,{sm:12,md:10,lg:8}))),r.a.createElement(g.a,{xs:"4"},r.a.createElement("p",null,"Status")),r.a.createElement(g.a,{xs:"4"},r.a.createElement("p",null,"Date")),r.a.createElement(g.a,{xs:"4"},r.a.createElement("p",null,"Remark")))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,type:"button",className:"btn-pill",onClick:function(){return e._closeModal()}},"Cancel"))))}}]),a}(n.Component),$t=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e._closeModal=function(e){console.log("in _closeModal")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount",this.props)}},{key:"_formatDate",value:function(e){return Object(zt.a)(new Date(e),"MMM d, yyyy")}},{key:"render",value:function(){var e=this;return r.a.createElement(Ze.a,{isOpen:this.props.isOpen,className:"modal-dialog-centered",toggle:function(){return e.props.toggle(null)}},r.a.createElement(Ge.a,{toggle:function(){return e.props.toggle(null)}},"Tips"),r.a.createElement($e.a,null,this.props.data&&r.a.createElement(bt.a,{responsive:!0,className:"adminTable mb-1",style:{boxShadow:"none"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Creator"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Post / Message"))),r.a.createElement("tbody",null,this.props.data.tips.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement(u.Link,{to:"/creator-view/".concat(t._to.id)},t._to.name.full)),r.a.createElement("td",null,e._formatDate(t.time)),r.a.createElement("td",null,"$",t.amount),r.a.createElement("td",null,t._message&&t._message.content[0]&&r.a.createElement(r.a.Fragment,null,"Message")," ",r.a.createElement("br",null),t._message&&t._message.content[0]&&r.a.createElement("a",{href:t._message.content[0].thumbnail,rel:"noopener noreferrer",target:"_blank"},"Link"),!t._message&&"-"))}))))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,className:"btn-pill",onClick:function(){return e.props.toggle("openSubscriberModal")}},"Close")))}}]),a}(n.Component),Qt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e._closeModal=function(e){console.log("in _closeModal")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount",this.props)}},{key:"_formatDate",value:function(e){return Object(zt.a)(new Date(e),"MMM d, yyyy")}},{key:"_openMedia",value:function(e){console.log(e),window.open(e.thumbnail,"_blank")}},{key:"render",value:function(){var e=this;return r.a.createElement(Ze.a,{isOpen:this.props.isOpen,className:"modal-dialog-centered",toggle:function(){return e.props.toggle(null)}},r.a.createElement(Ge.a,{toggle:function(){return e.props.toggle(null)}},"PPV"),r.a.createElement($e.a,null,this.props.data&&r.a.createElement(bt.a,{responsive:!0,className:"adminTable mb-1",style:{boxShadow:"none"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Creator"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Message"),r.a.createElement("th",null,"Attached Media"),r.a.createElement("th",null,"Amount"))),r.a.createElement("tbody",null,this.props.data.ppv.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement(u.Link,{to:"/creator-view/".concat(t._to.id)},t._to.name.full)),r.a.createElement("td",null,e._formatDate(t.time)),r.a.createElement("td",null,t.message||"-"),r.a.createElement("td",null,t._message&&t._message.content[0]&&r.a.createElement(N.a,{color:"primary",outline:!0,onClick:function(){return e._openMedia(t._message.content[0])}},r.a.createElement("i",{className:"icon-control-play"})),!t._message&&"-"),r.a.createElement("td",null,"$",t.amount))}))))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,className:"btn-pill",onClick:function(){return e.props.toggle("openSubscriberModal")}},"Close")))}}]),a}(n.Component),Xt=a(320),ea=a.n(Xt),ta=(a(686),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).modules={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}]]},n.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent"],n.handleChange=n.handleChange.bind(Object(dt.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ea.a,{value:this.props.content||"",name:"renterRefundPolicy",onChange:this.handleChange,className:"editor",modules:this.modules,formats:this.formats,placeholder:"Enter your message here.."}))}}]),a}(n.Component)),aa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={tableData:[],showTableLoading:!1,options:{page:1,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"50",value:50}],sizePerPage:10,pageStartIndex:1,paginationSize:3,prePage:"Prev",nextPage:"Next",firstPage:"First",lastPage:"Last",paginationShowsTotal:e.renderShowsTotal,hideSizePerPage:!1,withFirstAndLast:!0,onPageChange:function(t,a){return e.onPageChange(t,a)},onSortChange:function(t,a){return e.onSortChange(t,a)}},selectedRows:[],selectRowProp:{mode:"checkbox",clickToSelect:!1,bgColor:"rgb(238, 193, 213)",onSelect:function(t,a){return e.onRowSelect(t,a)},onSelectAll:function(t,a){return e.onSelectAll(t,a)}}},e}return Object(i.a)(a,[{key:"onRowSelect",value:function(e,t){var a=this.state.selectedRows;t?(a.find((function(t){return t===e.id}))?a.splice(a.indexOf(e.id),1):a.push(e.id),console.log("The selection",e,t,a)):a.splice(a.indexOf(e.id),1);this.setState({selectedRows:a}),this.props.setSelectedRows&&this.props.setSelectedRows(a)}},{key:"onSelectAll",value:function(e,t){var a=this.state.selectedRows;a=e?t.map((function(e){return e.id})):[],this.setState({selectedRows:a}),this.props.setSelectedRows&&this.props.setSelectedRows(a)}},{key:"renderShowsTotal",value:function(e,t,a){return r.a.createElement("p",{style:{color:"#FF7300",float:"left",marginRight:20}},"From ",e," to ",t,", Out of ",a)}},{key:"onSortChange",value:function(e,t){console.log("sizePerPage :",e,t);var a=this.state.options;a.sortName=e,a.sortOrder=t,this.setState({options:a}),this.props.onSortChange(e,t)}},{key:"onPageChange",value:function(e,t){console.log("page, sizePerPage :",e,t),this.props.onPaginate(e,t)}},{key:"componentDidMount",value:function(){console.log("componentDidMount.tableData :",this.state.tableData)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(Je.BootstrapTable,{data:this.props.tableData,remote:!0,fetchInfo:{dataTotalSize:this.props.totalCount},pagination:!0,options:this.state.options,selectRow:this.props.rowSelection?this.state.selectRowProp:{},bodyContainerClass:"adminTable",version:"4",responsive:!0,hover:!0,ref:"table"},this.props.headerKeys.map((function(t){return r.a.createElement(Je.TableHeaderColumn,{dataField:t.id,key:t.id,isKey:"id"===t.id,dataAlign:"left",dataSort:!t.noSort,hidden:"id"===t.id,dataFormat:function(a,n){return e.props.dataFormat(a,n,t.id)}},t.label)}))),this.props.showTableLoading&&r.a.createElement("div",{className:"table-overlay"},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-spinner fa-spin "}))))}}]),a}(n.Component),na=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={modals:[!1,!1,!1],orderDetailModal:{isOpen:!1,data:null},tipsModal:{isOpen:!1,data:null},ppvModal:{isOpen:!1,data:null},subscriberList:[{orderid:1234,product:"Mobile",quantity:2,amount:"$20",buyer:"rohan",seller:"amazon",affiliate:"shyam",status:"pending"}],subscriberListBackup:[],headerKeys:[{id:"id",label:"id"},{id:"orderid",label:"Order Id"},{id:"product",label:"Product"},{id:"quantity",label:"Quantity"},{id:"amount",label:"Amount"},{id:"buyer",label:"Buyer"},{id:"seller",label:"Seller"},{id:"affiliate",label:"Affiliate"},{id:"status",label:"Status"}],subscriptionCounts:ze.a.subscriptionCounts,spentCounts:ze.a.productCount,loading:{loadingData:!1,changeStatusLoading:!1,sendingMessage:!1},contact:{via:"email",message:""},selectedSubscribers:[],totalCount:0,subscriberFieldsKeyMap:{name:"name",email:"email",phone:"phone",subscriptions:"spent",joinedAt:"createdAt",tipAmount:"tips",spent:"spent",status:"isActive"},tableConfig:{pageNumber:1,pageSize:10,sort:{sortBy:"createdAt",sortOrder:"desc"},filters:{}},filters:{dateRange:{startDate:null,endDate:null,focusedInput:null,startDateId:"startDate",endDateId:"endDate"},creator:"",status:"",search:""}},e._formatDate=function(e){return Object(zt.a)(new Date(e),"MMM d, yyyy")},e._onToggleSubscriptionModal=function(t){var a=JSON.parse(JSON.stringify(e.state)).orderDetailModal;a.isOpen=!a.isOpen,a.data=t,e.setState({orderDetailModal:a},(function(){console.log(e.state)}))},e._onToggleTipsModal=function(t){var a=JSON.parse(JSON.stringify(e.state)).tipsModal;a.isOpen=!a.isOpen,a.data=t,e.setState({tipsModal:a},(function(){console.log(e.state)}))},e._onTogglePPVModal=function(t){var a=JSON.parse(JSON.stringify(e.state)).ppvModal;a.isOpen=!a.isOpen,a.data=t,e.setState({ppvModal:a},(function(){console.log(e.state)}))},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading,o=n.sendingMessage;"data"===t?r=a:"change-status"===t?l=a:"send-message"===t&&(o=a),e.setState({loading:{loadingData:r,changeStatusLoading:l,sendingMessage:o}})},e._getAllSubscribers=function(t){var a=xe(e.state),n=a.subscriberList,r=a.tableConfig;n.length||e._manageLoading("data",!0),ee(t).then((function(t){console.log(t),e._manageLoading("data",!1),r.loading=!1,e.setState({tableConfig:r});var a=t.fans.map((function(e){return{name:e.name.last?e.name.full:e.name.first,id:e.id,flag:e.country?e.country:null,email:e.email,phone:e.phone||"-",profilePicture:e.profilePicture||ze.a.defaultUserPicture,joinedAt:e.createdAt,subscriptions:e.subscriptions,spent:e.spent,status:e.isActive?"Active":"Inactive"}}));e.setState({subscriberListBackup:a,totalCount:t.count})}),(function(t){console.log(t),e._manageLoading("data",!1),r.loading=!1,e.setState({tableConfig:r}),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._onStatusUpdate=function(t){var a=e.state.subscriberList,n=a.find((function(e){return e.id===t.id}));n.status="Active"===n.status?"Inactive":"Active",e.setState({subscriberList:a,subscriberListBackup:a}),console.log(a),e._manageLoading("change-status",!0),Q(t.id).then((function(t){console.log(t),e._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(t){console.log(t),e._manageLoading("change-status",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._dataFormat=function(t,a,n){return"name"===n?(console.log(a),r.a.createElement(u.Link,{to:"/subscriber-view/".concat(a.id)},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement("img",{src:"https://www.countryflags.io/".concat(a.flag,"/flat/24.png"),alt:"flag",className:"mr-2"}),a.name))):"orderid"===n?r.a.createElement("div",{onClick:function(){return e._onToggleSubscriptionModal()},style:{cursor:"pointer"}},a.orderid):"phone"===n?"-"!==a.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),border:"none"}):"-":"joinedAt"===n?t?e._formatDate(t):"-":"subscriptions"===n?t&&t.length?r.a.createElement("span",{onClick:function(){return e._onToggleSubscriptionModal(a)}},t.length):0:"status"===n?r.a.createElement(C.a,{type:"select",value:t,onChange:function(){return e._onStatusUpdate(a)}},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive")):"action"===n?r.a.createElement(u.Link,{to:"/subscriber-view/".concat(a.id)},r.a.createElement(N.a,{color:"ghost-primary"},"View")):t},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),"search"!==a.name&&e._applyFilterChanges()},e._filterSubscriberList=function(){var t=[],a=e.state,n=a.filters,r=a.subscriberListBackup,l=a.subscriberList;if(Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),console.log(t),l=r,t.length){if(n.subscriptions){console.log(n.subscriptions);var o=e.state.subscriptionCounts[n.subscriptions].value;console.log(o),l=l.filter((function(e){return o.min&&!o.max?e.subscriptions.length>o.min:e.subscriptions.length>=o.min&&e.subscriptions.length<=o.max}))}n.status&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length&&(l=l.filter((function(e){return e.name.toLowerCase().includes(n.search.toLowerCase())||e.email.toLowerCase().includes(n.search.toLowerCase())||e.phone.toLowerCase().includes(n.search.toLowerCase())}))),e.setState({subscriberList:l})}else e.setState({subscriberList:r})},e._setSelectedRows=function(t){console.log(t);var a=e.state.selectedSubscribers;a=t,e.setState({selectedSubscribers:a})},e._contactOnChange=function(t){var a=t.currentTarget,n=e.state.contact;n[a.name]=a.value,e.setState({contact:n})},e._setMessageContent=function(t,a){var n=e.state.contact;n[a]=t,e.setState({contact:n})},e._extractContent=function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText},e._sendMessage=function(){var t=e.state,a=t.contact,n={idlist:t.selectedSubscribers,text:"email"===a.via?a.message:e._extractContent(a.message)};n.idlist.length?n.text.trim().length?(console.log(n),e._manageLoading("send-message",!0),fe(a.via,n).then((function(t){console.log(t),e._setMessageContent("","message"),e._manageLoading("send-message",!1),O.ToastsStore.success("Message sent Successfully!",3e3)}),(function(t){console.log(t),e._manageLoading("send-message",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))):O.ToastsStore.warning("Please write some message",3e3):O.ToastsStore.warning("Please select atleast one creator",3e3)},e._paginate=function(t,a){console.log("pageNumber, pageSize :",t,a);var n=e.state.tableConfig;n.pageNumber=t,n.pageSize=a,n.loading=!0,setTimeout((function(){e.setState({tableConfig:n},(function(){e._getAllSubscribers(e.state.tableConfig)}))}),100)},e._onSortChange=function(t,a){var n=xe(e.state).tableConfig;n.sort.sortBy=e.state.subscriberFieldsKeyMap[t],n.sort.sortOrder=a,n.loading=!0,e.setState({tableConfig:n},(function(){e._getAllSubscribers(n)})),console.log("sortName, sortOrder :",t,a)},e._applyFilterChanges=function(){var t=xe(e.state),a=t.filters,n=t.tableConfig;console.log("filters :",a);var r={};a.subscriptions.length&&(r._subscriptions={lowerLimit:e.state.subscriptionCounts[a.subscriptions].value.min,upperLimit:e.state.subscriptionCounts[a.subscriptions].value.max}),a.spent.length&&(r.spent={lowerLimit:e.state.spentCounts[a.spent].value.min,upperLimit:e.state.spentCounts[a.spent].value.max}),a.status.length&&(r.isActive="active"===a.status),console.log("data :",r),n.filters=r,a.search.length?n.search=a.search:n.search="",n.loading=!0,e.setState({tableConfig:n},(function(){e._getAllSubscribers(n)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getAllSubscribers(this.state.tableConfig)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.loading,l=t.subscriptionCounts,o=t.spentCounts,s=(t.contact,t.totalCount),i=t.tableConfig;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle justify-content-start align-items-center"},r.a.createElement("h2",null,"Orders")),!n.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement("div",{className:"ml-2"},r.a.createElement(qt,{dateRange:a.dateRange,onDatesChange:this._onDatesChange,onFocusChange:this._onFocusChange})),r.a.createElement(C.a,{type:"select",name:"subscriptions",value:a.subscriptions,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Influencer"),l.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.label)}))),r.a.createElement(C.a,{type:"select",name:"subscriptions",value:a.subscriptions,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Seller"),l.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.label)}))),r.a.createElement(C.a,{type:"select",name:"spent",value:a.spent,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Product Category"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.label)}))),r.a.createElement(C.a,{type:"select",name:"status",value:a.status,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Status"),r.a.createElement("option",{value:"active"},"Active"),r.a.createElement("option",{value:"inactive"},"Inactive"))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(C.a,{type:"text",id:"search",name:"search",placeholder:"Search",autoComplete:"off",className:"ml-2",value:this.state.filters.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{color:"secondary",className:"ml-2",onClick:function(){return e._applyFilterChanges()}},r.a.createElement("i",{className:"icon-magnifier"}))))," ",r.a.createElement(aa,{tableData:this.state.subscriberList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,totalCount:s,rowSelection:!0,onPaginate:function(t,a){return e._paginate(t,a)},onSortChange:function(t,a){return e._onSortChange(t,a)},setSelectedRows:function(t){return e._setSelectedRows(t)},showTableLoading:i.loading})),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Subscribers..")),r.a.createElement(Gt,{isOpen:this.state.orderDetailModal.isOpen,data:this.state.orderDetailModal.data,toggle:function(){return e._onToggleSubscriptionModal()}}),r.a.createElement($t,{isOpen:this.state.tipsModal.isOpen,data:this.state.tipsModal.data,toggle:function(){return e._onToggleTipsModal()}}),r.a.createElement(Qt,{isOpen:this.state.ppvModal.isOpen,data:this.state.ppvModal.data,toggle:function(){return e._onTogglePPVModal()}})))))}}]),a}(n.Component),ra=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={comments:[],dropdownOpen:!1,activeIndex:0,duration:0,decodedUserDetails:null,custom:[!1],isCommentScetionOpen:!1,isPrompt:!1,isPostEarningsModalOpen:!1},n.now=60,n._convertIntoDate=function(e){return new Date(e)},n._getAllComments=function(e){xe(n.props).feed;return new Promise((function(t,a){ye(e).then((function(e){e&&e.hasOwnProperty("comments")&&n.setState({comments:e.comments},(function(){t()}))})).catch((function(e){a(e)}))}))},n._toogleCommentSection=function(e){var t=n.state.isCommentScetionOpen;t||n._getAllComments(e.id),n.setState({isCommentScetionOpen:!t})},n._pinToProfile=function(e){var t=xe(n.props).feed;n.props.pinToProfile(t._post._id,!e)},n._postComment=function(e){},n._getInteractionHeaderContent=function(e){return"like"===e.activityType?e._user.name.full+" liked this post":"comment"===e.activityType?e._user.name.full+" commented on this post":"ppv"===e.activityType||"tips"===e.activityType?e._user.name.full+" "+("ppv"===e.activityType?"paid":"tipped")+" $"+(e&&e.hasOwnProperty("_transaction")&&e._transaction.hasOwnProperty("amount")?e._transaction.amount:0)+" for this post":null},n._renderCarousel=function(){return xe(n.props).feed._post._contents.map((function(e){return e=e._content,r.a.createElement(ft.a,{onExiting:n.onExiting,onExited:n.onExited,key:e._id},"video"===e.contentType?r.a.createElement("video",{className:"d-block w-100",src:e.url,controlsList:"nodownload",controls:!0}):r.a.createElement("img",{className:"d-block w-100",src:e.url,alt:e.contentType}))}))},n._onPromptSuccess=function(){n.props.deletePost(),n.setState({isPrompt:!1})},n._onPromptDismiss=function(){n.setState({isPrompt:!1})},n._deletePost=function(){n.setState({isPrompt:!0})},n._calculatePostPrice=function(e){return e._transactions&&e._transactions.length?e._transactions.filter((function(e){return"post"===e.paymentType||"tips"===e.paymentType})).reduce((function(e,t){return e+t.amount}),0):0},n._closePostEarningsModal=function(){n.setState({isPostEarningsModalOpen:!1})},n._openPostEarningsModal=function(e){n.setState({isPostEarningsModalOpen:!0})},n._fetchTipTransactionList=function(){var e=xe(n.props).feed;return e.hasOwnProperty("_post")&&e._post.hasOwnProperty("_transactions")&&e._post._transactions.length?e._post._transactions.filter((function(e){return"tips"===e.paymentType})):[]},n._fetchPPVTransactionList=function(){var e=xe(n.props).feed;return e.hasOwnProperty("_post")&&e._post.hasOwnProperty("_transactions")&&e._post._transactions.length?e._post._transactions.filter((function(e){return"post"===e.paymentType})):[]},n._redirectToPostDetails=function(){n.props.history.push("/post/"+n.props.feed._post._id)},n._renderPreview=function(){var e=xe(n.state),t=e.activeIndex,a=(e.decodedUserDetails,e.isCommentScetionOpen),l=e.comments,o=(e.isPrompt,xe(n.props)),s=o.user,i=o.feed,c=i&&i.hasOwnProperty("_influencer")?i._influencer:null,m=i&&i.hasOwnProperty("_interaction")&&i._interaction&&i._interaction.hasOwnProperty("category")&&"comment"===i._interaction.category?i._interaction:null;if(i.hasOwnProperty("_post")){if(i._post.category&&"general"===i._post.category){if(i._post._contents&&i._post._contents.length>1)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,null,n._getInteractionHeaderContent(i)),r.a.createElement(v.a,{className:"card-Feed mt-0",style:{margin:"0 0 15 0"}},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._post._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:c&&c.profilePicture?c.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,c?c.name.full:""),c?r.a.createElement("a",{className:"profileID"},"@",c.username||"NA"):"NA")),r.a.createElement("div",{className:"postTime-Feed"},Fe(i._post.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,i._post&&i._post.text),r.a.createElement("div",{className:"mediaPhotoWrap-Feed"},r.a.createElement(ht.a,{activeIndex:t,next:n.next,previous:n.previous,ride:"carousel"},r.a.createElement(vt.a,{items:i._post._contents,activeIndex:t,onClickHandler:n.goToIndex}),n._renderCarousel(),r.a.createElement(Et.a,{direction:"prev",directionText:"Previous",onClickHandler:n.previous}),r.a.createElement(Et.a,{direction:"next",directionText:"Next",onClickHandler:n.next}))),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,i._post.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection(i._post)},"aria-controls":"exampleAccordion1"},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,i._post.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(i._post)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(i._post)||0)))," ")),m&&!a?r.a.createElement("div",{className:"commentSection",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("div",{className:"d-flex justify-content-start align-items-start"},r.a.createElement("img",{src:s&&s.profilePicture?s.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg-Comment"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"comments-Post"},r.a.createElement("p",null,m.content||"")),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-2"},m&&m.createdAt?r.a.createElement("div",{className:"commentTime ml-0"},r.a.createElement(kt.a,{date:n._convertIntoDate(m.createdAt)})):null)))):null,r.a.createElement(xt,{feed:i._post,ref:n.postCommentRef,comments:l,isOpen:a,getComments:function(){return n._getAllComments()},user:n.props.user}));if(i._post._contents&&1===i._post._contents.length){if("image"===i._post._contents[0]._content.contentType)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,null,n._getInteractionHeaderContent(i)),r.a.createElement(v.a,{className:"card-Feed mt-0",style:{margin:"0 0 15 0"}},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._post._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:c&&c.profilePicture?c.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,c?c.name.full:""),c&&c.username&&c.username.length?r.a.createElement("a",{className:"profileID"},"@",c.username||"NA"):"NA")),r.a.createElement("div",{className:"postTime-Feed"},Fe(i._post.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,i._post.text&&i._post.text.length?i._post.text:""),r.a.createElement("div",{className:"mediaPhotoWrap-Feed"},r.a.createElement("img",{className:"mediaPhoto-Feed",src:i._post._contents[0]._content.url,alt:"Feed Img"})),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,i._post.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,i._post.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(i._post)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(i._post)||0)))," ")),m&&!a?r.a.createElement("div",{className:"commentSection",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("div",{className:"d-flex justify-content-start align-items-start"},r.a.createElement("img",{src:s&&s.profilePicture?s.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg-Comment"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"comments-Post"},r.a.createElement("p",null,m.content||"")),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-2"},m&&m.createdAt?r.a.createElement("div",{className:"commentTime ml-0"},r.a.createElement(kt.a,{date:n._convertIntoDate(m.createdAt)})):null)))):null,r.a.createElement(xt,{feed:i._post,ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},user:n.props.user}));if("audio"===i._post._contents[0].contentType)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,null,n._getInteractionHeaderContent(i)),r.a.createElement(v.a,{className:"card-Feed mt-0",style:{margin:"0 0 15 0"}},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._post._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:c&&c.profilePicture?c.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,c?c.name.full:""),c&&c.username&&c.username.length?r.a.createElement("a",{className:"profileID"},"@",c.username||"NA"):"NA")),r.a.createElement("div",{className:"postTime-Feed"},Fe(i._post.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,i._post.text&&i._post.text.length?i._post.text:""),r.a.createElement("div",{className:"my-2 px-2"},r.a.createElement("audio",{style:{width:"100%"},ref:function(e){n.audio=e},controls:!0,controlsList:"nodownload",src:i._post._contents[0]._content.url||""})),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,i._post.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,i._post.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(i._post)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(i._post)||0)))," ")),m&&!a?r.a.createElement("div",{className:"commentSection",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("div",{className:"d-flex justify-content-start align-items-start"},r.a.createElement("img",{src:s&&s.profilePicture?s.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg-Comment"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"comments-Post"},r.a.createElement("p",null,m.content||"")),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-2"},m&&m.createdAt?r.a.createElement("div",{className:"commentTime ml-0"},r.a.createElement(kt.a,{date:n._convertIntoDate(m.createdAt)})):null)))):null,r.a.createElement(xt,{feed:i._post,ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},user:n.props.user}));if("video"===i._post._contents[0].contentType)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,null,n._getInteractionHeaderContent(i)),r.a.createElement(v.a,{className:"card-Feed mt-0",style:{margin:"0 0 15 0"}},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._post._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:c&&c.profilePicture?c.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,c?c.name.full:""),c&&c.username&&c.username.length?r.a.createElement("a",{className:"profileID"},"@",c.username||"NA"):"NA")),r.a.createElement("div",{className:"postTime-Feed"},Fe(i._post.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,i._post.text&&i._post.text.length?i._post.text:""),r.a.createElement("div",{className:"embed-responsive embed-responsive-16by9 mediaVideoWrap-Feed"},r.a.createElement("video",{className:"embed-responsive-item",src:i._post._contents[0]._content.url,controls:!0,controlsList:"nodownload"})),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,i._post.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,i._post.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(i._post)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(i._post)||0)))," ")),m&&!a?r.a.createElement("div",{className:"commentSection",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("div",{className:"d-flex justify-content-start align-items-start"},r.a.createElement("img",{src:s&&s.profilePicture?s.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg-Comment"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"comments-Post"},r.a.createElement("p",null,m.content||"")),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-2"},m&&m.createdAt?r.a.createElement("div",{className:"commentTime ml-0"},r.a.createElement(kt.a,{date:n._convertIntoDate(m.createdAt)})):null)))):null,r.a.createElement(xt,{ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},feed:i._post,user:n.props.user}))}else if(i._post._contents&&0===i._post._contents.length)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,null,n._getInteractionHeaderContent(i)),r.a.createElement(v.a,{className:"card-Feed mt-0",style:{margin:"0 0 15 0"}},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._post._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:c&&c.profilePicture?c.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,c?c.name.full:""),c&&c.username&&c.username.length?r.a.createElement("a",{className:"profileID"},"@",c.username||"NA"):"NA")),r.a.createElement("div",{className:"postTime-Feed"},Fe(i._post.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,i._post.text&&i._post.text.length?i._post.text:""),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,i._post.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,i._post.comments||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._openPostEarningsModal(i._post)}},r.a.createElement("i",{className:"fa fa-dollar"}),r.a.createElement("span",{style:{verticalAlign:"-1px"}},n._calculatePostPrice(i._post)||0)))," ")),m&&!a?r.a.createElement("div",{className:"commentSection",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("div",{className:"d-flex justify-content-start align-items-start"},r.a.createElement("img",{src:s&&s.profilePicture?s.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg-Comment"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"comments-Post"},r.a.createElement("p",null,m.content||"")),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-2"},m&&m.createdAt?r.a.createElement("div",{className:"commentTime ml-0"},r.a.createElement(kt.a,{date:n._convertIntoDate(m.createdAt)})):null)))):null,r.a.createElement(xt,{feed:i._post,ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},user:n.props.user}))}else if(i._post.category&&"poll"===i._post.category)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,null,n._getInteractionHeaderContent(i)),r.a.createElement(v.a,{className:"card-Feed mt-0",style:{margin:"0 0 15 0"}},r.a.createElement(u.Link,{to:"/post/".concat(n.props.feed._post._id)},r.a.createElement(Ve.a,{onClick:n._redirectToPostDetails,style:{cursor:"pointer"}},r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"personImgWrap"},r.a.createElement("img",{src:c&&c.profilePicture?c.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg"})),r.a.createElement("div",null,r.a.createElement("h4",null,c?c.name.full:""),c&&c.username&&c.username.length?r.a.createElement("a",{className:"profileID"},"@",c.username||"NA"):"NA")),r.a.createElement("div",{className:"postTime-Feed"},Fe(i._post.startDate)))),r.a.createElement(E.a,null,r.a.createElement(gt.a,null,i._post.description&&i._post.description.length?i._post.description:null,i._post.description&&i._post.description.length?r.a.createElement("br",null):null,i._post.text&&i._post.text.length?i._post.text:""),r.a.createElement("div",{className:"d-block mb-2 pollOptionWrap"},i._post.options&&i._post.options.length?i._post.options.map((function(e,t){return r.a.createElement(Pt,{feed:i._post,option:e,key:t,index:t})})):null),r.a.createElement("div",{className:"options-Feed"},r.a.createElement(N.a,{color:"ghost-info",disabled:!0},r.a.createElement("i",{className:"icon-heart"}),r.a.createElement("span",null,i._post.likes||0)),r.a.createElement(N.a,{color:"ghost-info",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("i",{className:"icon-bubble"}),r.a.createElement("span",null,i._post.comments||0)))," ")),m&&!a?r.a.createElement("div",{className:"commentSection",onClick:function(){return n._toogleCommentSection(i._post)}},r.a.createElement("div",{className:"d-flex justify-content-start align-items-start"},r.a.createElement("img",{src:s&&s.profilePicture?s.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img",className:"personImg-Comment"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"comments-Post"},r.a.createElement("p",null,m.content||"")),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-2"},m&&m.createdAt?r.a.createElement("div",{className:"commentTime ml-0"},r.a.createElement(kt.a,{date:n._convertIntoDate(m.createdAt)})):null)))):null,r.a.createElement(xt,{feed:i._post,ref:n.postCommentRef,comments:l,isOpen:a,postComment:function(e){return n._postComment(e)},getComments:function(){return n._getAllComments()},user:n.props.user}));return r.a.createElement("div",null)}return r.a.createElement("div",null)},n.next=n.next.bind(Object(dt.a)(n)),n.previous=n.previous.bind(Object(dt.a)(n)),n.goToIndex=n.goToIndex.bind(Object(dt.a)(n)),n.audio=r.a.createRef(),n.postCommentRef=r.a.createRef(),Dt.a.locale(wt.a),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.decodedUserDetails;if(this.setState({decodedUserDetails:t}),null!==this.audio){var a=Object.assign({},this.audio);a.onloadedmetadata=function(){e.setState({duration:e.formatTime(a.duration.toFixed(0))})}}}},{key:"formatTime",value:function(e){var t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=e%60;return[t,a>9?a:t?"0"+a:a||"0",n>9?n:"0"+n].filter((function(e){return e})).join(":")}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"next",value:function(){var e=xe(this.props).feed;if(!this.animating){var t=this.state.activeIndex===e._post._contents.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:t})}}},{key:"previous",value:function(){var e=xe(this.props).feed;if(!this.animating){var t=0===this.state.activeIndex?e._post._contents.length-1:this.state.activeIndex-1;this.setState({activeIndex:t})}}},{key:"goToIndex",value:function(e){this.animating||this.setState({activeIndex:e})}},{key:"render",value:function(){var e=xe(this.state),t=(e.isPrompt,e.isPostEarningsModalOpen),a=xe(this.props).feed;return r.a.createElement(r.a.Fragment,null,this._renderPreview()," ",r.a.createElement(_t,{isVisible:t,feed:a._post,close:this._closePostEarningsModal,tipArr:this._fetchTipTransactionList(),ppvArr:this._fetchPPVTransactionList(),isSubscriber:!0,user:this.props.user}))}}]),a}(n.Component),la=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={activities:[],isLoading:!0,filterText:"",filteredActivities:[]},n._fetchActivities=function(){n.setState({isLoading:!0},(function(){var e;(e=n.props.match.params.id,new Promise((function(t,a){H(q+"fan/activity/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))).then((function(e){n.setState({activities:e.activities,isLoading:!1,filteredActivities:n._filterActvities(e.activities)})})).catch((function(e){n.setState({isLoading:!1}),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))}))},n._changeFilter=function(e){var t=xe(n.state).activities;n.setState({isLoading:!0},(function(){n.setState({filterText:e},(function(){n.setState({filteredActivities:n._filterActvities(t)},(function(){n.setState({isLoading:!1})}))}))}))},n._filterActvities=function(e){var t=xe(n.state).filterText;return e.filter((function(e){return!t.length||t.length&&e.activityType==t}))},n._fetchActivities=n._fetchActivities.bind(Object(dt.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.updateRef(this._fetchActivities)}},{key:"render",value:function(){var e=this,t=xe(this.state),a=t.isLoading,n=t.filterText,l=t.filteredActivities,o=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"4"}),r.a.createElement(g.a,{sm:"4",style:{display:"flex",justifyContent:"center"}},a?r.a.createElement(pt,null):null),r.a.createElement(g.a,{sm:"4"},r.a.createElement("div",{style:{width:"150px",float:"right"}},r.a.createElement(C.a,{type:"select",name:"status",id:"",style:{minWidth:"150px"},value:n,onChange:function(t){return e._changeFilter(t.target.value)}},r.a.createElement("option",{value:""},"All"),r.a.createElement("option",{value:"comment"},"Comment"),r.a.createElement("option",{value:"like"},"Like"),r.a.createElement("option",{value:"ppv"},"Pay Per View"),r.a.createElement("option",{value:"tips"},"Tips"))))),l&&l.length?l.map((function(t,a){return r.a.createElement(ra,Object.assign({key:a,feed:t,user:o},e.props))})):a?null:r.a.createElement(Xe.a,null,"No activity found yet"))}}]),a}(n.Component),oa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).toggle=function(e,t){var a=n.state.activeTab.slice();a[e]=t,n.setState({activeTab:a,popoverOpen:!n.state.popoverOpen},(function(){2===Number(t)&&n._updateChildActivites()}))},n._onToggleSubscriptionModal=function(e){var t=JSON.parse(JSON.stringify(n.state)).subscriptionModal;t.isOpen=!t.isOpen,t.isOpen&&(e.subscriptions=e._subscriptions),t.data=e,n.setState({subscriptionModal:t})},n._goBack=function(){n.props.history.goBack()},n._manageLoading=function(e,t){var a=n.state.loading,r=a.loadingData,l=a.changeStatusLoading;"data"===e?r=t:"change-status"===e&&(l=t),n.setState({loading:{loadingData:r,changeStatusLoading:l}})},n._getSubscriberDetails=function(e){n._manageLoading("data",!0),function(e){return new Promise((function(t,a){H(q+"fan/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))}(e).then((function(e){console.log("SubscriberView -> response",e);var t=e.fan._subscriptions.filter((function(e){return!e.isExpired})),a=e.fan._subscriptions.filter((function(e){return e.isExpired})),r=t.map((function(e){return{id:e._id,amount:e.amount?e.amount:"-",date:e.start,creator:e._influencer&&e._influencer.name?e._influencer.name.full:"NA",creatorId:e._influencer&&e._influencer.id,tierAndCycle:e.tier&&e.billingCycle?"".concat(je(e.tier)," | ").concat(e.billingCycle/30," Month"):"NA"}})),l=a.map((function(e){return{id:e._id,amount:e.amount?e.amount:"-",date:e.start,creator:e._influencer&&e._influencer.name?e._influencer.name.full:"NA",creatorId:e._influencer&&e._influencer.id,tierAndCycle:e.tier&&e.billingCycle?"".concat(je(e.tier)," | ").concat(e.billingCycle/30," Month"):"NA"}}));n._manageLoading("data",!1);var o=n.state.subscriberDetails;e.fan.profilePicture=e.fan.profilePicture||ze.a.defaultUserPicture,e.fan.status=e.fan.isActive?"Active":"Inactive",e.fan.amountSpent=e.fan._debit.reduce((function(e,t){return e+t.amount}),0).toFixed(2),o=e.fan,n.setState({subscriberDetails:o,subscriptions:r,expiredSubscriptions:l})}),(function(e){console.log(e),n._manageLoading("data",!1)}))},n._onStatusUpdate=function(){var e=n.state.subscriberDetails;e.status="Active"===e.status?"Inactive":"Active",n.setState({subscriberDetails:e}),n._manageLoading("change-status",!0),Q(e.id).then((function(e){console.log(e),n._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(e){console.log(e),n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._dataFormat=function(e,t,a){return console.log(e,t,a),"amount"===a?"number"===typeof e?"$"+e.toFixed(2):"-":"date"===a?r.a.createElement(r.a.Fragment,null,n._formatDate(e,"MMM d, yyyy"),r.a.createElement("br",null),n._formatDate(e,"HH:mm")):"creator"===a?e?r.a.createElement(u.Link,{to:"/creator-view/".concat(t.creatorId)},r.a.createElement("span",null,e)):"-":e},n._gotoViewCreator=function(e){n.props.history.push("/creator-view/"+e)},n.state={activeTab:new Array(2).fill("1"),subscriberDetails:null,loading:{loadingData:!1,changeStatusLoading:!1},subscriptionModal:{isOpen:!1,data:null},activities:[],subscriptionsHeaderKeys:[{id:"id",label:"id"},{id:"amount",label:"Amount"},{id:"date",label:"Date"},{id:"creator",label:"Creator"},{id:"tierAndCycle",label:"Tier & Cycle"}],subscriptions:[],expiredSubscriptions:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getSubscriberDetails(this.props.match.params.id)}},{key:"_formatDate",value:function(e,t){return Object(zt.a)(new Date(e),t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.subscriberDetails,n=t.loading,l=t.subscriptions,o=t.expiredSubscriptions;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,null,!n.loadingData&&r.a.createElement(f.a,null,a&&r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(N.a,{color:"ghost-dark",className:"customBackBtn",onClick:this._goBack},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("h2",null,a.name.full)),r.a.createElement("div",{className:"mr-2"},r.a.createElement(C.a,{type:"select",name:"status",id:"",style:{minWidth:"150px"},value:a.status,onChange:this._onStatusUpdate,disabled:this.state.loading.changeStatusLoading},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive"))))),a&&r.a.createElement(g.a,{sm:"12"},r.a.createElement(lt.a,{tabs:!0,className:"customTabs--Truefanz"},r.a.createElement(ot.a,null,r.a.createElement(st.a,{active:"1"===this.state.activeTab[0],onClick:function(){e.toggle(0,"1")}},"Profile")),r.a.createElement(ot.a,null,r.a.createElement(st.a,{active:"2"===this.state.activeTab[0],onClick:function(){e.toggle(0,"2")}},"Activity"))),r.a.createElement(it.a,{activeTab:this.state.activeTab[0],className:"customTabContent--Truefanz"},r.a.createElement(ct.a,{tabId:"1"},r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"7",md:"5",lg:"4",xl:"3"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(Ve.a,null),r.a.createElement(E.a,{className:"align-items-center d-flex flex-column"},r.a.createElement("div",{className:"profileImgWrap"},r.a.createElement("img",{className:"profileImg",src:a.profilePicture,alt:"Profile Img"})),r.a.createElement("h4",{className:"mt-2 mb-2"},a.name.full,"\xa0",a.address&&a.address.country?r.a.createElement("img",{src:"https://www.countryflags.io/".concat(a.address.country,"/flat/24.png"),alt:"flag"}):""),r.a.createElement(mt.a,{className:"profileInfo mt-2"},r.a.createElement(ut.a,null,r.a.createElement("p",null,"Member Since:",r.a.createElement("span",null,a.createdAt&&Te()(a.createdAt).format("YYYY-MM-DD")||"N/A"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,"Active Subscriptions:"," ",r.a.createElement("span",null,l&&l.length?l.length:0))),r.a.createElement(ut.a,null,r.a.createElement("p",null,"Expired Subscriptions:"," ",r.a.createElement("span",null,o&&o.length?o.length:0))),r.a.createElement(ut.a,null,r.a.createElement("p",null,"Amount Spent:",r.a.createElement(u.Link,{to:{pathname:"/transactions",subscriberId:a._id}},r.a.createElement("span",null,"$",a.amountSpent)))))))),r.a.createElement(g.a,{sm:"11",md:"7",lg:"6",xl:"5"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement(mt.a,{className:"profileInfo"},r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-envelope"}),"Email:",r.a.createElement("span",null,r.a.createElement(Yt,{copiedValue:a.email,fontWeight:600})))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-phone"}),"Phone:",r.a.createElement("span",null,a.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),fontWeight:600}):"N/A"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-user-circle-o"}),"Username:",r.a.createElement("span",null,a.username?r.a.createElement(Yt,{copiedValue:a.username,fontWeight:600}):"N/A"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-user"}),"Gender:",r.a.createElement("span",{className:"capitalize"},a.gender||"N/A"))))))),r.a.createElement(g.a,{sm:"11",md:"5",lg:"4",xl:"4"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"text-center mt-2"},"Address"),a.address&&r.a.createElement("div",{className:"addressWrap"},r.a.createElement("p",null,a.address.street||"N/A"),r.a.createElement(Xe.a,null,"City:"),r.a.createElement("p",null,a.address.city||"N/A"),r.a.createElement(Xe.a,null,"State:"),r.a.createElement("p",null,a.address.state||"N/A"),r.a.createElement(Xe.a,null,"Zip:"),r.a.createElement("p",null,a.address.zip||"N/A"),r.a.createElement(Xe.a,null,"Country:"),r.a.createElement("p",null,a.address.country||"N/A")),!a.address&&r.a.createElement("div",null,"Address Not Provided"))))),r.a.createElement(f.a,{className:"mt-2"},r.a.createElement(g.a,{sm:"12",xl:"6"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:" mt-2"},"Date Started"),r.a.createElement(qe,{tableData:l,headerKeys:this.state.subscriptionsHeaderKeys,dataFormat:this._dataFormat,rowSelection:!1})))),r.a.createElement(g.a,{sm:"12",xl:"6"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"mt-2"},"Date Ended"),r.a.createElement(qe,{tableData:o,headerKeys:this.state.subscriptionsHeaderKeys,dataFormat:this._dataFormat,rowSelection:!1})))))),r.a.createElement(ct.a,{tabId:"2"},r.a.createElement(f.a,{className:"mb-4 justify-content-center"},r.a.createElement(g.a,{sm:12,md:10,lg:8},r.a.createElement(la,Object.assign({user:a,updateRef:function(t){return e._updateChildActivites=t}},this.props)))))))),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Subscriber Details..")),r.a.createElement(Zt,{isOpen:this.state.subscriptionModal.isOpen,data:this.state.subscriptionModal.data,toggle:function(){return e._onToggleSubscriptionModal()}})))}}]),a}(n.Component),sa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={creatorList:[],subscriberList:[],transactionList:[],transactionListBackup:[],paymentTypes:ze.a.paymentTypes,paymentStatusList:ze.a.paymentStatusList,headerKeys:[{id:"id",label:"id"},{id:"name",label:"Transaction"},{id:"amount",label:"Amount"},{id:"date",label:"Date"},{id:"subscriberName",label:"Subscriber"},{id:"creatorName",label:"Creator"},{id:"relatedContent",label:"Related Content",noSort:!0},{id:"status",label:"Status"}],filters:{dateRange:{startDate:null,endDate:null,focusedInput:null,startDateId:"startDate",endDateId:"endDate"},type:"",subscriber:"",creator:"",status:"",search:""},loading:{loadingData:!1,changeStatusLoading:!1,tableLoading:!1},bulkStatus:"",selectedTransactions:[],totalCount:0,transactionFieldsKeyMap:{name:"paymentType",amount:"amount",date:"time",subscriberName:"_from",creatorName:"_to",status:"status"},tableConfig:{pageNumber:1,pageSize:10,sort:{sortBy:"time",sortOrder:"desc"},filters:{}}},e._onDatesChange=function(t,a){var n=e.state.filters;n.dateRange.startDate=t,n.dateRange.endDate=a,e.setState({filters:n}),n.dateRange.startDate&&n.dateRange.endDate&&e._applyFilterChanges()},e._onFocusChange=function(t){var a=e.state.filters;a.dateRange.focusedInput=t,e.setState({filters:a})},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading,o=n.tableLoading;"data"===t?r=a:"change-status"===t?l=a:"table"===t&&(o=a),e.setState({loading:{loadingData:r,changeStatusLoading:l,tableLoading:o}})},e._getAllCreators=function(){$().then((function(e){console.log(e)}),(function(e){console.log(e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},e._getAllSubscribers=function(){ee().then((function(t){console.log(t);var a=t.fans.map((function(e){return{name:e.name.full,id:e.id}}));a=a.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})),e.setState({subscriberList:a})}),(function(e){console.log(e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},e._getAllUsers=function(){Oe().then((function(t){console.log("response :",t);var a=t.influencers.map((function(e){return{name:e.name.full.trim(),id:e.id}}));a=a.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0}));var n=t.fans.map((function(e){return{name:e.name.full.trim(),id:e.id}}));n=n.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})),e.setState({creatorList:a,subscriberList:n})}),(function(e){console.log("error :",e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},e._getAllTransactions=function(t){var a=xe(e.state),n=a.transactionList,r=a.tableConfig;n.length||e._manageLoading("data",!0),me(t).then((function(t){console.log(t),e._manageLoading("data",!1),r.loading=!1,e.setState({tableConfig:r});var a=t.transactions.map((function(e){return{name:e.paymentType,id:e._id,amount:e.amount?Number(e.amount):"-",date:e.time,subscriber:e._from,subscriberName:e._from&&e._from.name?e._from.name.full:"NA",creator:e._to,creatorName:e._to&&e._to.name?e._to.name.full:"NA",relatedContent:e._message||e._post,status:e.status}}));n=a,e.setState({transactionList:n,transactionListBackup:n,totalCount:t.count})}),(function(t){console.log(t),r.loading=!1,e.setState({tableConfig:r}),e._manageLoading("data",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._dataFormat=function(t,a,n){if("name"===n)return console.log(a.name),r.a.createElement("div",{className:"capitalize"},"payperview"===a.name?"Pay Per View":"liveEvent"===a.name?"Live Event":a.name);if("amount"===n)return"number"===typeof t?"$"+t.toFixed(2):"-";if("date"===n)return r.a.createElement(r.a.Fragment,null,e._formatDate(t,"MMM d, yyyy"),r.a.createElement("br",null),e._formatDate(t,"HH:mm"));if("subscriberName"===n)return t?r.a.createElement(u.Link,{to:"/subscriber-view/".concat(a.subscriber._id)},r.a.createElement("span",null,t)):"-";if("creatorName"===n)return t?r.a.createElement(u.Link,{to:"/creator-view/".concat(a.creator._id)},r.a.createElement("span",null,t)):"-";if("status"===n)return r.a.createElement(C.a,{type:"select",value:t,className:"capitalize",onChange:function(t){return e._onUpdateTransactions(t,a)}},e.state.paymentStatusList.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})));if("relatedContent"===n){return"message"===a.name&&t.content&&t.content[0].thumbnail?r.a.createElement("a",{href:t.content&&t.content[0].thumbnail,rel:"noopener noreferrer",target:"_blank"},"Link"):"post"===a.name&&t._contents.length&&t._contents[0].thumbnail?r.a.createElement("a",{href:t._contents[0].thumbnail,rel:"noopener noreferrer",target:"_blank"},"Link"):"-"}return t},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),"search"!==a.name&&e._applyFilterChanges()},e._filterTransactionList=function(){var t=[],a=e.state,n=a.filters,r=a.transactionListBackup,l=a.transactionList;Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),l=r,t.length?(n.dateRange.startDate&&n.dateRange.endDate&&(l=l.filter((function(e){return Te()(Te()(e.date).format("YYYY-MM-DD")).isBetween(n.dateRange.startDate.format("YYYY-MM-DD"),n.dateRange.endDate.format("YYYY-MM-DD"),null,"[]")}))),n.type&&(l=l.filter((function(e){return e.name.toLowerCase()===n.type.toLowerCase()}))),n.subscriber&&(l=l.filter((function(e){return e.subscriber.id===n.subscriber}))),n.creator&&(l=l.filter((function(e){return e.creator.id===n.creator}))),n.status&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length&&(l=l.filter((function(e){return e.name.toLowerCase().includes(n.search.toLowerCase())||e.subscriberName.toLowerCase().includes(n.search.toLowerCase())||e.creatorName.toLowerCase().includes(n.search.toLowerCase())||e.status.toLowerCase().includes(n.search.toLowerCase())}))),e.setState({transactionList:l})):e.setState({transactionList:r})},e._setSelectedRows=function(t){console.log(t);var a=e.state.selectedTransactions;a=t,e.setState({selectedTransactions:a})},e._onBulkStatusChange=function(t){var a=t.currentTarget,n=e.state.bulkStatus;n=a.value,e.setState({bulkStatus:n})},e._applyBulkStatusUpdate=function(){var t=e.state,a=t.bulkStatus,n=t.selectedTransactions,r={status:a,ids:n};r.ids.length&&a?(console.log(r),e._manageLoading("change-status",!0),ue(r).then((function(t){console.log(t),e._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3),n=[],e.setState({selectedTransactions:n}),e._getAllTransactions(e.state.tableConfig)}),(function(t){console.log(t),e._manageLoading("change-status",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))):O.ToastsStore.warning("Please select atleast one transaction and a status.",3e3)},e._paginate=function(t,a){console.log("pageNumber, pageSize :",t,a);var n=e.state.tableConfig;n.pageNumber=t,n.pageSize=a,n.loading=!0,setTimeout((function(){e.setState({tableConfig:n},(function(){e._getAllTransactions(e.state.tableConfig)}))}),100)},e._onSortChange=function(t,a){var n=xe(e.state).tableConfig;n.sort.sortBy=e.state.transactionFieldsKeyMap[t],n.sort.sortOrder=a,n.loading=!0,e.setState({tableConfig:n},(function(){e._getAllTransactions(n)})),console.log("sortName, sortOrder :",t,a)},e._applyFilterChanges=function(){var t=xe(e.state),a=t.filters,n=t.tableConfig;console.log("filters :",a);var r={};a.type.length&&(r.paymentType=a.type),a.subscriber.length&&(r._from=a.subscriber),a.creator.length&&(r._to=a.creator),a.status.length&&(r.status=a.status),a.dateRange.startDate&&a.dateRange.endDate&&(r.start=a.dateRange.startDate.toISOString(),r.end=a.dateRange.endDate.toISOString()),console.log("data :",r),n.filters=r,a.search.length?n.search=a.search:n.search="",n.loading=!0,e.setState({tableConfig:n},(function(){e._getAllTransactions(n)}))},e}return Object(i.a)(a,[{key:"_formatDate",value:function(e,t){return Object(zt.a)(new Date(e),t)}},{key:"_onUpdateTransactions",value:function(e,t){var a=e.currentTarget;console.log(a.value);var n=this.state.transactionList,r=n.find((function(e){return e.id===t.id}));r.status=a.value;var l={ids:[r.id],status:r.status};console.log(l),this.setState({transactionList:n,transactionListBackup:n}),ue(l).then((function(e){console.log(e),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(e){console.log(e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))}},{key:"componentDidMount",value:function(){var e=this,t=xe(this.state).tableConfig;this.props.location.hasOwnProperty("creatorId")?(t.filters._to=this.props.location.creatorId,this.setState({tableConfig:t},(function(){e._getAllTransactions(t),e._getAllUsers()}))):this.props.location.hasOwnProperty("subscriberId")?(t.filters._from=this.props.location.subscriberId,this.setState({tableConfig:t},(function(){e._getAllTransactions(t),e._getAllUsers()}))):(this._getAllTransactions(t),this._getAllUsers())}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.loading,l=t.subscriberList,o=t.creatorList,s=t.paymentTypes,i=t.paymentStatusList,c=t.bulkStatus,m=t.totalCount,u=t.tableConfig;return console.log("subscriberList",l),r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle justify-content-start align-items-center"},r.a.createElement("h2",null,"Transactions")),!n.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap filterWrap-TransactionsPg"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement("div",{className:"ml-2"},r.a.createElement(qt,{dateRange:a.dateRange,onDatesChange:this._onDatesChange,onFocusChange:this._onFocusChange})),r.a.createElement(C.a,{type:"select",name:"type",value:a.type,onChange:this._filterOnChange,className:"capitalize"},r.a.createElement("option",{value:""},"Type"),s.map((function(e){return r.a.createElement("option",{key:e,value:e},"payperview"===e?"Pay Per View":"liveEvent"===e?"Live Event":e)}))),r.a.createElement(C.a,{type:"select",name:"subscriber",value:a.subscriber,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Subscriber"),l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement(C.a,{type:"select",name:"creator",value:a.creator,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Creator"),o.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement(C.a,{type:"select",name:"status",value:a.status,onChange:this._filterOnChange,className:"capitalize"},r.a.createElement("option",{value:""},"Status"),i.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"d-flex align-items-center mt-md-3 mt-xl-0"},r.a.createElement(C.a,{type:"text",id:"search",placeholder:"Search",className:"ml-2",name:"search",autoComplete:"off",value:a.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{color:"secondary",className:"ml-2",onClick:function(){return e._applyFilterChanges()}},r.a.createElement("i",{className:"icon-magnifier"}))))," ",r.a.createElement(aa,{tableData:this.state.transactionList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,totalCount:m,rowSelection:!0,onPaginate:function(t,a){return e._paginate(t,a)},onSortChange:function(t,a){return e._onSortChange(t,a)},setSelectedRows:function(t){return e._setSelectedRows(t)},showTableLoading:u.loading})),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Transactions..")))),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{md:"4",lg:"3"},r.a.createElement("div",{className:"d-flex my-5 flex-column"},r.a.createElement("h3",{className:"text-center mb-3"},"Change Status"),r.a.createElement(C.a,{type:"select",name:"bulkStatus",value:c,onChange:this._onBulkStatusChange,className:"capitalize"},r.a.createElement("option",{value:""},"Select"),i.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(N.a,{className:"BtnPurple mt-4 d-block mx-auto",style:{padding:"8px 25px"},onClick:this._applyBulkStatusUpdate,disabled:n.changeStatusLoading},n.changeStatusLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Submit"))))))}}]),a}(n.Component),ia=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isSubmitting:!1,formFields:{reason:{value:"",isValid:!1,isDirty:!1}},isLoaderActive:!1},e._dismiss=function(){e._resetState(),e.props.onDismiss()},e._handleOutSideClick=function(){e.state.isSubmitting||(e._resetState(),e.props.onDismiss())},e._resetState=function(){e.setState({isSubmitting:!1,formFields:{reason:{value:"",isValid:!1,isDirty:!1}},isLoaderActive:!1})},e._markAsDirty=function(t){var a=e.state.formFields;a[t].value&&a[t].value.length&&(a[t].isDirty=!0,e.setState({formFields:a}),e._validateForm())},e._updateFieldValue=function(t,a){var n=e.state.formFields;n[t].value=a,e.setState({formFields:n}),n[t].isDirty&&e._validateForm()},e._validateForm=function(){return new Promise((function(t,a){var n=e.state.formFields,r=!0;Object.keys(n).forEach((function(e,t){switch(e){case"reason":n.reason.value.length?n.reason.isValid=!0:(n.reason.isValid=!1,r=!1)}})),e.setState({formFields:n,isFormValid:r},(function(){t()}))}))},e._makeAllFieldDirty=function(){var t=e.state.formFields;Object.keys(t).forEach((function(e,a){t[e].isDirty=!0})),e.setState({formFields:t})},e._report=Object(w.a)(L.a.mark((function t(){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._makeAllFieldDirty(),t.next=3,e._validateForm();case 3:a=e.state,a.formFields,a.isFormValid&&(e.props.onSave(e.state.formFields.reason.value,e.props.lastUpdatedData),e._resetState());case 5:case"end":return t.stop()}}),t)}))),e._showLoader=function(){e.setState({isLoaderActive:!0})},e._hideLoader=function(){e.setState({isLoaderActive:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isVisible,a=this.state,n=a.isLoaderActive,l=a.formFields;return r.a.createElement(Ze.a,{isOpen:t,toggle:function(){return e._handleOutSideClick()},className:"modal-dialog-centered"},r.a.createElement($e.a,{className:"text-center"},r.a.createElement(Ft,{isActive:n,loaderSize:30,height:400}),r.a.createElement("h2",{className:"mt-3 mb-4"},"Reason of Rejection"),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 mt-4 mb-4 text-left"},r.a.createElement("h6",{className:"mt-2 mb-2"},"Reason"),r.a.createElement("textarea",{placeholder:"",className:"form-control",rows:"4",style:{resize:"none"},value:l.reason.value,onChange:function(t){return e._updateFieldValue("reason",t.target.value)},onBlur:function(){return e._markAsDirty("reason")}}),l.reason.isDirty&&!l.reason.isValid?r.a.createElement("p",{className:"form-error",style:{paddingLeft:"unset",paddingTop:"8px"}},"Please enter the valid reason"):null))),r.a.createElement(N.a,{color:"danger",className:"mr-4 mb-3",size:"lg",onClick:this._report},r.a.createElement("i",{className:"icon-check mr-1",style:{marginTop:"0.5px"}})," ","Submit"),r.a.createElement(N.a,{outline:!0,color:"warning",className:"mb-3",size:"lg",onClick:function(){return e._dismiss()}},r.a.createElement("i",{className:"icon-close mr-1",style:{marginTop:"0.5px"}})," ","Cancel")))}}]),a}(n.Component),ca=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={creatorList:[],payoutList:[],payoutListBackup:[],payoutStatusList:ze.a.withdrawalStatus,headerKeys:[{id:"id",label:"id"},{id:"date",label:"Date"},{id:"name",label:"Person"},{id:"type",label:"Type"},{id:"amount",label:"Amount"},{id:"status",label:"Status"}],filters:{dateRange:{startDate:null,endDate:null,focusedInput:null,startDateId:"startDate",endDateId:"endDate"},creator:"",status:"",search:""},loading:{loadingData:!1,changeStatusLoading:!1},lastUpdatedData:null,totalCount:0,payoutFieldsKeyMap:{name:"_from",email:"email",phone:"phone",amount:"amount",date:"createdAt",status:"status",lastUpdated:"updatedAt"},tableConfig:{pageNumber:1,pageSize:10,sort:{sortBy:"createdAt",sortOrder:"desc"},filters:{}}},e._onDatesChange=function(t,a){var n=e.state.filters;n.dateRange.startDate=t,n.dateRange.endDate=a,e.setState({filters:n}),n.dateRange.startDate&&n.dateRange.endDate&&e._applyFilterChanges()},e._onFocusChange=function(t){var a=e.state.filters;a.dateRange.focusedInput=t,e.setState({filters:a})},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading;"data"===t?r=a:"change-status"===t&&(l=a),e.setState({loading:{loadingData:r,changeStatusLoading:l}})},e._getAllCreators=function(){$().then((function(t){var a=t.influencers.map((function(e){return{name:e.name.full,id:e.id}}));a=a.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})),e.setState({creatorList:a})}),(function(e){console.log(e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},e._getAllUsers=function(){Oe().then((function(t){console.log("response :",t);var a=t.influencers.map((function(e){return{name:e.name.full,id:e.id}}));a=a.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})),e.setState({creatorList:a})}),(function(e){console.log("error :",e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},e._dataFormat=function(t,a,n){return"name"===n?r.a.createElement(u.Link,{to:"/creator-view/".concat(a.creatorId)},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},t)):"type"===n?r.a.createElement(Yt,{copiedValue:"seller",border:"none"}):"phone"===n?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),border:"none"}):"date"===n||"lastUpdated"===n?t?r.a.createElement(r.a.Fragment,null,e._formatDate(t,"MMM d, yyyy"),"\xa0",e._formatDate(t,"HH:mm")):"-":"status"===n?r.a.createElement(C.a,{type:"select",value:"admin-rejected"===t?"rejected":t,className:"capitalize",onChange:function(t){return e._updatePayout(t,a)}},e.state.payoutStatusList.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))):"amount"===n?"$"+t.toFixed(2):t},e._getAllPayouts=function(t){var a=xe(e.state),n=a.payoutList,r=a.tableConfig;n.length||e._manageLoading("data",!0),ce().then((function(t){e._manageLoading("data",!1),r.loading=!1,e.setState({tableConfig:r});var a=t.withdrawals.map((function(e){return{name:e._from.name.full||"-",creatorId:e._from.id,email:e._from.email,phone:e._from.phone||"-",profilePicture:e._from.profilePicture,id:e._id,amount:e.amount?e.amount:0,date:e.createdAt,status:e.status,lastUpdated:e.updatedAt}}));e.setState({payoutList:a,payoutListBackup:a,totalCount:t.count})}),(function(t){console.log(t),e._manageLoading("data",!1),r.loading=!1,e.setState({tableConfig:r})}))},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),"search"!==a.name&&e._applyFilterChanges()},e._filterPayoutList=function(){var t=[],a=e.state,n=a.filters,r=a.payoutListBackup,l=a.payoutList;Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),l=r,t.length?(n.dateRange&&n.dateRange.startDate&&n.dateRange.endDate&&(console.log("date range checking :"),l=l.filter((function(e){return Te()(Te()(e.date).format("YYYY-MM-DD")).isBetween(n.dateRange.startDate.format("YYYY-MM-DD"),n.dateRange.endDate.format("YYYY-MM-DD"),null,"[]")}))),n.creator&&(console.log("sent by checking :"),l=l.filter((function(e){return e.creatorId===n.creator}))),n.status&&(console.log("status checking :"),l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length&&(l=l.filter((function(e){return e.name.toLowerCase().includes(n.search.toLowerCase())||e.email.toLowerCase().includes(n.search.toLowerCase())||e.phone.toLowerCase().includes(n.search.toLowerCase())||e.status.toLowerCase().includes(n.search.toLowerCase())}))),e.setState({payoutList:l})):e.setState({payoutList:r})},e._closeRejectPayoutReasonModal=function(){var t=xe(e.state),a=t.payoutList,n=t.lastUpdatedData;a.find((function(e){return e.id===n.id})).status=n.status,e.setState({payoutList:a,payoutListBackup:a,lastUpdatedData:null,showRejectPayoutReasonModal:!1})},e._saveRejectPayoutReasonModal=function(t,a){console.log("TCL: _saveRejectPayoutReasonModal -> payout",a);var n={status:"rejected",reason:t},r=xe(e.state),l=r.payoutList;r.lastUpdatedData;e.setState({payoutList:l,payoutListBackup:l,lastUpdatedData:null,showRejectPayoutReasonModal:!1},(function(){e._makeUpdatePayoutAPICall(a.id,n)}))},e._makeUpdatePayoutAPICall=function(t,a){ve(t,a).then((function(e){console.log(e),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(t){console.log(t),e._closeRejectPayoutReasonModal(),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._updatePayout=function(t,a){var n=t.currentTarget,r=xe(e.state).payoutList,l=r.findIndex((function(e,t){return e.id===a.id}));l>=0&&(r[l].status=n.value,e.setState({lastUpdatedData:a,payoutList:r,payoutListBackup:r},(function(){"rejected"===n.value?e.setState({showRejectPayoutReasonModal:!0}):e._makeUpdatePayoutAPICall(a.id,{status:n.value})})))},e._paginate=function(t,a){console.log("pageNumber, pageSize :",t,a);var n=e.state.tableConfig;n.pageNumber=t,n.pageSize=a,n.loading=!0,setTimeout((function(){e.setState({tableConfig:n},(function(){e._getAllPayouts(e.state.tableConfig)}))}),100)},e._onSortChange=function(t,a){var n=xe(e.state).tableConfig;n.sort.sortBy=e.state.payoutFieldsKeyMap[t],n.sort.sortOrder=a,n.loading=!0,e.setState({tableConfig:n},(function(){e._getAllPayouts(n)})),console.log("sortName, sortOrder :",t,a)},e._applyFilterChanges=function(){var t=xe(e.state),a=t.filters,n=t.tableConfig;console.log("filters :",a);var r={};a.creator.length&&(r._from=a.creator),a.status.length&&(r.status=a.status),a.dateRange.startDate&&a.dateRange.endDate&&(r.start=a.dateRange.startDate.toISOString(),r.end=a.dateRange.endDate.toISOString()),console.log("data :",r),n.filters=r,a.search.length?n.search=a.search:n.search="",n.loading=!0,e.setState({tableConfig:n},(function(){e._getAllPayouts(n)}))},e}return Object(i.a)(a,[{key:"_formatDate",value:function(e,t){return e?Object(zt.a)(new Date(e),t):"N/A"}},{key:"componentDidMount",value:function(){this._getAllUsers(),this._getAllPayouts(this.state.tableConfig)}},{key:"render",value:function(){var e=this,t=this.state,a=t.payoutStatusList,n=t.filters,l=(t.creatorList,t.loading),o=t.showRejectPayoutReasonModal,s=t.lastUpdatedData,i=t.totalCount,c=t.tableConfig;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(ia,{isVisible:o,lastUpdatedData:s,onDismiss:this._closeRejectPayoutReasonModal,onSave:this._saveRejectPayoutReasonModal}),r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle justify-content-start align-items-center"},r.a.createElement("h2",null,"Payouts")),!l.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement("div",{className:"ml-2"},r.a.createElement(qt,{dateRange:n.dateRange,onDatesChange:this._onDatesChange,onFocusChange:this._onFocusChange})),r.a.createElement(C.a,{type:"select",name:"creator",value:n.creator,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Seller")),r.a.createElement(C.a,{type:"select",name:"creator",value:n.creator,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Influencer")),r.a.createElement(C.a,{type:"select",name:"status",className:"capitalize",value:n.status,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Status"),a.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(C.a,{type:"text",id:"",placeholder:"Search",name:"search",className:"ml-2",value:n.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{type:"button",color:"secondary",className:"ml-2",onClick:function(){return e._applyFilterChanges()}},r.a.createElement("i",{className:"icon-magnifier"}))))," ",r.a.createElement(aa,{tableData:this.state.payoutList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,totalCount:i,rowSelection:!1,onPaginate:function(t,a){return e._paginate(t,a)},onSortChange:function(t,a){return e._onSortChange(t,a)},setSelectedRows:function(t){return e._setSelectedRows(t)},showTableLoading:c.loading})),l.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Payouts.."))))))}}]),a}(n.Component),ma=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={contentModerationStatusList:ze.a.contentModerationStatusList,contentModerationReasonList:ze.a.contentModerationReasonList,contentModerationList:[],contentModerationListBackup:[],headerKeys:[{id:"id",label:"id"},{id:"name",label:"Creator"},{id:"flaggedBy",label:"Flagged By"},{id:"date",label:"Date"},{id:"reason",label:"Reason"},{id:"status",label:"Status"},{id:"updatedAt",label:"Last Updated At"},{id:"details",label:"Details"}],filters:{dateRange:{startDate:null,endDate:null,focusedInput:null,startDateId:"startDate",endDateId:"endDate"},reason:"",flaggedBy:"",status:"",search:""},loading:{loadingData:!1,changeStatusLoading:!1,changeReasonLoading:!1}},e._onDatesChange=function(t,a){console.log("on date change",t,a);var n=e.state.filters;n.dateRange.startDate=t,n.dateRange.endDate=a,e.setState({filters:n}),n.dateRange.startDate&&n.dateRange.endDate&&(console.log("range selction complete"),e._filterContentModerationList())},e._onFocusChange=function(t){console.log(t);var a=e.state.filters;a.dateRange.focusedInput=t,e.setState({filters:a})},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading,o=n.changeReasonLoading;"data"===t?r=a:"change-status"===t?l=a:"change-reason"===t&&(o=a),e.setState({loading:{loadingData:r,changeStatusLoading:l,changeReasonLoading:o}})},e._dataFormat=function(t,a,n){return"flaggedBy"===n?"User"===a.flaggedBy.userType?r.a.createElement("div",null,r.a.createElement(u.Link,{to:"/subscriber-view/".concat(a.flaggedBy.id)},a.flaggedBy.userType," ",r.a.createElement("br",null),"(",a.flaggedBy.name.full,")")):r.a.createElement("div",null,a.flaggedBy.userType," ",r.a.createElement("br",null),"(",a.flaggedBy.name.full,")"):"name"===n?r.a.createElement(u.Link,{to:"/creator-view/".concat(a._postId._influencer.id)},a.name):"date"===n?r.a.createElement("div",null,e._formatDate(t,"MMM d, yyyy")):"updatedAt"===n?r.a.createElement("div",null,a.lastUpdatedBy&&a.lastUpdatedBy.name.full,r.a.createElement("br",null),e._formatDate(a.updatedAt,"MMM d, yyyy, HH:mm")):"reason"===n?r.a.createElement(C.a,{type:"select",name:"reason",value:t,onChange:function(t){return e._updateContentModeration(t,a,"reason")}},e.state.contentModerationReasonList.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))):"status"===n?r.a.createElement(C.a,{type:"select",name:"status",value:t,onChange:function(t){return e._updateContentModeration(t,a,"status")}},e.state.contentModerationStatusList.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))):"details"===n?(console.log("cell details :",t,a),a._postId?r.a.createElement("a",{href:"/post/"+a._postId._id,rel:"noopener noreferrer"},"Link"):r.a.createElement(r.a.Fragment,null,"N/A")):t},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),"search"!==a.name&&e._filterContentModerationList()},e._filterContentModerationList=function(){var t=[],a=e.state,n=a.filters,r=a.contentModerationListBackup,l=a.contentModerationList;Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),l=r,t.length?(n.dateRange.startDate&&n.dateRange.endDate&&(l=l.filter((function(e){return Te()(Te()(e.date).format("YYYY-MM-DD")).isBetween(n.dateRange.startDate.format("YYYY-MM-DD"),n.dateRange.endDate.format("YYYY-MM-DD"),null,"[]")}))),n.reason&&(l=l.filter((function(e){return e.reason.toLowerCase()===n.reason.toLowerCase()}))),n.flaggedBy&&(l=l.filter((function(e){return e.flaggedBy.userType.toLowerCase()===n.flaggedBy.toLowerCase()}))),n.status&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length&&(l=l.filter((function(e){return e.name.toLowerCase().includes(n.search.toLowerCase())||e.flaggedBy.name.full.toLowerCase().includes(n.search.toLowerCase())||e.reason.toLowerCase().includes(n.search.toLowerCase())||e.status.toLowerCase().includes(n.search.toLowerCase())}))),e.setState({contentModerationList:l})):e.setState({contentModerationList:r})},e}return Object(i.a)(a,[{key:"_formatDate",value:function(e,t){return Object(zt.a)(new Date(e),t)}},{key:"_getContentModerations",value:function(){var e=this;this._manageLoading("data",!0),new Promise((function(e,t){H(q+"reports",!0).then((function(t){e(t)})).catch((function(e){console.log("API call error: ",e),t(e)}))})).then((function(t){e._manageLoading("data",!1);var a=t.reports.map((function(e){var t;return t=e._userId?e._userId.name.full:e._postId._influencer.name.full,e._reportedBy.userType="admin"===e._reportedBy.userType.toLowerCase()?"Admin":"User",{name:t,id:e._id,flaggedBy:e._reportedBy,date:e.createdAt,reason:e.subject,status:e.status,lastUpdatedBy:e.lastUpdatedBy,updatedAt:e.updatedAt,_postId:e.hasOwnProperty("_postId")?e._postId:null}}));a=a.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),e.setState({contentModerationList:a,contentModerationListBackup:a})}),(function(t){console.log(t),e._manageLoading("data",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))}},{key:"_updateContentModeration",value:function(e,t,a){var n=e.currentTarget;console.log(a,n.value);var r=this.state.contentModerationList,l=r.find((function(e){return e.id===t.id}));l[a]=n.value;var o={subject:l.reason,status:l.status};this.setState({contentModerationList:r,contentModerationListBackup:r}),function(e,t){return new Promise((function(a,n){J(q+"report/"+e,!0,t).then((function(e){a(e)})).catch((function(e){console.log("API call error: ",e),n(e)}))}))}(l.id,o).then((function(e){console.log(e);var t=a.charAt(0).toUpperCase()+a.slice(1);O.ToastsStore.success(t+" changed Successfully!",3e3)}),(function(e){console.log(e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))}},{key:"componentDidMount",value:function(){this._getContentModerations()}},{key:"render",value:function(){var e=this.state,t=e.contentModerationStatusList,a=e.contentModerationReasonList,n=e.filters,l=e.loading;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle justify-content-start align-items-center"},r.a.createElement("h2",null,"Content Moderation")),!l.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap filterWrap-TransactionsPg"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement("div",{className:"ml-2"},r.a.createElement(qt,{dateRange:n.dateRange,onDatesChange:this._onDatesChange,onFocusChange:this._onFocusChange})),r.a.createElement(C.a,{type:"select",name:"reason",value:n.reason,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Reason"),a.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(C.a,{type:"select",name:"flaggedBy",value:n.flaggedBy,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Flagged By"),r.a.createElement("option",{value:"admin"},"Admin"),r.a.createElement("option",{value:"user"},"User")),r.a.createElement(C.a,{type:"select",name:"status",value:n.status,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Status"),t.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"d-flex align-items-center mt-md-3 mt-xl-0"},r.a.createElement(C.a,{type:"text",id:"search",name:"search",placeholder:"Search",autoComplete:"off",className:"ml-2",value:n.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{color:"secondary",className:"ml-2",onClick:this._filterContentModerationList},r.a.createElement("i",{className:"icon-magnifier"}))))," ",r.a.createElement(qe,{tableData:this.state.contentModerationList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,rowSelection:!1})),l.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Content Moderations.."))))))}}]),a}(n.Component),ua=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={creator:{name:"",email:"",phone:"",countryCode:"+1"},errors:{},isDirty:{name:!1,email:!1,phone:!1},loading:!1},e._closeModal=function(){console.log("in _closeModal");var t=e.state,a=t.creator,n=t.errors,r=t.isDirty;a={name:"",email:"",phone:"",countryCode:"+1"},r={name:!1,email:!1,phone:!1},n={},e.setState({creator:a,errors:n,isDirty:r},(function(){console.log(a,n),e.props.toggle()}))},e._handleOnChange=function(t){var a=t.currentTarget,n=e.state,r=n.creator,l=n.isDirty;r[a.name]=a.value,l[a.name]=!0,e.setState({creator:r}),e._validateForm()},e._handleOnSubmit=function(t){t.preventDefault();var a=e.state.isDirty;a.name=!0,a.email=!0,a.phone=!0,e.setState({isDirty:a}),console.log(e.state.isDirty);var n=e._validateForm();console.log(n),n||(console.log("Make API call"),e._sendInvite())},e._updateCountryCode=function(t){console.log("TCL: value",t);var a=e.state.creator;a.countryCode=t,e.setState({creator:a})},e}return Object(i.a)(a,[{key:"_sendInvite",value:function(){var e=this;console.log("save user",this.state.creator),this.setState({loading:!0}),function(e){return new Promise((function(t,a){K(q+"invitation",!0,e).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))}({name:{first:this.state.creator.name.split(" ")[0],last:this.state.creator.name.split(" ")[1]},email:this.state.creator.email.trim().length?this.state.creator.email:void 0,phone:this.state.creator.phone.trim().length?"("+this.state.creator.countryCode+")"+this.state.creator.phone:void 0}).then((function(t){console.log(t),e.setState({loading:!1}),O.ToastsStore.success("Invitation sent Successfully.",3e3),e.props.reloadInvitationList(),e._closeModal()}),(function(t){console.log(t),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error"),e.setState({loading:!1})}))}},{key:"_validateForm",value:function(){var e=this.state,t=e.creator,a=e.errors,n=e.isDirty;return Object.keys(t).forEach((function(e){"email"===e&&n.email?t.email.trim().length||t.phone.trim().length?t.email.trim().length&&!new RegExp("^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,3}$").test(t.email)?a.email="Please enter valid Email":(delete a[e],n.email=!1):a.email="Email is Required":"name"===e&&n.name?t.name.trim().length?(delete a[e],n.name=!1):a[e]="Name is Required":"phone"===e&&n.phone&&(t.phone.trim().length||t.email.trim().length?t.phone.trim().length&&!ze.a.regexConfig.phone.test(String(t.phone).toLowerCase())?a[e]="Enter valid phone number":(delete a[e],n.phone=!1):a[e]="Phone is Required")})),console.log(a),this.setState({errors:a}),Object.keys(a).length?a:null}},{key:"componentDidMount",value:function(){console.log("componentDidMount",this.props)}},{key:"render",value:function(){var e=this,t=this.state,a=t.creator,n=t.loading;return r.a.createElement(Ze.a,{isOpen:this.props.isOpen,toggle:function(){return e._closeModal()},className:"modal-dialog-centered"},r.a.createElement(b.a,{onSubmit:this._handleOnSubmit,noValidate:!0},r.a.createElement(Ge.a,{toggle:function(){return e._closeModal()}},"Invite Creator"),r.a.createElement($e.a,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"name"},"Name"),r.a.createElement(C.a,{type:"text",id:"name",placeholder:"Enter",name:"name",value:a.name,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.name?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.name)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"email"},"Email"),r.a.createElement(C.a,{type:"email",id:"email",placeholder:"Enter",name:"email",value:a.email,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.email?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.email)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"phone"},"Phone"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(C.a,{type:"select",name:"selectCountryCode",id:"selectCountryCode",onChange:function(t){return e._updateCountryCode(t.target.value)},value:a.countryCode.value,style:{maxWidth:"75px",padding:"4px"}},tt.map((function(e,t){return r.a.createElement("option",{key:t,value:e.dial_code},e.code," (",e.dial_code,")")}))),r.a.createElement(C.a,{type:"text",id:"phone",placeholder:"Enter",name:"phone",value:a.phone,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.phone?"validation-error":"",style:{maxWidth:"100%"}})),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.phone))))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,type:"button",className:"btn-pill",onClick:function(){return e._closeModal()}},"Cancel"),r.a.createElement(N.a,{className:"BtnPurple",type:"submit",disabled:n},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Send Invite"))))}}]),a}(n.Component),da=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={sendInvitationModal:{isOpen:!1},invitationList:[],invitationListBackup:[],headerKeys:[{id:"id",label:"id"},{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"phone",label:"Phone"},{id:"date",label:"Date"},{id:"invitedBy",label:"Invited By"},{id:"status",label:"Status"}],invitationsStatusColor:ze.a.invitationsStatusColor,filters:{dateRange:{startDate:null,endDate:null,focusedInput:null,startDateId:"startDate",endDateId:"endDate"},sentBy:"",status:"",search:""},loading:{loadingData:!1,sendingMessage:!1},sentByList:[],contact:{via:"email",message:""},selectedInvitations:[]},e._onDatesChange=function(t,a){var n=e.state.filters;n.dateRange.startDate=t,n.dateRange.endDate=a,e.setState({filters:n}),n.dateRange.startDate&&n.dateRange.endDate&&e._filterInvitationList()},e._onFocusChange=function(t){var a=e.state.filters;a.dateRange.focusedInput=t,e.setState({filters:a})},e._toggleSendInviteModal=function(){var t=JSON.parse(JSON.stringify(e.state)).sendInvitationModal;t.isOpen=!t.isOpen,e.setState({sendInvitationModal:t})},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.sendingMessage;"data"===t?r=a:"send-message"===t&&(l=a),e.setState({loading:{loadingData:r,sendingMessage:l}})},e._dataFormat=function(t,a,n){return"status"===n?r.a.createElement(Vt.a,{color:e.state.invitationsStatusColor[t],className:"referralStatus capitalize"},t):"invitedBy"===n?a.invitationLink?r.a.createElement(u.Link,{to:"/creator-view/".concat(a.invitationLink)},a.invitedBy):a.invitedBy:"email"===n?r.a.createElement(Yt,{copiedValue:a.email,border:"none"}):"phone"===n?"-"!==a.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),border:"none"}):"-":"date"===n?t?Object(zt.a)(new Date(t),"MMM dd, yyyy"):"-":t},e._getAllInvitations=function(){e._manageLoading("data",!0),re().then((function(t){e._manageLoading("data",!1);var a=t.invitations.map((function(e){return console.log("sq eqwdq",e),{name:e.name?e.name.first+(e.name.last?" "+e.name.last:""):"-",id:e._id,email:e.email||"-",phone:e.phone||"-",date:e.createdAt,invitedBy:e._from&&e._from?e._from.name.full:"-",invitationLink:e._from&&"Influencer"===e._from.userType?e._from._id:null,status:"pending"===e.status&&e.hasOwnProperty("isExpired")&&e.isExpired?"expired":e.status,isExpired:!!e.hasOwnProperty("isExpired")&&e.isExpired}})),n=(a=a.sort((function(e,t){return new Date(t.date)-new Date(e.date)}))).map((function(e){return e.invitedBy})).filter((function(e,t,a){return a.indexOf(e)===t}));e.setState({invitationList:a,invitationListBackup:a,sentByList:n})}),(function(t){e._manageLoading("data",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),"search"!==a.name&&e._filterInvitationList()},e._filterInvitationList=function(){var t=[],a=xe(e.state),n=a.filters,r=a.invitationListBackup,l=a.invitationList;console.log("TCL: _filterInvitationList -> filters",n),Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),l=[],l=r,console.log("TCL: _filterInvitationList -> invitationList",l),t.length?(n.dateRange&&n.dateRange.startDate&&n.dateRange.endDate&&(console.log("date range checking"),l=l.filter((function(e){return e.hasOwnProperty("date")&&Te()(e.date).isBetween(n.dateRange.startDate,n.dateRange.endDate)}))),n.sentBy&&n.sentBy.length&&(l=l.filter((function(e){return console.log("TCL: _filterInvitationList -> each",e),e.invitedBy.toLowerCase()===n.sentBy.toLowerCase()}))),n.status&&n.status.length&&(console.log("status checking",n.status.toLowerCase()),l=l.filter((function(e){return console.log("each,filters :",e),e.status.toLowerCase()===n.status.toLowerCase()}))),console.log("after status filtering invitationList :",l),n.search.trim().length&&(l=l.filter((function(e){return e.name&&e.name.toLowerCase().includes(n.search.toLowerCase())||e.email&&e.email.toLowerCase().includes(n.search.toLowerCase())||e.phone&&e.phone.toLowerCase().includes(n.search.toLowerCase())||e.invitedBy&&e.invitedBy.toLowerCase().includes(n.search.toLowerCase())}))),console.log("invitationList :",l),e.setState({invitationList:l})):e.setState({invitationList:r})},e._setSelectedRows=function(t){var a=e.state.selectedInvitations;a=t,e.setState({selectedInvitations:a})},e._contactOnChange=function(t){var a=t.currentTarget,n=e.state.contact;n[a.name]=a.value,e.setState({contact:n})},e._sendMessage=function(){var t=e.state,a=t.contact,n={idlist:t.selectedInvitations,text:"email"===a.via?a.message:e._extractContent(a.message)};n.idlist.length?n.text.trim().length?(e._manageLoading("send-message",!0),fe(a.via,n).then((function(t){e._setMessageContent("","message"),e._manageLoading("send-message",!1),O.ToastsStore.success("Message sent Successfully!",3e3)}),(function(t){console.log(t),e._manageLoading("send-message",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))):O.ToastsStore.warning("Please write some message",3e3):O.ToastsStore.warning("Please select atleast one creator",3e3)},e}return Object(i.a)(a,[{key:"_extractContent",value:function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText}},{key:"_setMessageContent",value:function(e,t){var a=this.state.contact;a[t]=e,this.setState({contact:a})}},{key:"componentDidMount",value:function(){this._getAllInvitations()}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.loading,l=t.sentByList,o=t.contact;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement("h2",null,"Invitations")),r.a.createElement(N.a,{className:"BtnPurple",onClick:function(){return e._toggleSendInviteModal()}},r.a.createElement("i",{className:"fa fa-plus"})," Invite")),!n.loadingData&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement("div",{className:"ml-2"},r.a.createElement(qt,{dateRange:a.dateRange,onDatesChange:this._onDatesChange,onFocusChange:this._onFocusChange})),r.a.createElement(C.a,{type:"select",name:"sentBy",value:a.sentBy,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Sent By"),l.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(C.a,{type:"select",name:"status",value:a.status,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Status"),r.a.createElement("option",{value:"accepted"},"Accepted"),r.a.createElement("option",{value:"expired"},"Expired"),r.a.createElement("option",{value:"pending"},"Pending"))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(C.a,{type:"text",id:"search",name:"search",placeholder:"Search",className:"ml-2",value:a.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{color:"secondary",className:"ml-2",onClick:this._filterInvitationList},r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement(qe,{tableData:this.state.invitationList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,rowSelection:!0,setSelectedRows:function(t){return e._setSelectedRows(t)}}),r.a.createElement("div",{className:"d-flex my-5 flex-column w-75 mx-auto"},r.a.createElement("h2",{className:"text-center mb-3"},"Contact"),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(C.a,{type:"select",style:{width:"175px"},className:"mr-3",name:"via",value:o.via,onChange:this._contactOnChange},r.a.createElement("option",{value:"email",defaultValue:!0},"Email"),r.a.createElement("option",{value:"sms"},"SMS")),r.a.createElement("div",{style:{flex:1}},r.a.createElement(ta,{content:o.message,onChange:function(t){return e._setMessageContent(t,"message")}}),r.a.createElement(N.a,{className:"BtnPurple mt-4 d-block mx-auto",style:{padding:"8px 25px"},disabled:n.sendingMessage,onClick:this._sendMessage},n.sendingMessage?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Send"))))),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Invitations..")),r.a.createElement(ua,{isOpen:this.state.sendInvitationModal.isOpen,toggle:function(){return e._toggleSendInviteModal()},reloadInvitationList:this._getAllInvitations})))))}}]),a}(n.Component),pa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={adminUser:{name:"",email:"",phone:"",countryCode:"+1",type:"",status:""},errors:{},isDirty:{name:!1,email:!1,phone:!1},loading:!1},e._closeModal=function(){var t=e.state,a=t.adminUser,n=t.errors,r=t.isDirty;a={name:"",email:"",phone:"",countryCode:"+1"},r={name:!1,email:!1,phone:!1},n={},e.setState({adminUser:a,errors:n,isDirty:r},(function(){console.log(a,n),e.props.toggle()}))},e._handleOnChange=function(t){var a=t.currentTarget,n=e.state,r=n.adminUser,l=n.isDirty;r[a.name]=a.value,l[a.name]=!0,e.setState({adminUser:r}),e._validateForm()},e._handleOnSubmit=function(t){t.preventDefault();var a=e.state.isDirty;a.name=!0,a.email=!0,a.phone=!0,e.setState({isDirty:a}),console.log(e.state.isDirty);var n=e._validateForm();console.log(n),n||(console.log("Make API call"),e._saveUser())},e._updateCountryCode=function(t){var a=e.state.adminUser;a.countryCode=t,e.setState({adminUser:a})},e._resetForm=function(){e.setState({adminUser:{name:"",email:"",phone:"",countryCode:"+1",type:"",status:""}})},e._makeModalHeader=function(){switch(e.props.type){case"add":return"Add Admin";case"edit":return"Edit Admin"}},e}return Object(i.a)(a,[{key:"_saveUser",value:function(){var e=this;console.log("save user",this.state.adminUser),this.setState({loading:!0});var t={name:{first:this.state.adminUser.name.split(" ")[0],last:this.state.adminUser.name.split(" ")[1]},email:this.state.adminUser.email,phone:"("+this.state.adminUser.countryCode+")"+this.state.adminUser.phone};ne(t).then((function(t){console.log(t),e.setState({loading:!1}),O.ToastsStore.success("Admin user added Successfully.",3e3),e.props.reloadAdminList(),e._closeModal()}),(function(t){console.log(t),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error"),e.setState({loading:!1})}))}},{key:"_validateForm",value:function(){var e=this.state,t=e.adminUser,a=e.errors,n=e.isDirty;return Object.keys(t).forEach((function(e){"email"===e&&n.email?t.email.trim().length?t.email.trim().length&&!new RegExp("^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,3}$").test(t.email)?a.email="Please enter valid Email":(delete a[e],n.email=!1):a.email="Email is Required":"name"===e&&n.name?t.name.trim().length?(delete a[e],n.name=!1):a[e]="Name is Required":"phone"===e&&n.phone&&(t.phone.trim().length?ze.a.regexConfig.phone.test(String(t.phone).toLowerCase())?(delete a[e],n.phone=!1):a[e]="Enter valid phone number":a[e]="Phone is Required")})),console.log(a),this.setState({errors:a}),Object.keys(a).length?a:null}},{key:"componentDidUpdate",value:function(e,t){this.props.data&&e.isOpen!==this.props.isOpen?(console.log("object :",this.props.data),"add"!==this.props.type&&this.props.data?this.setState({adminUser:this.props.data}):"add"===this.props.type&&(console.log("here in add mode :"),this._resetForm())):this.props.data||e.isOpen===this.props.isOpen||this._resetForm()}},{key:"render",value:function(){var e=this,t=this.state,a=t.adminUser,n=t.loading;return r.a.createElement(Ze.a,{isOpen:this.props.isOpen,toggle:function(){return e._closeModal()},className:"modal-dialog-centered"},r.a.createElement(b.a,{onSubmit:this._handleOnSubmit,noValidate:!0},r.a.createElement(Ge.a,{toggle:function(){return e._closeModal()}},this._makeModalHeader()),r.a.createElement($e.a,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"name"},"Name"),r.a.createElement(C.a,{type:"text",id:"name",placeholder:"Enter",name:"name",value:a.name,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.name?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.name)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"email"},"Email"),r.a.createElement(C.a,{type:"email",id:"email",placeholder:"Enter",name:"email",value:a.email,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.email?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.email)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"phone"},"Phone"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(C.a,{type:"select",name:"selectCountryCode",id:"selectCountryCode",onChange:function(t){return e._updateCountryCode(t.target.value)},value:a.countryCode,style:{maxWidth:"105px",padding:"4px"}},tt.map((function(e,t){return r.a.createElement("option",{key:t,value:e.dial_code},e.code," (",e.dial_code,")")}))),r.a.createElement(C.a,{type:"text",id:"phone",placeholder:"Enter",name:"phone",value:a.phone,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.phone?"validation-error":"",style:{maxWidth:"100%"}})),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.phone)),"add"!==this.props.type?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"status"},"Status"),r.a.createElement(C.a,{type:"select",id:"status",placeholder:"Enter",name:"status",value:a.status,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.status?"validation-error":""},r.a.createElement("option",null,"Status"),r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive")),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.status))):null))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,type:"button",className:"btn-pill",onClick:function(){return e._closeModal()}},"Cancel"),"add"==this.props.type?r.a.createElement(N.a,{className:"BtnPurple",type:"submit",disabled:n},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Add User"):r.a.createElement(N.a,{className:"BtnPurple",type:"submit",disabled:!0},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Edit User"))))}}]),a}(n.Component),fa=a(290),ga=a.n(fa),ha=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={addAdminModal:{isOpen:!1,data:null,type:"add"},adminList:[],adminListBackup:[],addedBy:[],headerKeys:[{id:"id",label:"id"},{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"phone",label:"Phone"},{id:"status",label:"Status"},{id:"action",label:"Action"}],filters:{addedBy:"",status:"",search:""},loading:{loadingData:!1,changeStatusLoading:!1},currentUser:ga()(localStorage.socialAffilAdminToken)},e._toggleModal=function(t,a){console.log("_toggleModal");var n=JSON.parse(JSON.stringify(e.state)).addAdminModal;n.isOpen=!n.isOpen,n.type=t,n.data=a,e.setState({addAdminModal:n},(function(){console.log(e.state)}))},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading;"data"===t?r=a:"change-status"===t&&(l=a),e.setState({loading:{loadingData:r,changeStatusLoading:l}})},e._getAllAdminUsers=function(){e._manageLoading("data",!0),te().then((function(t){console.log(t),e._manageLoading("data",!1);var a=t.admins.map((function(e){return{name:e.name.full,id:e.id,email:e.email,phone:e.phone||"-",addedBy:e._invitedby?e._invitedby.name.full:"-",lastActive:e.lastLogin?new Date(e.lastLogin):"",lastActiveDate:e.lastLogin?Object(zt.a)(new Date(e.lastLogin),"MMM dd, yyyy"):"-",lastActiveTime:e.lastLogin?Object(zt.a)(new Date(e.lastLogin),"HH:mm"):"",status:e.isActive?"Active":"Inactive",type:e.userType,createdAt:e.createdAt}}));a=a.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),e.setState({adminList:a,adminListBackup:a,addedBy:a})}),(function(t){console.log(t),e._manageLoading("data",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._onStatusUpdate=function(t){console.log(t);var a=e.state.adminList,n=a.find((function(e){return e.id===t.id}));n.status="Active"===n.status?"Inactive":"Active",e.setState({adminList:a,adminListBackup:a}),ae(t.id).then((function(e){console.log(e),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(e){console.log(e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},e._dataFormat=function(t,a,n){return"action"===n?r.a.createElement("button",{type:"button",title:"Edit",className:"btn btn-white",onClick:function(){return e._toggleModal("edit",a)}},r.a.createElement("i",{className:"fa fa-pencil"})):"type"===n?r.a.createElement(C.a,{type:"select",value:t,onChange:function(){return e._onStatusUpdate(a)},disabled:e.state.currentUser.id===a.id},r.a.createElement("option",{value:"admin"},"Admin"),r.a.createElement("option",{value:"member"},"Member")):"phone"===n?"-"!==a.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),border:"none"}):"-":"status"===n?r.a.createElement(C.a,{type:"select",value:t,onChange:function(){return e._onStatusUpdate("edit",a)},disabled:e.state.currentUser.id===a.id},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive")):t},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),"search"!==a.name&&e._filterAdminList()},e._filterAdminList=function(){var t=[],a=e.state,n=a.filters,r=a.adminListBackup,l=a.adminList;Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),console.log(t),l=r,t.length?(n.addedBy&&(console.log(n.addedBy),l=l.filter((function(e){return e.addedBy.toLowerCase()===n.addedBy.toLowerCase()}))),n.status&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length&&(l=l.filter((function(e){return e.name.toLowerCase().includes(n.search.toLowerCase())||e.email.toLowerCase().includes(n.search.toLowerCase())||e.phone.toLowerCase().includes(n.search.toLowerCase())||e.addedBy.toLowerCase().includes(n.search.toLowerCase())}))),e.setState({adminList:l})):e.setState({adminList:r})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getAllAdminUsers()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.addedBy,t.filters),n=t.loading;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement("h2",null,"Admin Users")),r.a.createElement(N.a,{className:"BtnPurple",onClick:function(){return e._toggleModal("add",null)}},r.a.createElement("i",{className:"fa fa-plus"})," Add")),!n.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement(C.a,{type:"select",name:"status",value:a.status,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Status"),r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive"))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(C.a,{type:"text",id:"search",name:"search",placeholder:"Search",className:"ml-2",autoComplete:"off",value:a.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{color:"secondary",className:"ml-2",onClick:this._filterAdminList},r.a.createElement("i",{className:"icon-magnifier"}))))," ",r.a.createElement(qe,{tableData:this.state.adminList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,rowSelection:!1})),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Admin Users..")),r.a.createElement(pa,{isOpen:this.state.addAdminModal.isOpen,type:this.state.addAdminModal.type,data:this.state.addAdminModal.data,toggle:function(){return e._toggleModal()},reloadAdminList:this._getAllAdminUsers})))))}}]),a}(n.Component),va=a(112),Ea=a(158),ba=a.n(Ea),_a=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={editing:!1,prevValue:"",newValue:"",inputValue:""},e}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({inputValue:e.value})}},{key:"render",value:function(){var e=xe(this.props).value;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{padding:5,background:"#1F1F1F",margin:"2.5px",borderRadius:14,paddingTop:"6px",paddingBottom:"6px",paddingLeft:"10px",paddingRight:"10px",color:"white",fontWeight:600,cursor:"text"}},r.a.createElement("span",{style:{background:"#1F1F1F",color:"white",fontWeight:600,cursor:"text"}},e)))}}]),a}(n.Component),ya={chipsContainer:{display:"flex",position:"relative",border:"1px solid #e4e7ea",backgroundColor:"#fff",fontSize:"13px",minHeight:24,alignItems:"center",flexWrap:"wrap",padding:"3px 4px 4px",borderRadius:"4px",":focus":{border:"1px solid #5c6873"}},container:{flex:1},containerOpen:{},input:{border:"none",outline:"none",boxSizing:"border-box",width:"100%",padding:5,margin:0},suggestionsContainer:{},suggestionsList:{position:"absolute",border:"1px solid #ccc",zIndex:10,left:0,top:"100%",width:"100%",backgroundColor:"#fff",listStyle:"none",padding:0,margin:0},suggestion:{padding:"5px 15px"},suggestionHighlighted:{background:"#ddd"},sectionContainer:{},sectionTitle:{}},Sa={chip:{padding:"0 4px 4px",background:"#1F1F1F",color:"#fff",margin:"2.5px",borderRadius:3,cursor:"default"},chipSelected:{background:"#888"},chipRemove:{fontWeight:"bold",marginLeft:"4px",marginRight:"1px",fontSize:"17px",color:"#fff",cursor:"pointer",":hover":{color:"#fff"}}},Ca=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={chips:[],tipTexts:[],settings:{referPercentage:"",influencerPercentage:""},errors:{},isDirty:{referPercentage:!1,influencerPercentage:!1},loading:{loadingData:!1,updateLoading:!1}},e._goBack=function(){window.history.go(-1)},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.updateLoading;"data"===t?r=a:"update"===t&&(l=a),e.setState({loading:{loadingData:r,updateLoading:l}})},e._getSettings=function(){e._manageLoading("data",!0),de().then((function(t){console.log("_getSettings",t),e.setState({settings:t.setting,chips:t.setting&&t.setting.categories?t.setting.categories:[],tipTexts:t.setting&&t.setting.tipTexts?t.setting.tipTexts:[]}),e._manageLoading("data",!1)}),(function(t){e._manageLoading("data",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._handleOnChange=function(t){var a=t.currentTarget,n=e.state,r=n.settings,l=n.isDirty;r[a.name]=a.value,l[a.name]=!0,e.setState({settings:r}),e._validateForm()},e._handleOnSubmit=function(t){t.preventDefault();var a=e.state.isDirty;a.referPercentage=!0,a.influencerPercentage=!0,e.setState({isDirty:a},(function(){console.log(e.state.isDirty);var t=e._validateForm();console.log("TCL: errors",t),t||(console.log("Make API call"),e._updateSettings())}))},e._updateSettings=function(){var t=e.state,a=t.settings,n=t.chips,r=t.tipTexts;a.referPercentage=Number(a.referPercentage),a.influencerPercentage=Number(a.influencerPercentage),a.categories=n,a.tipTexts=r,e._manageLoading("update",!0),pe(a).then((function(t){e._manageLoading("update",!1),O.ToastsStore.success("Settings updated Successfully",3e3)}),(function(t){e._manageLoading("update",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._onChipSelect=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chips";console.log("TCL: _onChipSelect -> chips",t);var n="";t.length&&(n=t[t.length-1].trim(),console.log("TCL: _onChipSelect -> lastAddedChip",n),t.pop());var r=t.filter((function(e){return e.trim().toLowerCase()===n.toLowerCase()}));!r.length&&n.length&&t.push(n),e.setState(Object(va.a)({},a,t.length?t:[]),(function(){console.log("this.state :",e.state)}))},e._updateChip=function(e){console.log("on _updateChip :",e)},e}return Object(i.a)(a,[{key:"_validateForm",value:function(){var e=this.state,t=e.settings,a=e.errors,n=e.isDirty,r=e.chips,l=e.tipTexts;return console.log("TCL: _validateForm -> chips, tipTexts",r,l),Object.keys(t).forEach((function(e){"referPercentage"===e&&n.referPercentage?t.referPercentage.toString().trim().length?t.referPercentage.toString().trim().length&&(t.referPercentage<=0||t.referPercentage>100)?a.referPercentage="Referral Benefits should be between 1 and 100":(delete a[e],n.referPercentage=!1):a.referPercentage="Referral Benefits is Required":"influencerPercentage"===e&&n.influencerPercentage&&(t.influencerPercentage.toString().trim().length?t.influencerPercentage.toString().trim().length&&(t.influencerPercentage<=0||t.influencerPercentage>100)?a[e]="Creator Share should be between 1 and 100":(delete a[e],n.influencerPercentage=!1):a[e]="Creator Share is Required")})),r.length||(a.chips="You have to add at least one category"),l.length||(a.tipTexts="You have to add at least one tip text"),console.log("errors :",a),this.setState({errors:a},(function(){console.log("TCL: _validateForm -> errors",a)})),Object.keys(a).length?a:null}},{key:"componentDidMount",value:function(){this._getSettings()}},{key:"render",value:function(){var e=this,t=this.state,a=t.settings,n=t.loading,l=t.chips,o=t.tipTexts;return console.log("TCL: render -> this.state",this.state),r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle justify-content-start align-items-center"},r.a.createElement("h2",null,"Settings")))),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{xs:"12",sm:"12",md:"10",lg:"8",xl:"6"},r.a.createElement(v.a,{className:"settingsWrap"},!n.loadingData&&r.a.createElement(E.a,{className:"pt-4"},r.a.createElement(b.a,{noValidate:!0,className:"form-horizontal"},r.a.createElement(Qe.a,{row:!0,className:"mb-4 align-items-center"},r.a.createElement(g.a,{sm:"12",className:"mb-1"},r.a.createElement("h4",{style:{fontFamily:"'Playfair Display', serif",fontWeight:700,color:"#1F1F1F",marginBottom:"15px"}},"Category of Creator Settings"),r.a.createElement(ba.a,{style:{width:"100%"},theme:ya,chipTheme:Sa,value:l,onChange:this._onChipSelect,createChipKeys:[9,13],placeholder:"Add category.."})),!l.length||this.state.errors&&this.state.errors.chips&&this.state.errors.chips.length?r.a.createElement("div",{className:"validation-error",style:{marginLeft:"15px"}},this.state.errors.chips):null),r.a.createElement(Qe.a,{row:!0,className:"mb-4 align-items-center"},r.a.createElement(g.a,{sm:"12",className:"mb-1"},r.a.createElement("h4",{style:{fontFamily:"'Playfair Display', serif",fontWeight:700,color:"#1F1F1F",marginBottom:"15px"}},"Dynamic tip text"),r.a.createElement(ba.a,{style:{width:"100%"},theme:ya,chipTheme:Sa,value:o,onChange:function(t){return e._onChipSelect(t,"tipTexts")},renderChip:function(e){return r.a.createElement(_a,{value:e})},createChipKeys:[9,13],placeholder:"Add tip text.."})),!o.length||this.state.errors&&this.state.errors.tipTexts&&this.state.errors.tipTexts.length?r.a.createElement("div",{className:"validation-error",style:{marginLeft:"15px"}},this.state.errors.tipTexts):null),r.a.createElement(Qe.a,{row:!0,className:"mb-4 align-items-center"},r.a.createElement(g.a,{sm:"12",className:"mb-1"},r.a.createElement("h4",{style:{fontFamily:"'Playfair Display', serif",fontWeight:700,color:"#1F1F1F",marginBottom:"20px"}},"Revenue Share Settings"),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center mb-3"},r.a.createElement(Xe.a,{htmlFor:"",style:{minWidth:"170px"}},"Referral Benefits"),r.a.createElement(_.a,{style:{width:"200px"}},r.a.createElement(C.a,{type:"number",id:"referPercentage",autoComplete:"off",name:"referPercentage",placeholder:"Enter",value:a.referPercentage,onChange:this._handleOnChange}),r.a.createElement(y.a,{addonType:"append"},r.a.createElement(S.a,null,r.a.createElement("i",{className:"fa fa-percent"}))),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.referPercentage))),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(Xe.a,{htmlFor:"",style:{minWidth:"170px"}},"Creator Share"),r.a.createElement(_.a,{style:{width:"200px"}},r.a.createElement(C.a,{type:"number",id:"influencerPercentage",name:"influencerPercentage",placeholder:"Enter",value:a.influencerPercentage,onChange:this._handleOnChange}),r.a.createElement(y.a,{addonType:"append"},r.a.createElement(S.a,null,r.a.createElement("i",{className:"fa fa-percent"}))),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.influencerPercentage))))),r.a.createElement(N.a,{onClick:function(t){return e._handleOnSubmit(t)},className:"BtnPurple mx-auto d-block",style:{padding:"8px 25px",marginTop:"35px"},disabled:n.updateLoading},n.updateLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Save"))),n.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Settings..")))))))}}]),a}(n.Component),Na=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={seller:{sellerStore:"",url:"",name:"",email:"",phone:"",countryCode:"+1"},errors:{},isDirty:{name:!1,email:!1,phone:!1},loading:!1},e._closeModal=function(){var t=e.state,a=t.seller,n=t.errors,r=t.isDirty;a={name:"",email:"",phone:"",countryCode:"+1"},r={name:!1,email:!1,phone:!1},n={},e.setState({seller:a,errors:n,isDirty:r},(function(){console.log(a,n),e.props.toggle()}))},e._handleOnChange=function(t){var a=t.currentTarget;console.log(a);var n=e.state,r=n.seller,l=n.isDirty;r[a.name]=a.value,l[a.name]=!0,e.setState({seller:r}),e._validateForm()},e._handleOnSubmit=function(t){t.preventDefault();var a=e.state.isDirty;a.name=!0,a.email=!0,a.phone=!0,e.setState({isDirty:a}),console.log(e.state.isDirty);var n=e._validateForm();console.log(n),n||console.log("Make API call")},e._updateCountryCode=function(t){var a=e.state.seller;a.countryCode=t,e.setState({seller:a})},e._resetForm=function(){e.setState({seller:{sellerStore:"",url:"",name:"",email:"",phone:"",countryCode:"+1"}})},e}return Object(i.a)(a,[{key:"_saveUser",value:function(){var e=this;console.log("save user",this.state.seller),this.setState({loading:!0});var t={name:{first:this.state.seller.name.split(" ")[0],last:this.state.seller.name.split(" ")[1]},email:this.state.seller.email,phone:"("+this.state.seller.countryCode+")"+this.state.seller.phone};ne(t).then((function(t){console.log(t),e.setState({loading:!1}),O.ToastsStore.success("Admin user added Successfully.",3e3),e.props.reloadAdminList(),e._closeModal()}),(function(t){console.log(t),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error"),e.setState({loading:!1})}))}},{key:"_validateForm",value:function(){var e=this.state,t=e.seller,a=e.errors,n=e.isDirty;return Object.keys(t).forEach((function(e){"email"===e&&n.email?t.email.trim().length?t.email.trim().length&&!new RegExp("^[a-zA-Z0-9]{1}[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,3}$").test(t.email)?a.email="Please enter valid Email":(delete a[e],n.email=!1):a.email="Email is Required":"name"===e&&n.name?t.name.trim().length?(delete a[e],n.name=!1):a[e]="Name is Required":"phone"===e&&n.phone&&(t.phone.trim().length?ze.a.regexConfig.phone.test(String(t.phone).toLowerCase())?(delete a[e],n.phone=!1):a[e]="Enter valid phone number":a[e]="Phone is Required")})),console.log(a),this.setState({errors:a}),Object.keys(a).length?a:null}},{key:"componentDidUpdate",value:function(e,t){this.props.data&&e.isOpen!==this.props.isOpen?(console.log("object :",this.props.data),"add"!==this.props.type&&this.props.data?this.setState({seller:this.props.data}):"add"===this.props.type&&(console.log("here in add mode :"),this._resetForm())):this.props.data||e.isOpen===this.props.isOpen||this._resetForm()}},{key:"render",value:function(){var e=this,t=this.state,a=t.seller,n=t.loading;return console.log(this.props),r.a.createElement(Ze.a,{isOpen:this.props.isOpen,toggle:function(){return e._closeModal()},className:"modal-dialog-centered"},r.a.createElement(b.a,{onSubmit:this._handleOnSubmit,noValidate:!0},"add"===this.props.type?r.a.createElement(Ge.a,{toggle:function(){return e._closeModal()}},"Add Seller"):r.a.createElement(Ge.a,{toggle:function(){return e._closeModal()}},"Seller Details"),r.a.createElement($e.a,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"6"},r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"name"},"Seller Store"),r.a.createElement(C.a,{type:"text",id:"sellerStore",placeholder:"Enter",name:"sellerStore",value:a.sellerStore,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.sellerStore?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.sellerStore)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"name"},"Website"),r.a.createElement(C.a,{type:"text",id:"website",placeholder:"Enter",name:"website",value:a.website,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.website?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.url))),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement("input",{type:"file",accept:".jpg",className:"mt-4"})),r.a.createElement(g.a,{xs:"12"},r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"name"},"Name"),r.a.createElement(C.a,{type:"text",id:"name",placeholder:"Enter",name:"name",value:a.name,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.name?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.name)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"email"},"Email"),r.a.createElement(C.a,{type:"email",id:"email",placeholder:"Enter",name:"email",value:a.email,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.email?"validation-error":""}),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.email)),r.a.createElement(Qe.a,{className:"px-3"},r.a.createElement(Xe.a,{htmlFor:"phone"},"Phone"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(C.a,{type:"select",name:"selectCountryCode",id:"selectCountryCode",onChange:function(t){return e._updateCountryCode(t.target.value)},value:a.countryCode,style:{maxWidth:"105px",padding:"4px"}},tt.map((function(e,t){return r.a.createElement("option",{key:t,value:e.dial_code},e.code," (",e.dial_code,")")}))),r.a.createElement(C.a,{type:"text",id:"phone",placeholder:"Enter",name:"phone",value:a.phone,onChange:this._handleOnChange,className:this.state.errors&&this.state.errors.phone?"validation-error":"",style:{maxWidth:"100%"}})),this.state.errors&&r.a.createElement("div",{className:"validation-error"},this.state.errors.phone))))),r.a.createElement(et.a,null,r.a.createElement(N.a,{color:"dark",outline:!0,type:"button",className:"btn-pill",onClick:function(){return e._closeModal()}},"Cancel"),"add"==this.props.type?r.a.createElement(N.a,{className:"BtnPurple",type:"submit",disabled:n},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Add Seller"):r.a.createElement(N.a,{className:"BtnPurple",type:"submit",disabled:n},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spinner fa-spin mr5"}),"\xa0"):null,"Update Seller"))))}}]),a}(n.Component),Pa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={addSellerModal:{isOpen:!1,data:null,type:"add"},sellerList:[],sellerListBackup:[],headerKeys:[{id:"id",label:"id"},{id:"sellerStore",label:"Seller Store"},{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"phone",label:"Phone"},{id:"products",label:"Products"},{id:"sales",label:"Sales"},{id:"status",label:"Status"}],salesCounts:ze.a.salesCounts,filters:{status:"",search:"",sales:""},loading:{loadingData:!1,changeStatusLoading:!1}},e._getAllSeller=function(){e._manageLoading("data",!0),oe().then((function(t){console.log("api res: ",t);var a=t.sellers.map((function(e){return{id:e._id,sellerStore:e.storeName,name:"".concat(e.name.first," ").concat(e.name.last),phone:e.phone&&"-"!==e.phone?e.phone:"-",email:e.email,status:e.isActive?"Active":"Inactive",products:e.productCount,sales:e.totalEarned}}));e.setState({sellerList:a,sellerListBackup:a}),e._manageLoading("data",!1)})).catch((function(t){e._manageLoading("data",!1),console.log("api error: ",t),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._formatDate=function(e){return Object(zt.a)(new Date(e),"MMM d, yyyy")},e._onToggleSellerModal=function(t,a){var n=JSON.parse(JSON.stringify(e.state)).addSellerModal;n.isOpen=!n.isOpen,n.type=t,n.data=a,e.setState({addSellerModal:n},(function(){console.log(e.state)}))},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading;"data"===t?r=a:"change-status"===t&&(l=a),e.setState({loading:{loadingData:r,changeStatusLoading:l}})},e._onStatusUpdate=function(t){e._manageLoading("change-status",!0);var a=e.state.sellerList,n=a.find((function(e){return e.id===t.id}));if(!n)return console.log(t.id,a),e._manageLoading("change-status",!1),void O.ToastsStore.error("Somthing went wrong!",3e3);var r={};"active"===n.status.toLowerCase()?(r.isActive=!1,n.status="Inactive"):(r.isActive=!0,n.status="Active"),se(r,t.id).then((function(t){console.log("api res: ",t),e.setState({sellerList:a,sellerListBackup:a}),e._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)})).catch((function(t){console.log("api error: ",t),e._manageLoading("change-status",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._dataFormat=function(t,a,n){return"sellerStore"===n?r.a.createElement("div",{color:"ghost-primary",onClick:function(){return e._onToggleSellerModal("edit",a)},style:{cursor:"pointer"}},a.sellerStore):"phone"===n?"-"!==a.phone?Object(nt.a)(a.phone)?Object(nt.a)(a.phone).formatInternational():a.phone:"-":"sales"===n?a.sales>0?a.sales:0:"products"===n?a.products>0?a.products:0:"status"===n?r.a.createElement(C.a,{type:"select",style:{width:85,minWidth:85},value:t,onChange:function(){return e._onStatusUpdate(a)},disabled:e.state.loading.changeStatusLoading},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive")):"action"===n?r.a.createElement(u.Link,{to:"/subscriber-view/".concat(a.id)},r.a.createElement(N.a,{color:"ghost-primary"},"View")):t},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),e._filterSellerList()},e._filterSellerList=function(){var t=[],a=e.state,n=a.filters,r=a.sellerListBackup,l=a.sellerList;if(Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),l=r,t.length){if(n.sales){var o=JSON.parse(n.sales);l=0===o.max&&0===o.min?l.filter((function(e){return 0===e.sales})):o.max?l.filter((function(e){return e.sales>o.min&&e.sales<=o.max})):l.filter((function(e){return e.sales>o.min}))}if(n.status&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length){var s=n.search.trim().toLowerCase();l=l.filter((function(e){return e.sellerStore.toLowerCase().includes(s)||e.name.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)||e.phone.toLowerCase().includes(s)}))}e.setState({sellerList:l})}else e.setState({sellerList:r})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getAllSeller()}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.loading,l=t.sellerList,o=t.headerKeys;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("h2",null,"Sellers"),r.a.createElement(N.a,{className:"BtnPurple",onClick:function(){return e._onToggleSellerModal("add",null)}},"New Seller")),!n.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement(C.a,{type:"select",name:"sales",value:a.sales,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Sales")),r.a.createElement(C.a,{type:"select",name:"status",value:a.status,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Status"),r.a.createElement("option",{value:"active"},"Active"),r.a.createElement("option",{value:"inactive"},"Inactive"))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(C.a,{type:"text",id:"search",name:"search",placeholder:"Search",autoComplete:"off",className:"ml-2",value:this.state.filters.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{className:"filterBtn",onClick:function(){return e._filterSellerList()}},r.a.createElement("i",{className:"icon-magnifier"}))))," ",r.a.createElement(qe,{tableData:l,headerKeys:o,dataFormat:this._dataFormat})),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Sellers..")),r.a.createElement(Na,{type:this.state.addSellerModal.type,data:this.state.addSellerModal.data,isOpen:this.state.addSellerModal.isOpen,toggle:function(){return e._onToggleSellerModal()},reloadSellerList:this._getAllSeller})))))}}]),a}(n.Component),Oa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).toggle=function(e,t){var a=n.state.activeTab.slice();a[e]=t,n.setState({activeTab:a,popoverOpen:!n.state.popoverOpen},(function(){2===Number(t)&&n._updateChildActivites()}))},n._onToggleSubscriptionModal=function(e){var t=JSON.parse(JSON.stringify(n.state)).subscriptionModal;t.isOpen=!t.isOpen,t.isOpen&&(e.subscriptions=e._subscriptions),t.data=e,n.setState({subscriptionModal:t})},n._goBack=function(){n.props.history.goBack()},n._manageLoading=function(e,t){var a=n.state.loading,r=a.loadingData,l=a.changeStatusLoading;"data"===e?r=t:"change-status"===e&&(l=t),n.setState({loading:{loadingData:r,changeStatusLoading:l}})},n._getSubscriberDetails=function(e){n._manageLoading("data",!0),function(e){return new Promise((function(t,a){H(q+"folder/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))}(e).then((function(e){console.log("vaultView -> response",e);e.folder._transactions.map((function(e){return{id:e.id,subscriber:e._from.name.full,paid:e.amount,date:e.time}})),e.folder._contents.map((function(e){return{id:e.id,filename:e.name,size:e.size,dateadded:e.createdAt}}));n._manageLoading("data",!1),n.setState({folderDetails:e.folder})}),(function(e){console.log(e),n._manageLoading("data",!1)}))},n._onStatusUpdate=function(){var e=n.state.subscriberDetails;e.status="Active"===e.status?"Inactive":"Active",n.setState({subscriberDetails:e}),n._manageLoading("change-status",!0),Q(e.id).then((function(e){console.log(e),n._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(e){console.log(e),n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._dataFormat=function(e,t,a){return"amount"===a?"number"===typeof e?"$"+e.toFixed(2):"-":"dateadded"===a||"date"===a?r.a.createElement(r.a.Fragment,null,n._formatDate(e,"MMM d, yyyy"),r.a.createElement("br",null),n._formatDate(e,"HH:mm")):"creator"===a?e?r.a.createElement(u.Link,{to:"/creator-view/".concat(t.creatorId)},r.a.createElement("span",null,e)):"-":e},n._gotoViewCreator=function(e){n.props.history.push("/creator-view/"+e)},n.state={folderDetails:null,loading:{loadingData:!1,changeStatusLoading:!1},subscriptionModal:{isOpen:!1,data:null},activities:[],salesHeaderKeys:[{id:"id",label:"id"},{id:"influencer",label:"Influencer"},{id:"sales",label:"Sales"}],contentList:[{orderid:12334,buyer:"shyam",qty:5,amount:30,influencer:"jack",status:"pending"}],salesList:[{influencer:"luci",sales:6}],contentHeaderKeys:[{id:"id",label:"id"},{id:"orderid",label:"Order Id"},{id:"buyer",label:"Buyer"},{id:"qty",label:"Qty"},{id:"amount",label:"Amount"},{id:"influencer",label:"Influencer"},{id:"status",label:"Status"}],subscriptions:[],expiredSubscriptions:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getSubscriberDetails(this.props.match.params.id)}},{key:"_formatDate",value:function(e,t){return Object(zt.a)(new Date(e),t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.folderDetails,n=t.subscriberDetails,l=t.loading;t.subscriptions,t.expiredSubscriptions;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,null,!l.loadingData&&r.a.createElement(f.a,null,n&&r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(N.a,{color:"ghost-dark",className:"customBackBtn",onClick:this._goBack},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("h2",null,"Back To Vault")))),a&&r.a.createElement(g.a,{sm:"12"},r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"7",md:"5",lg:"4",xl:"3"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(Ve.a,null),r.a.createElement(E.a,{className:"align-items-center d-flex flex-column"},r.a.createElement("div",{className:"profileImgWrap"},r.a.createElement("img",{className:"profileImg",src:a._owner.profilePicture,alt:"Profile Img"})),r.a.createElement("h4",{className:"mt-2 mb-2"},a._owner.name.full,"\xa0"),r.a.createElement(mt.a,{className:"profileInfo mt-2"},r.a.createElement(ut.a,null,r.a.createElement("p",null,"Seller:",r.a.createElement("span",null,a.createdAt&&Te()(a.createdAt).format("YYYY-MM-DD")||"N/A"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,"Cost:"," ",r.a.createElement("span",null,"$80"))),r.a.createElement(ut.a,null,r.a.createElement("p",null,"Sales:"," ",r.a.createElement("span",null,8))),r.a.createElement(ut.a,null,r.a.createElement("p",null,"Commission:",r.a.createElement("span",null,"5%"))))))),r.a.createElement(g.a,{sm:"11",md:"7",lg:"6",xl:"5"},r.a.createElement(v.a,{className:"ProfileCard ml-5"},r.a.createElement(E.a,null,r.a.createElement(mt.a,{className:"profileInfo"}))))),r.a.createElement(f.a,{className:"mt-2"},r.a.createElement(g.a,{sm:"12",xl:"4"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:" mt-2"},"Sales"),r.a.createElement(qe,{tableData:this.state.salesList,headerKeys:this.state.salesHeaderKeys,dataFormat:this._dataFormat,rowSelection:!1})))),r.a.createElement(g.a,{sm:"12",xl:"8"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"mt-2"},"Recent Orders"),r.a.createElement(qe,{tableData:this.state.contentList,headerKeys:this.state.contentHeaderKeys,dataFormat:this._dataFormat,rowSelection:!1}))))))),r.a.createElement(f.a,{className:"mt-2 d-flex justify-content-center"},r.a.createElement("h3",null,"Sales Letter"),r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(gt.a,{className:"d-flex justify-content-center text-dark"},"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eligendi non quis exercitationem culpa nesciunt nihil aut nostrum explicabo reprehenderit optio amet ab temporibus asperiores quasi cupiditate. Voluptatum ducimus voluptates voluptas?"))),r.a.createElement(Zt,{isOpen:this.state.subscriptionModal.isOpen,data:this.state.subscriptionModal.data,toggle:function(){return e._onToggleSubscriptionModal()}})))}}]),a}(n.Component),Da=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={modals:[!1,!1,!1],subscriptionModal:{isOpen:!1,data:null},tipsModal:{isOpen:!1,data:null},ppvModal:{isOpen:!1,data:null},subscriberList:[{productid:12345,productname:"Samsung Mobile",category:"Mobile",seller:"Abc",influencers:2,cost:"$150",orders:4,status:"active"}],subscriberListBackup:[],headerKeys:[{id:"id",label:"id"},{id:"productid",label:"Product Id"},{id:"productname",label:"Product Name"},{id:"category",label:"Category"},{id:"seller",label:"Seller"},{id:"influencers",label:"Influencers"},{id:"cost",label:"Cost"},{id:"orders",label:"Orders"},{id:"status",label:"Status"}],subscriptionCounts:ze.a.subscriptionCounts,spentCounts:ze.a.spentCounts,filters:{dateRange:{startDate:null,endDate:null,focusedInput:null,startDateId:"startDate",endDateId:"endDate"},subscriptions:"",status:"",search:"",spent:""},loading:{loadingData:!1,changeStatusLoading:!1,sendingMessage:!1},contact:{via:"email",message:""},selectedSubscribers:[],totalCount:0,subscriberFieldsKeyMap:{name:"name",email:"email",phone:"phone",subscriptions:"spent",joinedAt:"createdAt",tipAmount:"tips",spent:"spent",status:"isActive"},tableConfig:{pageNumber:1,pageSize:10,sort:{sortBy:"createdAt",sortOrder:"desc"},filters:{}}},e._formatDate=function(e){return Object(zt.a)(new Date(e),"MMM d, yyyy")},e._onToggleSubscriptionModal=function(t){var a=JSON.parse(JSON.stringify(e.state)).subscriptionModal;a.isOpen=!a.isOpen,a.data=t,e.setState({subscriptionModal:a},(function(){console.log(e.state)}))},e._onToggleTipsModal=function(t){var a=JSON.parse(JSON.stringify(e.state)).tipsModal;a.isOpen=!a.isOpen,a.data=t,e.setState({tipsModal:a},(function(){console.log(e.state)}))},e._onTogglePPVModal=function(t){var a=JSON.parse(JSON.stringify(e.state)).ppvModal;a.isOpen=!a.isOpen,a.data=t,e.setState({ppvModal:a},(function(){console.log(e.state)}))},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading,o=n.sendingMessage;"data"===t?r=a:"change-status"===t?l=a:"send-message"===t&&(o=a),e.setState({loading:{loadingData:r,changeStatusLoading:l,sendingMessage:o}})},e._getAllSubscribers=function(t){var a=xe(e.state),n=a.subscriberList,r=a.tableConfig;n.length||e._manageLoading("data",!0),ee(t).then((function(t){console.log(t),e._manageLoading("data",!1),r.loading=!1,e.setState({tableConfig:r});var a=t.fans.map((function(e){return{name:e.name.last?e.name.full:e.name.first,id:e.id,flag:e.country?e.country:null,email:e.email,phone:e.phone||"-",profilePicture:e.profilePicture||ze.a.defaultUserPicture,joinedAt:e.createdAt,subscriptions:e.subscriptions,spent:e.spent,status:e.isActive?"Active":"Inactive"}}));e.setState({subscriberListBackup:a,totalCount:t.count})}),(function(t){console.log(t),e._manageLoading("data",!1),r.loading=!1,e.setState({tableConfig:r}),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._onStatusUpdate=function(t){var a=e.state.subscriberList,n=a.find((function(e){return e.id===t.id}));n.status="Active"===n.status?"Inactive":"Active",e.setState({subscriberList:a,subscriberListBackup:a}),console.log(a),e._manageLoading("change-status",!0),Q(t.id).then((function(t){console.log(t),e._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(t){console.log(t),e._manageLoading("change-status",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._dataFormat=function(t,a,n){return"productid"===n?(console.log(a),r.a.createElement(u.Link,{to:"/product-view/5f791cf9db0d183d82b4c142"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},a.productid))):"email"===n?r.a.createElement(Yt,{copiedValue:a.email,border:"none"}):"phone"===n?"-"!==a.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),border:"none"}):"-":"joinedAt"===n?t?e._formatDate(t):"-":"sales"===n?t&&t.length?r.a.createElement("span",{onClick:function(){return e._onToggleSubscriptionModal(a)}},t.length):0:"status"===n?r.a.createElement(C.a,{type:"select",value:t,onChange:function(){return e._onStatusUpdate(a)}},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive")):"action"===n?r.a.createElement(u.Link,{to:"/subscriber-view/".concat(a.id)},r.a.createElement(N.a,{color:"ghost-primary"},"View")):t},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n}),"search"!==a.name&&e._applyFilterChanges()},e._filterSubscriberList=function(){var t=[],a=e.state,n=a.filters,r=a.subscriberListBackup,l=a.subscriberList;if(Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),console.log(t),l=r,t.length){if(n.subscriptions){console.log(n.subscriptions);var o=e.state.subscriptionCounts[n.subscriptions].value;console.log(o),l=l.filter((function(e){return o.min&&!o.max?e.subscriptions.length>o.min:e.subscriptions.length>=o.min&&e.subscriptions.length<=o.max}))}n.status&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length&&(l=l.filter((function(e){return e.name.toLowerCase().includes(n.search.toLowerCase())||e.email.toLowerCase().includes(n.search.toLowerCase())||e.phone.toLowerCase().includes(n.search.toLowerCase())}))),e.setState({subscriberList:l})}else e.setState({subscriberList:r})},e._setSelectedRows=function(t){console.log(t);var a=e.state.selectedSubscribers;a=t,e.setState({selectedSubscribers:a})},e._contactOnChange=function(t){var a=t.currentTarget,n=e.state.contact;n[a.name]=a.value,e.setState({contact:n})},e._setMessageContent=function(t,a){var n=e.state.contact;n[a]=t,e.setState({contact:n})},e._extractContent=function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText},e._sendMessage=function(){var t=e.state,a=t.contact,n={idlist:t.selectedSubscribers,text:"email"===a.via?a.message:e._extractContent(a.message)};n.idlist.length?n.text.trim().length?(console.log(n),e._manageLoading("send-message",!0),fe(a.via,n).then((function(t){console.log(t),e._setMessageContent("","message"),e._manageLoading("send-message",!1),O.ToastsStore.success("Message sent Successfully!",3e3)}),(function(t){console.log(t),e._manageLoading("send-message",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))):O.ToastsStore.warning("Please write some message",3e3):O.ToastsStore.warning("Please select atleast one creator",3e3)},e._paginate=function(t,a){console.log("pageNumber, pageSize :",t,a);var n=e.state.tableConfig;n.pageNumber=t,n.pageSize=a,n.loading=!0,setTimeout((function(){e.setState({tableConfig:n},(function(){e._getAllSubscribers(e.state.tableConfig)}))}),100)},e._onSortChange=function(t,a){var n=xe(e.state).tableConfig;n.sort.sortBy=e.state.subscriberFieldsKeyMap[t],n.sort.sortOrder=a,n.loading=!0,e.setState({tableConfig:n},(function(){e._getAllSubscribers(n)})),console.log("sortName, sortOrder :",t,a)},e._applyFilterChanges=function(){var t=xe(e.state),a=t.filters,n=t.tableConfig;console.log("filters :",a);var r={};a.subscriptions.length&&(r._subscriptions={lowerLimit:e.state.subscriptionCounts[a.subscriptions].value.min,upperLimit:e.state.subscriptionCounts[a.subscriptions].value.max}),a.spent.length&&(r.spent={lowerLimit:e.state.spentCounts[a.spent].value.min,upperLimit:e.state.spentCounts[a.spent].value.max}),a.status.length&&(r.isActive="active"===a.status),console.log("data :",r),n.filters=r,a.search.length?n.search=a.search:n.search="",n.loading=!0,e.setState({tableConfig:n},(function(){e._getAllSubscribers(n)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getAllSubscribers(this.state.tableConfig)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.loading,l=(t.subscriptionCounts,t.spentCounts,t.contact,t.totalCount),o=t.tableConfig;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle justify-content-start align-items-center"},r.a.createElement("h2",null,"Products")),!n.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement(C.a,{type:"select",name:"creator",value:a.creator,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Category")),r.a.createElement(C.a,{type:"select",name:"creator",value:a.creator,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Seller")),r.a.createElement(C.a,{type:"select",name:"creator",value:a.creator,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Influencer")),r.a.createElement(C.a,{type:"select",name:"sales",value:a.sales,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Price"))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(C.a,{type:"text",id:"search",name:"search",placeholder:"Search",autoComplete:"off",className:"ml-2",value:this.state.filters.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{color:"secondary",className:"ml-2",onClick:function(){return e._applyFilterChanges()}},r.a.createElement("i",{className:"icon-magnifier"}))))," ",r.a.createElement(aa,{tableData:this.state.subscriberList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,totalCount:l,rowSelection:!0,onPaginate:function(t,a){return e._paginate(t,a)},onSortChange:function(t,a){return e._onSortChange(t,a)},setSelectedRows:function(t){return e._setSelectedRows(t)},showTableLoading:o.loading})),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Subscribers..")),r.a.createElement(Zt,{isOpen:this.state.subscriptionModal.isOpen,data:this.state.subscriptionModal.data,toggle:function(){return e._onToggleSubscriptionModal()}}),r.a.createElement($t,{isOpen:this.state.tipsModal.isOpen,data:this.state.tipsModal.data,toggle:function(){return e._onToggleTipsModal()}}),r.a.createElement(Qt,{isOpen:this.state.ppvModal.isOpen,data:this.state.ppvModal.data,toggle:function(){return e._onTogglePPVModal()}})))))}}]),a}(n.Component),La=a(90),wa=a(111),ka=function(e){var t=e.component,a=Object(wa.a)(e,["component"]);return r.a.createElement(d.d,Object.assign({},a,{render:function(e){return localStorage.socialAffilAdminToken?r.a.createElement(t,e):r.a.createElement(d.c,{to:{pathname:a.redirectRoute,extras:Object(F.a)({},a.location)}})}}))},Ta=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e._dismiss=function(){e.props.onDismiss()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isVisible,n=t.message;return r.a.createElement(Ze.a,{isOpen:a,toggle:function(){return e.props.onDismiss()},className:"modal-dialog-centered"},n&&n.length?r.a.createElement($e.a,{className:"text-center"},r.a.createElement("h2",{className:"mt-3 mb-4"},n),r.a.createElement(N.a,{color:"success",className:"mr-4 mb-3",size:"lg",onClick:function(){return e.props.onSuccess()}},r.a.createElement("i",{className:"icon-check mr-1",style:{marginTop:"0.5px"}})," ",this.props.successButtonText||"Yes"),r.a.createElement(N.a,{outline:!0,color:"warning",className:"mb-3",size:"lg",onClick:function(){return e.props.onDismiss()}},r.a.createElement("i",{className:"icon-close mr-1",style:{marginTop:"0.5px"}})," ",this.props.closeButtonText||"No")):null)}}]),a}(n.Component),xa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={isPrompt:!1,promptMessage:"",promptType:"",selectedCreator:null,sendInvitationModal:{isOpen:!1},invitationList:[],invitationListBackup:[],headerKeys:[{id:"id",label:"id"},{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"phone",label:"Phone"},{id:"description",label:"Why"},{id:"social",label:"Social"},{id:"status",label:"Status"},{id:"actions",label:"Actions",noSort:!0}],invitationsStatusColor:ze.a.invitationsStatusColor,filters:{dateRange:{startDate:null,endDate:null,focusedInput:null,startDateId:"startDate",endDateId:"endDate"},sentBy:"",status:"",search:""},loading:{loadingData:!1,sendingMessage:!1},sentByList:[],contact:{via:"email",message:""},selectedInvitations:[]},e._onDatesChange=function(){var t=Object(w.a)(L.a.mark((function t(a,n){var r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=e.state.filters).dateRange.startDate=a,r.dateRange.endDate=n,e.setState({filters:r},(function(){r.dateRange.startDate&&r.dateRange.endDate&&e._filterInvitationList()}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e._onFocusChange=function(t){var a=xe(e.state).filters;a.dateRange.focusedInput=t,e.setState({filters:a})},e._toggleSendInviteModal=function(){var t=JSON.parse(JSON.stringify(e.state)).sendInvitationModal;t.isOpen=!t.isOpen,e.setState({sendInvitationModal:t})},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.sendingMessage;"data"===t?r=a:"send-message"===t&&(l=a),e.setState({loading:{loadingData:r,sendingMessage:l}})},e._acceptRequest=function(t){e.setState({promptMessage:"Do you want to accept the request of "+t.name+" ?",isPrompt:!0,promptType:"accepted",selectedCreator:t})},e._rejectRequest=function(t){e.setState({promptMessage:"Do you want to reject the request of "+t.name+" ?",isPrompt:!0,promptType:"rejected",selectedCreator:t})},e._openSocialLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if(e&&e.length){if("tiktok"===t){var a=e.split("/");"@"!==a[a.length-1].charAt(0)&&(a[a.length-1]="@"+a[a.length-1],e=a.join("/")),console.log("_openSocialLink -> splittedLinks",a)}e.indexOf("http")>-1||e.indexOf("https")>-1||(e="https://"+e),window.open(e,"_blank")}else Ae("No valid link present","error")},e._dataFormat=function(t,a,n){return"social"===n?r.a.createElement("span",{style:{display:"flex",flexWrap:"wrap"}},t.map((function(t,a){return r.a.createElement("button",{key:a,className:"btn btn-link",title:t.accountUrl,onClick:function(){return e._openSocialLink(t.accountUrl,t.name)}},t.hasOwnProperty("name")?"tiktok"!==t.name?r.a.createElement("i",{className:"fa fa-"+t.name}):"tiktok"===t.name?r.a.createElement("img",{style:{height:"20px"},src:"/assets/img/tiktok-icon.png"}):null:null)}))):"email"===n?r.a.createElement(Yt,{copiedValue:a.email,border:"none"}):"phone"===n?"-"!==a.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),border:"none"}):"-":"actions"===n?"pending"===a.status?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e._acceptRequest(a)},className:"btn btn-success py-1 mr-2"},"Accept"),r.a.createElement("button",{onClick:function(){return e._rejectRequest(a)},className:"btn btn-danger py-1"},"Reject")):r.a.createElement("span",{style:{textDecoration:"none"}},"N/A"):"description"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-light py-1",title:t},"Details")):"status"===n?r.a.createElement("span",{style:{textTransform:"capitalize",textDecoration:"none"}},a.status):t},e._getAllInvitations=function(){e._manageLoading("data",!0),le().then((function(t){e._manageLoading("data",!1);var a=t.invitationRequests.map((function(e){return{name:e.name&&e.name.full&&e.name.full.length?e.name.full:"N/A",id:e._id,email:e.email,phone:e.phone||"-",description:e.description&&e.description.length?e.description:"",date:e.time,status:e.status,social:e.social}}));a=a.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),e.setState({invitationList:a,invitationListBackup:a})}),(function(t){e._manageLoading("data",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;n[a.name]=a.value,e.setState({filters:n},(function(){"search"!==a.name&&e._filterInvitationList()}))},e._filterInvitationList=function(){var t=[],a=xe(e.state),n=a.filters,r=a.invitationListBackup,l=a.invitationList;Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),l=r,t.length?(n.status&&n.status.length&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n&&n.search&&n.search.trim().length&&(l=l.filter((function(e){return e.name.toLowerCase().includes(n.search.toLowerCase())||e.email.toLowerCase().includes(n.search.toLowerCase())||e.phone.toLowerCase().includes(n.search.toLowerCase())||e.description.toLowerCase().includes(n.search.toLowerCase())}))),n.dateRange.startDate&&n.dateRange.endDate&&(l=l.filter((function(e){return e.hasOwnProperty("date")&&Te()(e.date).isBetween(Te()(n.dateRange.startDate).format("YYYY-MM-DD"),Te()(n.dateRange.endDate).format("YYYY-MM-DD"),null,"[]")}))),e.setState({invitationList:l})):e.setState({invitationList:r})},e._setSelectedRows=function(t){var a=e.state.selectedInvitations;a=t,e.setState({selectedInvitations:a})},e._contactOnChange=function(t){var a=t.currentTarget,n=e.state.contact;n[a.name]=a.value,e.setState({contact:n})},e._sendMessage=function(){var t=e.state,a=t.contact,n={idlist:t.selectedInvitations,text:"email"===a.via?a.message:e._extractContent(a.message)};n.idlist.length?n.text.trim().length?(e._manageLoading("send-message",!0),fe(a.via,n).then((function(t){e._setMessageContent("","message"),e._manageLoading("send-message",!1),O.ToastsStore.success("Message sent Successfully!",3e3)}),(function(t){e._manageLoading("send-message",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))):O.ToastsStore.warning("Please write some message",3e3):O.ToastsStore.warning("Please select atleast one creator",3e3)},e._onPromptSuccess=function(t){var a=e.state.selectedCreator;e.setState({isPrompt:!1},(function(){e._manageLoading("Loading",!0),e._actionTakenForInvitationRequest(a.id,t)}))},e._onPromptDismiss=function(){e.setState({isPrompt:!1})},e._actionTakenForInvitationRequest=function(t,a){Ce(t,{status:a}).then((function(t){O.ToastsStore.success("Updated successfully!",3e3),e._getAllInvitations()})).catch((function(t){e._manageLoading("send-message",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getAllInvitations()}},{key:"_extractContent",value:function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText}},{key:"_setMessageContent",value:function(e,t){var a=this.state.contact;a[t]=e,this.setState({contact:a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.loading,l=(t.sentByList,t.contact,t.invitationRequests,t.isPrompt),o=t.promptMessage,s=t.promptType;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(Ta,{isVisible:l,message:o,successButtonText:"Yes",closeButtonText:"No",onSuccess:function(){return e._onPromptSuccess(s)},onDismiss:function(){return e._onPromptDismiss()}}),r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement("h2",null,"Creator Requests"))),!n.loadingData&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement(C.a,{type:"select",name:"status",value:a.status,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Status"),r.a.createElement("option",{value:"accepted"},"Accepted"),r.a.createElement("option",{value:"expired"},"Expired"),r.a.createElement("option",{value:"pending"},"Pending"))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(C.a,{type:"text",id:"search",name:"search",placeholder:"Search",className:"ml-2",value:a.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{color:"secondary",className:"ml-2",onClick:this._filterInvitationList},r.a.createElement("i",{className:"icon-magnifier"})))),r.a.createElement(qe,{tableData:this.state.invitationList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,rowSelection:!1,setSelectedRows:function(t){return e._setSelectedRows(t)}})),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Invitations..")),r.a.createElement(ua,{isOpen:this.state.sendInvitationModal.isOpen,toggle:function(){return e._toggleSendInviteModal()},reloadInvitationList:this._getAllInvitations})))))}}]),a}(n.Component),Aa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={feed:JSON.parse(localStorage.getItem("feed")),loading:{loadingData:!1,sendingMessage:!1}},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading;"data"===t?r=a:"change-status"===t&&(l=a),e.setState({loading:{loadingData:r,changeStatusLoading:l}})},e._fetchPostDetails=function(){Pe(e.props.match.params.id).then((function(t){console.log("TCL: PostDetailsPage -> res",t),e.setState({feed:t.post},(function(){e._manageLoading("data",!1)}))})).catch((function(t){Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error"),e.props.history.goBack()}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._manageLoading("data",!0),this._fetchPostDetails()}},{key:"render",value:function(){var e=xe(this.state),t=e.feed,a=e.loading;return console.log("TCL: PostDetailsPage -> render -> feed",t),r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,null,r.a.createElement(N.a,{color:"ghost-dark",className:"customBackBtn",style:{paddingTop:30,paddingLeft:80},onClick:this.props.history.goBack},r.a.createElement("i",{className:"fa fa-arrow-left"})),a.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Fetching post details..."))," ",!a.loadingData&&r.a.createElement(f.a,{className:"mb-4 justify-content-center mt-3 mt-sm-3 mt-md-4"},r.a.createElement(g.a,{sm:12,md:10,lg:8},t?r.a.createElement(Bt,Object.assign({feed:t,user:t._influencer},this.props)):null))))}}]),a}(n.Component),Ma=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={eventList:[],eventListBackup:[],creatorList:[],subscriberList:[],transactionList:[],transactionListBackup:[],paymentTypes:ze.a.paymentTypes,paymentStatusList:ze.a.paymentStatusList,headerKeys:[{id:"id",label:"id"},{id:"name",label:"Event Name"},{id:"creatorName",label:"Creator"},{id:"time",label:"Scheduled Date"},{id:"rsvp",label:"RSVP"},{id:"price",label:"Fee"},{id:"status",label:"Status"}],filters:{dateRange:{startDate:null,endDate:null,focusedInput:null,startDateId:"startDate",endDateId:"endDate"},attending:{upper:"",lower:""},type:"",creator:"",status:"",search:""},loading:{loadingData:!0,changeStatusLoading:!1,tableLoading:!1},contact:{via:"email",message:""},bulkStatus:"",selectedTransactions:[],totalCount:0,liveEventsFieldsKeyMap:{name:"eventName",time:"time",rsvp:"rsvp",price:"price",creatorName:"_influencer",status:"status"},tableConfig:{pageNumber:1,pageSize:10,sort:{sortBy:"time",sortOrder:"desc"},filters:{}},events:[]},e._getAllUsers=function(){Oe().then((function(t){console.log("response :",t);var a=t.influencers.map((function(e){return{name:e.name.full,id:e.id}}));a=a.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})),e.setState({creatorList:a})}),(function(e){console.log("error :",e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},e._getLiveEvents=function(t){var a=e.state.tableConfig;console.log("LiveEvents -> _getLiveEvents -> tableConfig",t),De(t).then((function(t){e._manageLoading("data",!1),a.loading=!1,e.setState({tableConfig:a});var n=t.events.map((function(e){return{name:e.name,creatorName:e._influencer.name.full,id:e._id,flag:e._influencer.address.country,creatorId:e._influencer._id,profilePicture:e._influencer.profilePicture||ze.a.defaultUserPicture,time:Te()(e.scheduledAt).format("LLL"),status:e.status,createdAt:e.createdAt,rsvp:e.rsvpYes&&e.rsvpYes.length?e.rsvpYes.length:0,basicPrice:e.price?e.price:0,premiumPrice:e.premiumPrice?e.premiumPrice:0,plusPrice:e.plusPrice?e.plusPrice:0}}));e.setState({eventList:n,eventListBackup:n,totalCount:t.count})})).catch((function(e){}))},e._onDatesChange=function(t,a){var n=e.state.filters;n.dateRange.startDate=t,n.dateRange.endDate=a,e.setState({filters:n},(function(){n.dateRange.startDate&&n.dateRange.endDate&&e._applyFilterChanges()}))},e._onFocusChange=function(t){var a=e.state.filters;a.dateRange.focusedInput=t,e.setState({filters:a})},e._manageLoading=function(t,a){var n=e.state.loading,r=n.loadingData,l=n.changeStatusLoading,o=n.tableLoading;"data"===t?r=a:"change-status"===t?l=a:"table"===t&&(o=a),e.setState({loading:{loadingData:r,changeStatusLoading:l,tableLoading:o}})},e._dataFormat=function(e,t,a){return"name"===a?r.a.createElement(u.Link,{to:"/events-view/".concat(t.id)},r.a.createElement("span",{className:"capitalize"},t.name)):"amount"===a?"number"===typeof e?"$"+e.toFixed(2):"-":"time"===a?r.a.createElement(r.a.Fragment,null,t.time):"creatorName"===a?r.a.createElement(u.Link,{to:"/creator-view/".concat(t.creatorId)},r.a.createElement("img",{src:"https://www.countryflags.io/".concat(t.flag,"/flat/24.png"),alt:"flag",className:"mr-2"}),r.a.createElement("span",null,t.creatorName)):"status"===a?r.a.createElement("p",null,t.status):"price"===a?r.a.createElement("p",null,r.a.createElement("span",{title:"Basic",style:{textDecoration:"none"}},t.basicPrice&&Number.isInteger(t.basicPrice)?"$"+t.basicPrice:0===t.basicPrice?0:"$"+t.basicPrice.toFixed(2)),"\xa0 \xa0",r.a.createElement("span",{title:"Plus",style:{textDecoration:"none"}},t.plusPrice&&Number.isInteger(t.plusPrice)?"$"+t.plusPrice:0===t.plusPrice?0:"$"+t.plusPrice.toFixed(2)),"\xa0 \xa0",r.a.createElement("span",{title:"Premium",style:{textDecoration:"none"}},t.premiumPrice&&Number.isInteger(t.premiumPrice)?"$"+t.premiumPrice:0===t.premiumPrice?0:"$"+t.premiumPrice.toFixed(2))):e},e._filterOnChange=function(t){var a=t.currentTarget,n=e.state.filters;if("attending"===a.name){var r=a.value.split("-");n[a.name].upper=r[1],n[a.name].lower=r[0]}else n[a.name]=a.value;e.setState({filters:n},(function(){"search"!==a.name&&e._applyFilterChanges()}))},e._filterTransactionList=function(){var t=[],a=e.state,n=a.filters,r=a.transactionListBackup,l=a.transactionList;Object.keys(n).forEach((function(e){n[e]&&t.push(e)})),l=r,t.length?(n.dateRange.startDate&&n.dateRange.endDate&&(l=l.filter((function(e){return Te()(Te()(e.date).format("YYYY-MM-DD")).isBetween(n.dateRange.startDate.format("YYYY-MM-DD"),n.dateRange.endDate.format("YYYY-MM-DD"),null,"[]")}))),n.type&&(l=l.filter((function(e){return e.name.toLowerCase()===n.type.toLowerCase()}))),n.subscriber&&(l=l.filter((function(e){return e.subscriber.id===n.subscriber}))),n.creator&&(l=l.filter((function(e){return e.creator.id===n.creator}))),n.status&&(l=l.filter((function(e){return e.status.toLowerCase()===n.status.toLowerCase()}))),n.search.trim().length&&(l=l.filter((function(e){return e.name.toLowerCase().includes(n.search.toLowerCase())||e.subscriberName.toLowerCase().includes(n.search.toLowerCase())||e.creatorName.toLowerCase().includes(n.search.toLowerCase())||e.status.toLowerCase().includes(n.search.toLowerCase())}))),e.setState({transactionList:l})):e.setState({transactionList:r})},e._setSelectedRows=function(t){console.log(t);var a=e.state.selectedTransactions;a=t,e.setState({selectedTransactions:a})},e._onBulkStatusChange=function(t){var a=t.currentTarget,n=e.state.bulkStatus;n=a.value,e.setState({bulkStatus:n})},e._applyBulkStatusUpdate=function(){var t=e.state,a=t.bulkStatus,n=t.selectedTransactions,r={status:a,ids:n};r.ids.length&&a?(console.log(r),e._manageLoading("change-status",!0),ue(r).then((function(t){console.log(t),e._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3),n=[],e.setState({selectedTransactions:n}),e._getLiveEvents(e.state.tableConfig)}),(function(t){console.log(t),e._manageLoading("change-status",!1),Ae(t.reason&&t.reason.length?t.reason:"Server error. Try again after sometime.","error")}))):O.ToastsStore.warning("Please select atleast one transaction and a status.",3e3)},e._paginate=function(t,a){var n=e.state.tableConfig;n.pageNumber=t,n.pageSize=a,n.loading=!0,setTimeout((function(){e.setState({tableConfig:n},(function(){e._getLiveEvents(e.state.tableConfig)}))}),100)},e._onSortChange=function(t,a){var n=xe(e.state).tableConfig;n.sort.sortBy=e.state.liveEventsFieldsKeyMap[t],n.sort.sortOrder=a,n.loading=!0,e.setState({tableConfig:n},(function(){e._getLiveEvents(n)}))},e._applyFilterChanges=function(){var t=xe(e.state),a=t.filters,n=t.tableConfig;console.log(a);var r={attending:{}};a.type.length&&(r.paymentType=a.type),(a.attending.upper||a.attending.lower)&&(r.attending.upper=a.attending.upper,r.attending.lower=a.attending.lower),a.creator.length&&(r._influencer=a.creator),a.status.length&&(r.status=a.status),a.dateRange.startDate&&a.dateRange.endDate&&(r.start=a.dateRange.startDate.toISOString(),r.end=a.dateRange.endDate.toISOString()),n.filters=r,a.search.length?n.search=a.search:n.search="",n.loading=!0,e.setState({tableConfig:n},(function(){e._getLiveEvents(n)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._getAllUsers(),this._getLiveEvents(this.state.tableConfig)}},{key:"_formatDate",value:function(e,t){return Object(zt.a)(new Date(e),t)}},{key:"_onUpdateTransactions",value:function(e,t){var a=e.currentTarget;console.log(a.value);var n=this.state.transactionList,r=n.find((function(e){return e.id===t.id}));r.status=a.value;var l={ids:[r.id],status:r.status};console.log(l),this.setState({transactionList:n,transactionListBackup:n}),ue(l).then((function(e){O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(e){console.log(e),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.loading,l=(t.subscriberList,t.creatorList),o=(t.paymentTypes,t.paymentStatusList,t.bulkStatus,t.contact,t.totalCount),s=t.tableConfig;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle justify-content-start align-items-center"},r.a.createElement("h2",null,"Live Events")),!n.loadingData&&r.a.createElement("div",null,r.a.createElement("div",{className:"filterWrap filterWrap-TransactionsPg"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{className:"fa fa-filter"}),r.a.createElement(C.a,{type:"select",name:"creator",value:a.creator,onChange:this._filterOnChange},r.a.createElement("option",{value:""},"Creator"),l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"ml-2"},r.a.createElement(qt,{dateRange:a.dateRange,onDatesChange:this._onDatesChange,onFocusChange:this._onFocusChange})),r.a.createElement(C.a,{type:"select",name:"status",value:a.status,onChange:this._filterOnChange,className:"capitalize"},r.a.createElement("option",{value:""},"Status"),r.a.createElement("option",{value:"scheduled"},"Scheduled"),r.a.createElement("option",{value:"cancelled"},"Canceled"),r.a.createElement("option",{value:"ongoing"}," Ongoing"),r.a.createElement("option",{value:"complete"}," Completed")),r.a.createElement(C.a,{type:"select",name:"attending",value:a.attendingNumber,onChange:this._filterOnChange,className:"capitalize"},r.a.createElement("option",{value:""},"Attending"),r.a.createElement("option",{value:"0-0"},"0"),r.a.createElement("option",{value:"1-10"},"1 - 10"),r.a.createElement("option",{value:"11-50"},"11 - 50"),r.a.createElement("option",{value:"51-100"},"51 - 200"),r.a.createElement("option",{value:"201-500"},"201 - 500"),r.a.createElement("option",{value:"0-500"},"500+"))),r.a.createElement("div",{className:"d-flex align-items-center mt-md-3 mt-xl-0"},r.a.createElement(C.a,{type:"text",id:"search",placeholder:"Search",className:"ml-2",name:"search",autoComplete:"off",value:a.search,onChange:this._filterOnChange}),r.a.createElement(N.a,{color:"secondary",className:"ml-2",onClick:function(){return e._applyFilterChanges()}},r.a.createElement("i",{className:"icon-magnifier"}))))," ",r.a.createElement(aa,{tableData:this.state.eventList,headerKeys:this.state.headerKeys,dataFormat:this._dataFormat,totalCount:o,rowSelection:!0,onPaginate:function(t,a){return e._paginate(t,a)},onSortChange:function(t,a){return e._onSortChange(t,a)},setSelectedRows:function(t){return e._setSelectedRows(t)},showTableLoading:s.loading})),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Events.."))))))}}]),a}(n.Component),Fa=(n.Component,a(117)),Ia=a.n(Fa),ja=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._goBack=function(){n.props.history.goBack()},n._manageLoading=function(e,t){var a=n.state.loading,r=a.loadingData,l=a.changeStatusLoading;"data"===e?r=t:"change-status"===e&&(l=t),n.setState({loading:{loadingData:r,changeStatusLoading:l}})},n._getEventDetails=function(e){n._manageLoading("data",!0),function(e){return new Promise((function(t,a){H(q+"event/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))}(e).then((function(e){var t=e.event,a=e.transactions;n.setState({event:t,transactions:a},(function(){n._manageLoading("data",!1)}))}),(function(e){console.log(e),n._manageLoading("data",!1)}))},n._redirectToSubscriberView=function(e){n.props.history.push("/subscriber-view/"+e._id)},n._markAsDirty=function(e){var t=xe(n.state).formFields;t[e].isDirty=!0,t[e].isTyped=!0,n.setState({formFields:t},(function(){n._validateForm()}))},n._updateFieldValue=function(e,t){var a=xe(n.state).formFields;if(("referPercentage"===e||"earningPercentage"===e)&&!isNaN(Number(t))){var r=t.split(".");if(2===r.length&&r[1].length>2)return}a[e].value=t,n.setState({formFields:a},(function(){a[e].isDirty&&n._validateForm()}))},n._validateForm=function(){return new Promise((function(e){var t=xe(n.state),a=t.formFields,r=(t.platformShare,!0);Object.keys(a).forEach((function(e,t){if(a[e].isTyped)switch(e){case"referPercentage":case"earningPercentage":String(a[e].value).length&&!isNaN(Number(a[e].value))&&Number(a[e].value)>=0&&Math.ceil(a[e].value)<=100?a[e].isValid=!0:(a[e].isValid=!1,r=!1)}})),n.setState({formFields:a,isFormValid:r},(function(){e()}))}))},n._makeAllFieldDirty=function(){return new Promise((function(e){var t=xe(n.state).formFields;Object.keys(t).forEach((function(e,a){t[e].isDirty=!0})),n.setState({formFields:t},(function(){e()}))}))},n._validateAndSubmit=function(){var e=Object(w.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n._makeAllFieldDirty();case 3:return e.next=5,n._validateForm();case 5:a=n.state,a.formFields,a.isFormValid?(console.log("valid"),n._updateShareSettings()):console.log("not valid");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._updateShareSettings=function(){var e=xe(n.state),t=e.formFields,a=e.creatorDetails;Se(a.id,{earningPercentage:Number(t.earningPercentage.value),referPercentage:Number(t.referPercentage.value)}).then((function(e){n._manageLoading("change-status",!1),O.ToastsStore.success("Updated Successfully!",3e3)})).catch((function(e){n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._calculatePlatformShare=function(){return new Promise((function(e){var t=xe(n.state),a=t.formFields;t.isInitial;n.setState({platformShare:100-(Number(a.referPercentage.value||0)+Number(a.earningPercentage.value||0)),isInitial:!1},(function(){e()}))}))},n._getFilteredData=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=e.filter((function(e){return e.hasOwnProperty(a)&&e[a]===n}));return l.length&&l[0].hasOwnProperty(t)?l[0][t]:r},n.state={platformShare:0,isAdditionError:!1,isInitial:!0,isFormValid:!1,idCardUrl:null,holdingIDCardUrl:null,formFields:{referPercentage:{value:"",isValid:!1,isDirty:!1,isRequired:!0,isTyped:!1},earningPercentage:{value:"",isValid:!1,isDirty:!1,isRequired:!0,isTyped:!1}},subscriberModal:{isOpen:!1,data:null},referralsModal:{isOpen:!1,data:null},activeTab:new Array(2).fill("1"),creatorDetails:null,loading:{loadingData:!0,changeStatusLoading:!1},event:{_influencer:{}},transactions:[],availableReferrralCount:0,additionalReferralCount:0},n}return Object(i.a)(a,[{key:"toggle",value:function(e,t){var a=this,n=this.state.activeTab.slice();n[e]=t,this.setState({activeTab:n},(function(){2===Number(t)&&a._updateChildActivites()}))}},{key:"componentDidMount",value:function(){this._manageLoading("data",!0),this._getEventDetails(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.state,a=t.event,n=t.event._influencer,l=t.transactions,o=t.loading;return console.log("event :>> ",a),Object.keys(a).length>1?r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},!o.loadingData&&r.a.createElement(p.a,null,r.a.createElement("div",{className:"events-view"},r.a.createElement("div",{className:"PgTitle mb-5"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(N.a,{color:"ghost-dark",className:"customBackBtn",onClick:function(){return e.props.history.push("/live-events")}},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("h2",null,"Back To Live Events"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"ProfileCard card"},r.a.createElement("div",{className:"card-header"}),r.a.createElement("div",{className:"align-items-center d-flex flex-column card-body"},r.a.createElement("div",{className:"profileImgWrap"},r.a.createElement("img",{className:"profileImg",src:n&&n.profilePicture&&n.profilePicture.length?n.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img"})),r.a.createElement("h4",{className:"mt-2 mb-2"},n.name.full,"\xa0",r.a.createElement("img",{src:"https://www.countryflags.io/".concat(n.address.country,"/flat/24.png"),alt:"flag"})),r.a.createElement("p",null,"Date & Time :"," ",r.a.createElement("span",null,Te()(a.scheduledAt).format("LLL")))),r.a.createElement("div",{className:"card-footer new-card-footer"},r.a.createElement("p",null,"Price"),r.a.createElement("table",{className:"table new-table"},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon1.png",className:"price-icon",alt:"Basic Price"})),r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon2.png",className:"price-icon",alt:"Plus Price"})),r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon3.png",className:"price-icon",alt:"Premium Price"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"$",a.price||0),r.a.createElement("td",null,"$ ",a.plusPrice||0),r.a.createElement("td",null,"$ ",a.premiumPrice||0)))))),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("div",{className:"ProfileCard card event-details-card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("img",{src:a.coverImage&&a.coverImage.length?a.coverImage:ze.a.defaultCoverPicture,alt:"event pic"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"mt-2 mb-3"},r.a.createElement("span",null,"Event Name : "),a.name),r.a.createElement("p",null,a.description&&a.description.length?r.a.createElement(Ia.a,{className:"read-more-content",charLimit:80,readMoreText:"Read more",readLessText:"Read less"},a.description):null))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 mt-4"},r.a.createElement("h3",{className:"mb-4"},"Attendees"),r.a.createElement("table",{className:"table new-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Subscriber"),r.a.createElement("th",null,"Amount Paid"),r.a.createElement("th",null,"Transaction ID"),r.a.createElement("th",null,"Status"))),l.length?r.a.createElement("tbody",null,l.map((function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement("div",{className:"personImgWrap",onClick:function(){return e._redirectToSubscriberView(t._from)},style:{cursor:"pointer"}},r.a.createElement("img",{className:"personImg",src:t._from&&t._from.profilePicture&&t._from.profilePicture.length?t._from.profilePicture:ze.a.defaultUserPicture,alt:"Profile Thumbnail"})),r.a.createElement("p",{onClick:function(){return e._redirectToSubscriberView(t._from)},style:{cursor:"pointer"}},t._from.name.full)))),r.a.createElement("td",null,"$",t.amount||0),r.a.createElement("td",null,t.transactionId),r.a.createElement("td",{className:"capitalize"},t.status))}))):r.a.createElement("tbody",null,r.a.createElement("tr",null,"No attendees yet"))))))),o.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Event Details.."))):null}}]),a}(n.Component),Ra=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._getPPVDetails=function(e){n._manageLoading("data",!0),function(e){return new Promise((function(t,a){H(q+"payperview/"+e,!0).then((function(e){t(e)})).catch((function(e){console.log("API call error: ",e),a(e)}))}))}(e).then((function(e){var t=e.payperview,a=e.transactions;console.log("response",e),n.setState({payperview:t,transactions:a},(function(){n._manageLoading("data",!1)}))}),(function(e){console.log(e),n._manageLoading("data",!1)}))},n._onToggleReferralsModal=function(e){var t=JSON.parse(JSON.stringify(n.state)).referralsModal;t.isOpen=!t.isOpen,t.isOpen&&(e.referrals=e._invitations),t.data=e,n.setState({referralsModal:t},(function(){console.log(n.state)}))},n._onToggleSubscriberModal=function(e){var t=JSON.parse(JSON.stringify(n.state)).subscriberModal;t.isOpen=!t.isOpen,t.isOpen&&(e.subscribers=e._subscriptions),t.data=e,n.setState({subscriberModal:t},(function(){console.log(n.state)}))},n._goBack=function(){n.props.history.goBack()},n._manageLoading=function(e,t){var a=n.state.loading,r=a.loadingData,l=a.changeStatusLoading;"data"===e?r=t:"change-status"===e&&(l=t),n.setState({loading:{loadingData:r,changeStatusLoading:l}})},n._onStatusUpdate=function(){var e=n.state.creatorDetails;e.status="Active"===e.status?"Inactive":"Active",n.setState({creatorDetails:e}),n._manageLoading("change-status",!0),Q(e.id).then((function(e){console.log(e),n._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(e){console.log(e),n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._markAsDirty=function(e){var t=xe(n.state).formFields;t[e].isDirty=!0,t[e].isTyped=!0,n.setState({formFields:t},(function(){n._validateForm()}))},n._updateFieldValue=function(e,t){var a=xe(n.state).formFields;if(("referPercentage"===e||"earningPercentage"===e)&&!isNaN(Number(t))){var r=t.split(".");if(2===r.length&&r[1].length>2)return}a[e].value=t,n.setState({formFields:a},(function(){a[e].isDirty&&n._validateForm()}))},n._validateForm=function(){return new Promise((function(e){var t=xe(n.state),a=t.formFields,r=(t.platformShare,!0);Object.keys(a).forEach((function(e,t){if(a[e].isTyped)switch(e){case"referPercentage":case"earningPercentage":String(a[e].value).length&&!isNaN(Number(a[e].value))&&Number(a[e].value)>=0&&Math.ceil(a[e].value)<=100?a[e].isValid=!0:(a[e].isValid=!1,r=!1)}})),n.setState({formFields:a,isFormValid:r},(function(){e()}))}))},n._makeAllFieldDirty=function(){return new Promise((function(e){var t=xe(n.state).formFields;Object.keys(t).forEach((function(e,a){t[e].isDirty=!0})),n.setState({formFields:t},(function(){e()}))}))},n._validateAndSubmit=function(){var e=Object(w.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n._makeAllFieldDirty();case 3:return e.next=5,n._validateForm();case 5:a=n.state,a.formFields,a.isFormValid?(console.log("valid"),n._updateShareSettings()):console.log("not valid");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._updateShareSettings=function(){var e=xe(n.state),t=e.formFields,a=e.creatorDetails;Se(a.id,{earningPercentage:Number(t.earningPercentage.value),referPercentage:Number(t.referPercentage.value)}).then((function(e){n._manageLoading("change-status",!1),O.ToastsStore.success("Updated Successfully!",3e3)})).catch((function(e){n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._calculatePlatformShare=function(){return new Promise((function(e){var t=xe(n.state),a=t.formFields;t.isInitial;n.setState({platformShare:100-(Number(a.referPercentage.value||0)+Number(a.earningPercentage.value||0)),isInitial:!1},(function(){e()}))}))},n._getFilteredData=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=e.filter((function(e){return e.hasOwnProperty(a)&&e[a]===n}));return l.length&&l[0].hasOwnProperty(t)?l[0][t]:r},n._formatSocialUrl=function(e){if(e&&e.length)return e.indexOf("http")>-1||e.indexOf("https")>-1?e:e="https://"+e},n._changeReferralCount=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("_changeReferralCount -> isIncrease",e);var t=xe(n.state),a=t.additionalReferralCount;e&&a>=0?a++:!e&&a>0&&a--,n.setState({additionalReferralCount:a})},n._addReferralCount=function(){var e=xe(n.state),t=e.creatorDetails,a=e.availableReferrralCount,r=e.additionalReferralCount;r<=0||(n._manageLoading("change-status",!0),a=Number(a)+Number(r),Se(t.id,{referralCount:a}).then((function(e){n.setState({availableReferrralCount:a,additionalReferralCount:0}),n._manageLoading("change-status",!1),O.ToastsStore.success("Updated Successfully!",3e3)})).catch((function(e){n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")})))},n._redirectToSubscriberView=function(e){n.props.history.push("/subscriber-view/"+e._id)},n.state={platformShare:0,isAdditionError:!1,isInitial:!0,isFormValid:!1,idCardUrl:null,holdingIDCardUrl:null,formFields:{referPercentage:{value:"",isValid:!1,isDirty:!1,isRequired:!0,isTyped:!1},earningPercentage:{value:"",isValid:!1,isDirty:!1,isRequired:!0,isTyped:!1}},subscriberModal:{isOpen:!1,data:null},referralsModal:{isOpen:!1,data:null},activeTab:new Array(2).fill("1"),creatorDetails:null,loading:{loadingData:!1,changeStatusLoading:!1},payperview:{_influencer:{}},transactions:[],availableReferrralCount:0,additionalReferralCount:0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._manageLoading("data",!0),this._getPPVDetails(this.props.match.params.id)}},{key:"toggle",value:function(e,t){var a=this,n=this.state.activeTab.slice();n[e]=t,this.setState({activeTab:n},(function(){2===Number(t)&&a._updateChildActivites()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.payperview,n=t.payperview._influencer,l=t.transactions;t.loading;return r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,null,r.a.createElement("div",{className:"events-view"},r.a.createElement("div",{className:"PgTitle mb-5"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(N.a,{color:"ghost-dark",className:"customBackBtn",onClick:function(){return e.props.history.push("/pay-per-view")}},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("h2",null,"Back to PPVs"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"ProfileCard card"},r.a.createElement("div",{className:"card-header"}),r.a.createElement("div",{className:"align-items-center d-flex flex-column card-body"},r.a.createElement("div",{className:"profileImgWrap"},r.a.createElement("img",{className:"profileImg",src:n&&n.profilePicture&&n.profilePicture.length?n.profilePicture:ze.a.defaultUserPicture,alt:"Profile Img"})),r.a.createElement("h4",{className:"mt-2 mb-2"},n&&n.name&&n.name.full,"\xa0",r.a.createElement("img",{src:"https://www.countryflags.io/".concat(n&&n.address&&n.address.country,"/flat/24.png"),alt:"flag"})),r.a.createElement("p",null,"Published :"," ",r.a.createElement("span",null,Te()(a.scheduledAt).format("LLL")))),r.a.createElement("div",{className:"card-footer new-card-footer"},r.a.createElement("p",null,"Price"),r.a.createElement("table",{className:"table new-table"},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon1.png",className:"price-icon",alt:"Basic Price"})),r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon2.png",className:"price-icon",alt:"Plus Price"})),r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon3.png",className:"price-icon",alt:"Premium Price"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"$",a.price||0),r.a.createElement("td",null,"$",a.plusPrice||0),r.a.createElement("td",null,"$",a.premiumPrice||0)))))),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("div",{className:"ProfileCard card event-details-card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("video",{width:"100%",src:a.videoUrl,controls:!0,controlsList:"nodownload",disablePictureInPicture:!0})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"mt-2 mb-3"},r.a.createElement("span",null,"Pay per view Name : "),a.title),r.a.createElement("p",null,a.description&&a.description.length?r.a.createElement(Ia.a,{className:"read-more-content",charLimit:80,readMoreText:"Read more",readLessText:"Read less"},a.description):null))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 mt-4"},r.a.createElement("h3",{className:"mb-4"},"Viewers"),r.a.createElement("table",{className:"table new-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Subscriber"),r.a.createElement("th",null,"Amount Paid"),r.a.createElement("th",null,"Transaction ID"),r.a.createElement("th",null,"Status"))),l.length?r.a.createElement("tbody",null,l.map((function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement("a",{href:"#"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement("div",{className:"personImgWrap",onClick:function(){return e._redirectToSubscriberView(t._from)},style:{cursor:"pointer"}},r.a.createElement("img",{className:"personImg",src:t._from&&t._from.profilePicture&&t._from.profilePicture.length?t._from.profilePicture:ze.a.defaultUserPicture,alt:"Profile Thumbnail"})),r.a.createElement("p",{onClick:function(){return e._redirectToSubscriberView(t._from)},style:{cursor:"pointer"}},t._from.name.full)))),r.a.createElement("td",null,"$",t.amount||0),r.a.createElement("td",null,t.transactionId),r.a.createElement("td",{className:"capitalize"},t.status))}))):r.a.createElement("tbody",null,r.a.createElement("tr",null,"No viewers yet"))))))))}}]),a}(n.Component),Ba=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._onToggleReferralsModal=function(e){var t=JSON.parse(JSON.stringify(n.state)).referralsModal;t.isOpen=!t.isOpen,t.isOpen&&(e.referrals=e._invitations),t.data=e,n.setState({referralsModal:t},(function(){console.log(n.state)}))},n._onToggleSubscriberModal=function(e){var t=JSON.parse(JSON.stringify(n.state)).subscriberModal;t.isOpen=!t.isOpen,t.isOpen&&(e.subscribers=e._subscriptions),t.data=e,n.setState({subscriberModal:t},(function(){console.log(n.state)}))},n._goBack=function(){n.props.history.goBack()},n._manageLoading=function(e,t){var a=n.state.loading,r=a.loadingData,l=a.changeStatusLoading;"data"===e?r=t:"change-status"===e&&(l=t),n.setState({loading:{loadingData:r,changeStatusLoading:l}})},n._getCreatorDetails=function(e){n._manageLoading("data",!0),X(e).then((function(e){n._manageLoading("data",!1);var t=xe(n.state),a=t.creatorDetails,r=t.formFields,l=t.idCardUrl,o=t.holdingIDCardUrl,s=t.availableReferrralCount,i=t.bundles;t.subscriptions;i=e.bundles,e.influencer.profilePicture=e.influencer.profilePicture||ze.a.defaultUserPicture,e.influencer.status=e.influencer.isActive?"Active":"Inactive",e.influencer.lifeTime=e.influencer._credit.reduce((function(e,t){return e+t.amountToDestination}),0).toFixed(2),s=(a=e.influencer).hasOwnProperty("avaiableReferralCount")?a.avaiableReferralCount:0,l=a.hasOwnProperty("docs")&&a.docs.length?n._getFilteredData(a.docs,"url","category","identity proof",ze.a.noImageAvialableUrl):ze.a.noImageAvialableUrl,o=a.hasOwnProperty("docs")&&a.docs.length?n._getFilteredData(a.docs,"url","category","holding id card",ze.a.noImageAvialableUrl):ze.a.noImageAvialableUrl,r.earningPercentage.value=a&&a.hasOwnProperty("earningPercentage")?a.earningPercentage:0,r.earningPercentage.isDirty=!0,r.earningPercentage.isTyped=!0,r.referPercentage.value=a&&a.hasOwnProperty("referPercentage")?a.referPercentage:0,r.referPercentage.isDirty=!0,r.referPercentage.isTyped=!0,n.setState({creatorDetails:a,formFields:r,idCardUrl:l,holdingIDCardUrl:o,availableReferrralCount:s,bundles:i},(function(){console.log("formFields :",r),n._validateForm(),n._calculatePlatformShare()}))}),(function(e){console.log(e),n._manageLoading("data",!1)}))},n._onStatusUpdate=function(){var e=n.state.creatorDetails;e.status="Active"===e.status?"Inactive":"Active",n.setState({creatorDetails:e}),n._manageLoading("change-status",!0),Q(e.id).then((function(e){console.log(e),n._manageLoading("change-status",!1),O.ToastsStore.success("Status changed Successfully!",3e3)}),(function(e){console.log(e),n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._markAsDirty=function(e){var t=xe(n.state).formFields;t[e].isDirty=!0,t[e].isTyped=!0,n.setState({formFields:t},(function(){n._validateForm()}))},n._updateFieldValue=function(e,t){var a=xe(n.state).formFields;if(("referPercentage"===e||"earningPercentage"===e)&&!isNaN(Number(t))){var r=t.split(".");if(2===r.length&&r[1].length>2)return}a[e].value=t,n.setState({formFields:a},(function(){a[e].isDirty&&n._validateForm()}))},n._validateForm=function(){return new Promise((function(e){var t=xe(n.state),a=t.formFields,r=(t.platformShare,!0);Object.keys(a).forEach((function(e,t){if(a[e].isTyped)switch(e){case"referPercentage":case"earningPercentage":String(a[e].value).length&&!isNaN(Number(a[e].value))&&Number(a[e].value)>=0&&Math.ceil(a[e].value)<=100?a[e].isValid=!0:(a[e].isValid=!1,r=!1)}})),n.setState({formFields:a,isFormValid:r},(function(){e()}))}))},n._makeAllFieldDirty=function(){return new Promise((function(e){var t=xe(n.state).formFields;Object.keys(t).forEach((function(e,a){t[e].isDirty=!0})),n.setState({formFields:t},(function(){e()}))}))},n._validateAndSubmit=function(){var e=Object(w.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n._makeAllFieldDirty();case 3:return e.next=5,n._validateForm();case 5:a=n.state,a.formFields,a.isFormValid?(console.log("valid"),n._updateShareSettings()):console.log("not valid");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._updateShareSettings=function(){var e=xe(n.state),t=e.formFields,a=e.creatorDetails;Se(a.id,{earningPercentage:Number(t.earningPercentage.value),referPercentage:Number(t.referPercentage.value)}).then((function(e){n._manageLoading("change-status",!1),O.ToastsStore.success("Updated Successfully!",3e3)})).catch((function(e){n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")}))},n._calculatePlatformShare=function(){return new Promise((function(e){var t=xe(n.state),a=t.formFields;t.isInitial;n.setState({platformShare:100-(Number(a.referPercentage.value||0)+Number(a.earningPercentage.value||0)),isInitial:!1},(function(){e()}))}))},n._getFilteredData=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=e.filter((function(e){return e.hasOwnProperty(a)&&e[a]===n}));return l.length&&l[0].hasOwnProperty(t)?l[0][t]:r},n._formatSocialUrl=function(e){if(e&&e.length)return e.indexOf("http")>-1||e.indexOf("https")>-1?e:e="https://"+e},n._changeReferralCount=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("_changeReferralCount -> isIncrease",e);var t=xe(n.state),a=t.additionalReferralCount;e&&a>=0?a++:!e&&a>0&&a--,n.setState({additionalReferralCount:a})},n._addReferralCount=function(){var e=xe(n.state),t=e.creatorDetails,a=e.availableReferrralCount,r=e.additionalReferralCount;r<=0||(n._manageLoading("change-status",!0),a=Number(a)+Number(r),Se(t.id,{referralCount:a}).then((function(e){n.setState({availableReferrralCount:a,additionalReferralCount:0}),n._manageLoading("change-status",!1),O.ToastsStore.success("Updated Successfully!",3e3)})).catch((function(e){n._manageLoading("change-status",!1),Ae(e.reason&&e.reason.length?e.reason:"Server error. Try again after sometime.","error")})))},n._renderPriceTable=function(){var e,t=xe(n.state),a=t.bundles,l=t.selectedMonth,o=t.creatorDetails,s={subscriptionPeriod:30,price:o.subscriptionFees.amount,tier:"basic"};console.log("bundles",a),a.push(s),o.hasOwnProperty("plusSubscriptionFees")&&(e={subscriptionPeriod:30,price:o.plusSubscriptionFees.amount,tier:"plus"},a.push(e)),o.hasOwnProperty("premiumSubscriptionFees")&&(e={subscriptionPeriod:30,price:o.premiumSubscriptionFees.amount,tier:"premium"},a.push(e)),console.log(a);var i=a.filter((function(e){return e.subscriptionPeriod===Number(l)}));return r.a.createElement("table",{className:"table new-table"},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon1.png",className:"price-icon",alt:"Basic Price"})),r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon2.png",className:"price-icon",alt:"Plus Price"})),r.a.createElement("th",null,r.a.createElement("img",{src:"../assets/img/price-icon3.png",className:"price-icon",alt:"Premium Price"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"$",i[0]&&"basic"===i[0].tier?i[0].price:0),r.a.createElement("td",null,"$",i[1]&&"plus"===i[1].tier?i[1].price:0),r.a.createElement("td",null,"$",i[2]&&"premium"===i[2].tier?i[2].price:0)))},n._onMonthUpdated=function(e){var t=e.currentTarget,a=xe(n.state).selectedMonth;console.log(t.value),a=t.value,n.setState({selectedMonth:a})},n.state={platformShare:0,isAdditionError:!1,isInitial:!0,isFormValid:!1,idCardUrl:null,holdingIDCardUrl:null,formFields:{referPercentage:{value:"",isValid:!1,isDirty:!1,isRequired:!0,isTyped:!1},earningPercentage:{value:"",isValid:!1,isDirty:!1,isRequired:!0,isTyped:!1}},subscriberModal:{isOpen:!1,data:null},referralsModal:{isOpen:!1,data:null},activeTab:new Array(2).fill("1"),creatorDetails:null,loading:{loadingData:!1,changeStatusLoading:!1},availableReferrralCount:0,additionalReferralCount:0,bundles:[],selectedMonth:30},n}return Object(i.a)(a,[{key:"toggle",value:function(e,t){var a=this,n=this.state.activeTab.slice();n[e]=t,this.setState({activeTab:n},(function(){2===Number(t)&&a._updateChildActivites()}))}},{key:"componentDidMount",value:function(){this._getCreatorDetails(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.state,a=t.creatorDetails,n=t.loading,l=t.formFields,o=(t.platformShare,t.isAdditionError,t.idCardUrl,t.holdingIDCardUrl,t.additionalReferralCount,t.availableReferrralCount);t.selectedMonth,t.bundles;return console.log("formFields :",l),r.a.createElement("div",{className:"app TruFansPgBg animated fadeIn"},r.a.createElement(p.a,null,!n.loadingData&&r.a.createElement(f.a,null,a&&r.a.createElement(g.a,{xs:"12"},r.a.createElement("div",{className:"PgTitle"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(N.a,{color:"ghost-dark",className:"customBackBtn",onClick:this._goBack},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("h2",null,"Order Details")))),a&&r.a.createElement(g.a,{sm:"12"},r.a.createElement(it.a,{activeTab:this.state.activeTab[0],className:"customTabContent--Truefanz"},r.a.createElement(ct.a,{tabId:"1"},r.a.createElement(f.a,null,r.a.createElement(g.a,{sm:"12",md:"7",lg:"7",xl:"5"},r.a.createElement("h3",null,"Order # :-",a.name.full),r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"mb-2 ml-5"},"Buyer"),r.a.createElement(mt.a,{className:"profileInfo"},r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-envelope"}),"Name:",r.a.createElement("span",null,r.a.createElement(Yt,{copiedValue:a.email,fontWeight:600})))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-envelope"}),"Email:",r.a.createElement("span",null,r.a.createElement(Yt,{copiedValue:a.email,fontWeight:600})))),r.a.createElement(ut.a,null,r.a.createElement("p",null,r.a.createElement("i",{className:"icon-phone"}),"Phone:",r.a.createElement("span",null,a.phone?r.a.createElement(Yt,{copiedValue:Object(nt.a)(a.phone).formatInternational(),fontWeight:600}):"N/A"))))))),r.a.createElement(g.a,{sm:"12",md:"5",xl:"4"},r.a.createElement(v.a,{className:"ProfileCard mt-5"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:" mt-2 mb-4"},"Affiliate :-","XYZ ")))),r.a.createElement(g.a,{sm:"6",md:"7",lg:"7",xl:"5"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"text-center mt-2"},"Address"),a.address&&r.a.createElement("div",{className:"addressWrap"},r.a.createElement("p",null,a.address.street||"N/A"),r.a.createElement(Xe.a,null,"City:"),r.a.createElement("p",null,a.address.city||"N/A"),r.a.createElement(Xe.a,null,"State:"),r.a.createElement("p",null,a.address.state||"N/A"),r.a.createElement(Xe.a,null,"Zip:"),r.a.createElement("p",null,a.address.zip||"N/A"),r.a.createElement(Xe.a,null,"Country:"),r.a.createElement("p",null,a.address.country||"N/A")),!a.address&&r.a.createElement("div",null,"Address Not Provided")))),r.a.createElement(g.a,{sm:"6",md:"5",xl:"3"},r.a.createElement(v.a,{className:"ProfileCard"},r.a.createElement(E.a,null,r.a.createElement("h4",{className:"text-center mt-2"},"Product"),r.a.createElement("div",{className:"addressWrap mt-3"},r.a.createElement("p",null,"Product Name:-",o),r.a.createElement("p",null,"Qty:-","4"),r.a.createElement("p",null,"Amount:-","4"),r.a.createElement("p",{htmlFor:"status"},"Status"),r.a.createElement(C.a,{type:"select",id:"status",placeholder:"Enter",name:"status"},r.a.createElement("option",null,"Status"),r.a.createElement("option",{value:"active"},"Active"),r.a.createElement("option",{value:"inactive"},"Inactive")),r.a.createElement(N.a,{type:"submit",className:"BtnPurple mx-auto d-block",style:{padding:"7px 25px",margin:"30px auto 10px"},onClick:this._addReferralCount},"Add"))))))),r.a.createElement(ct.a,{tabId:"2"},r.a.createElement(f.a,{className:"mb-4 justify-content-center"},r.a.createElement(g.a,{sm:12,md:10,lg:8},r.a.createElement(Ut,Object.assign({user:a,updateRef:function(t){return e._updateChildActivites=t}},this.props))))))),r.a.createElement(g.a,{xs:"4"},r.a.createElement("p",null,"Status")),r.a.createElement(g.a,{xs:"4"},r.a.createElement("p",null,"Date")),r.a.createElement(g.a,{xs:"4"},r.a.createElement("p",null,"Remark"))),n.loadingData&&r.a.createElement("div",{className:"filterWrap"},r.a.createElement("div",{className:"loading-section list-loading"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," \xa0 Loading Creator Details..")),r.a.createElement(Ht,{isOpen:this.state.subscriberModal.isOpen,creatorData:this.state.subscriberModal.data,toggle:function(){return e._onToggleSubscriberModal()}}),r.a.createElement(Wt,{isOpen:this.state.referralsModal.isOpen,creatorData:this.state.referralsModal.data,toggle:function(){return e._onToggleReferralsModal()}})))}}]),a}(n.Component),Ua=r.a.lazy((function(){return a.e(4).then(a.bind(null,774))})),Va=r.a.lazy((function(){return a.e(3).then(a.bind(null,775))})),Ya=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).loading=function(){return r.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},e}return Object(i.a)(a,[{key:"signOut",value:function(e){e.preventDefault(),this.props.history.push("/login")}},{key:"render",value:function(){var e=this;return console.log(ze.a,this.props.match.path),r.a.createElement("div",{className:"app"},r.a.createElement(La.b,{fixed:!0},r.a.createElement(n.Suspense,{fallback:this.loading()},r.a.createElement(Va,Object.assign({onLogout:function(t){return e.signOut(t)}},this.props)))),r.a.createElement("div",{className:"app-body"},r.a.createElement(La.d,{fixed:!0,display:"xs"},r.a.createElement(n.Suspense,null,r.a.createElement(La.e,Object.assign({navConfig:ze.a.leftMenu},this.props,{router:u})))),r.a.createElement("main",{className:"main"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(d.g,null,r.a.createElement(ka,{path:"/order",component:na,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/order-view/:id",component:Ba,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/admin-accounts",component:ha,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/influencer",component:rt,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/product",component:Da,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/sellers",component:Pa,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/product-view/:id",component:Oa,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/invitations",component:da,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/transactions",component:sa,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/content-moderation",component:ma,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/payouts",component:ca,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/live-events",component:Ma,redirectRoute:"/login"}),r.a.createElement(ka,{exact:!0,path:"/pay-per-view/:id",component:Ra,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/settings",component:Ca}),r.a.createElement(ka,{path:"/home",component:Ke,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/events-view/:id",component:ja,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/creator-view/:id",component:Kt,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/subscriber-view/:id",component:oa,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/creator-requests",component:xa,redirectRoute:"/login"}),r.a.createElement(ka,{path:"/post/:id",component:Aa,redirectRoute:"/login"}),r.a.createElement(d.d,{path:"/",render:function(){return r.a.createElement(d.c,{to:"/sellers"})}}))))),r.a.createElement(La.a,null,r.a.createElement(n.Suspense,{fallback:this.loading()},r.a.createElement(Ua,null))))}}]),a}(n.Component),Wa=(a(727),a(350)),za=function(e){var t=e.component,a=Object(wa.a)(e,["component"]);return r.a.createElement(d.d,Object.assign({},a,{render:function(e){return localStorage.socialAffilAdminToken?r.a.createElement(d.c,{to:{pathname:a.redirectRoute,extras:Object(F.a)({},a.location)}}):r.a.createElement(t,e)}}))},Ha=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(P.a,{store:V},r.a.createElement(Wa.a,{persistor:Y},r.a.createElement(u.BrowserRouter,null,r.a.createElement(O.ToastsContainer,{store:O.ToastsStore,position:O.ToastsContainerPosition.TOP_RIGHT}),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:""},r.a.createElement(d.g,null,r.a.createElement(za,{path:"/login",component:Be,redirectRoute:"/seller"}),r.a.createElement(za,{path:"/forgot-password",component:Ue,redirectRoute:"/seller"}),r.a.createElement(d.d,{path:"/",component:Ya}),r.a.createElement(d.d,{path:"*",render:function(){return r.a.createElement(d.c,{to:"/"})}})))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ha,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){"use strict";t.a={baseURL:(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_ENV,"http://139.59.14.81:3000/admin/v1/"),publicURL:(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_ENV,"http://139.59.14.81:3000/admin/v1/"),cloudinaryURL:"live"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_ENV?"https://api.cloudinary.com/v1_1/alphatec/${mediaType}/upload?upload_preset=fzxhy6mj":"https://api.cloudinary.com/v1_1/soumyanil/${mediaType}/upload?upload_preset=idbhf8rq",defaultUserPicture:"https://tf-prod-images.s3.us-east-2.amazonaws.com/DEFAULT_PROFILE_PICTURE.png",defaultCoverPicture:"https://sc-default-content.s3.amazonaws.com/DEFAULT_COVER_PICTURE.png",noImageAvialableUrl:"https://tf-prod-images.s3.us-east-2.amazonaws.com/NO_IMAGE_AVAILABLE.png",leftMenu:{items:[{name:"Sellers",url:"/sellers",icon:"fa fa-exchange",isHeaderMenu:!0},{name:"Influencers",url:"/influencer",icon:"icon-user",isHeaderMenu:!0},{name:"Orders",url:"/order",icon:"icon-user-follow",isHeaderMenu:!0},{name:"Products",url:"/product",icon:"fa fa-exchange",isHeaderMenu:!0},{name:"Payouts",url:"/payouts",icon:"fa fa-dollar",isHeaderMenu:!0},{name:"Admin Accounts",url:"/admin-accounts",icon:"fa fa-black-tie",isHeaderMenu:!0},{name:"Logout",url:"/login",icon:"icon-power",isHeaderMenu:!1}]},productCount:[{label:"0",value:{min:0,max:0}},{label:"1-5",value:{min:1,max:5}},{label:"6-20",value:{min:6,max:20}},{label:"20+",value:{min:20}}],invitationsStatusColor:{pending:"warning",accepted:"success",expired:"danger"},contentModerationStatusList:["User Blocked","Content within guidelines","Content Removed","Pending Inquiry"],contentModerationReasonList:["Explicit Content","Hate Speech","Promotes Illegal Activity","Racism","Violence","Other"],subscriptionCounts:[{label:"0",value:{min:0,max:0}},{label:"1",value:{min:1,max:1}},{label:"2",value:{min:2,max:2}},{label:"3-5",value:{min:3,max:5}},{label:"6-10",value:{min:6,max:10}},{label:"10+",value:{min:10}}],spentCounts:[{label:"0",value:{min:0,max:0}},{label:"1-50",value:{min:1,max:50}},{label:"51-200",value:{min:51,max:200}},{label:"201-500",value:{min:201,max:500}},{label:"500+",value:{min:500}}],priceCounts:[{label:"0-20",value:{min:0,max:20}},{label:"20-50",value:{min:20,max:50}},{label:"50-100",value:{min:50,max:100}},{label:"100-250",value:{min:100,max:250}},{label:"250-500",value:{min:250,max:500}},{label:"500+",value:{min:500}}],salesCounts:[{label:"0",value:{min:0,max:0}},{label:"1-5",value:{min:1,max:50}},{label:"6-10",value:{min:6,max:10}},{label:"11-20",value:{min:11,max:20}},{label:"21-50",value:{min:21,max:50}},{label:"51-100",value:{min:51,max:100}},{label:"100+",value:{min:100}}],paymentTypes:["tips","subscription","message","withdrawal","vault","unlock","payperview","chargeback","refund","liveEvent"],liveStatusList:["Scheduled","Canceled","Ongoing","Completed"],paymentStatusList:["pending","released","approved","flagged","refunded"],withdrawalStatus:["requested","approved","rejected","pending","completed"],monthList:["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sep","Oct","Nov","Dec"],regexConfig:{digitOnly:/^[0-9]*$/,phone:/^(\+\d{1,3}[- ]?)?\d{8,11}$/},rsvp:["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sep","Oct","Nov","Dec"],socialIconConfig:{facebook:"fa fa-facebook",twitter:"fa fa-twitter",youtube:"fa fa-youtube-play",instagram:"fa fa-instagram",tiktok:"fa fa-tiktok"}}}},[[353,1,2]]]);
//# sourceMappingURL=main.08a58dc2.chunk.js.map